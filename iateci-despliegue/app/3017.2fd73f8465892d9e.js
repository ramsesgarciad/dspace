"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[3017],{33017:(F,D,t)=>{t.r(D),t.d(D,{ResourcePolicyDataService:()=>V});var u=t(21626),v=t(96354),p=t(61594),i=t(89777),B=t(9847),l=t(57775),o=t(10186),K=t(81948),R=t(18328),I=t(72073),L=t(20881),T=t(4318),A=t(60796),C=t(96443),P=t(36343),W=t(49755),f=t(3601),y=t(74642),g=t(13817),m=t(2086),U=t(7094),x=t(4093),h=t(54438);let V=(()=>{class d extends L.W{constructor(e,s,r,a,n,_,c,E){super("resourcepolicies",e,s,r,a),this.requestService=e,this.rdbService=s,this.objectCache=r,this.halService=a,this.notificationsService=n,this.comparator=_,this.ePersonService=c,this.groupService=E,this.searchByEPersonMethod="eperson",this.searchByGroupMethod="group",this.searchByResourceMethod="resource",this.createData=new R.V(this.linkPath,e,s,r,a,n,this.responseMsToLive),this.searchData=new A.X(this.linkPath,e,s,r,a,this.responseMsToLive),this.patchData=new T.n(this.linkPath,e,s,r,a,_,this.responseMsToLive,this.constructIdEndpoint),this.deleteData=new I.I(this.linkPath,e,s,r,a,n,this.responseMsToLive,this.constructIdEndpoint)}create(e,s,r,a){const n=[];return n.push(new o.x("resource",s)),(0,i.hj)(r)?n.push(new o.x("eperson",r)):(0,i.hj)(a)&&n.push(new o.x("group",a)),this.createData.create(e,...n)}delete(e){return this.deleteData.delete(e).pipe((0,x.qD)(),(0,v.T)(s=>s.hasSucceeded))}update(e){return this.patchData.update(e)}getDefaultAccessConditionsFor(e,s){return this.findListByHref(e._links.defaultAccessConditions.href,s)}searchByEPerson(e,s,r=!0,a=!0,...n){const _=new P._;return _.searchParams=[new o.x("uuid",e)],(0,i.hj)(s)&&_.searchParams.push(new o.x("resource",s)),this.searchData.searchBy(this.searchByEPersonMethod,_,r,a,...n)}searchByGroup(e,s,r=!0,a=!0,...n){const _=new P._;return _.searchParams=[new o.x("uuid",e)],(0,i.hj)(s)&&_.searchParams.push(new o.x("resource",s)),this.searchData.searchBy(this.searchByGroupMethod,_,r,a,...n)}searchByResource(e,s,r=!0,a=!0,...n){const _=new P._;return _.searchParams=[new o.x("uuid",e)],(0,i.hj)(s)&&_.searchParams.push(new o.x("action",s)),this.searchData.searchBy(this.searchByResourceMethod,_,r,a,...n)}updateTarget(e,s,r,a){const _=("eperson"===a?this.ePersonService:this.groupService).getIDHrefObs(r),c=Object.create({});let E=new u.Lr;E=E.append("Content-Type","text/uri-list"),c.headers=E;const M=this.requestService.generateRequestId();return _.pipe((0,p.$)()).subscribe(j=>{const O=new W.v_(M,s+"/"+a,j,c);Object.assign(O,{getResponseParser:()=>y.M}),this.requestService.send(O)}),this.rdbService.buildFromRequestUUIDAndAwait(M,()=>this.invalidateByHref(s))}static{this.\u0275fac=function(s){return new(s||d)(h.KVO(f.B),h.KVO(l.o),h.KVO(K.$),h.KVO(U.Y),h.KVO(B.I),h.KVO(C.Y),h.KVO(g.EPersonDataService),h.KVO(m.GroupDataService))}}static{this.\u0275prov=h.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}}return d})()}}]);