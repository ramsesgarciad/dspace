"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[7264,3706,7151],{77264:(U,j,a)=>{a.r(j),a.d(j,{ROUTES:()=>Gt});var S=a(59072),$=a(60177),b=a(58003),y=a(68018),D=a(51801),k=a(32506),R=a(78544),f=a(89417);class d{constructor(r,e=!1){this.id=r,this.hasTooltip=e}}class x{constructor(r,e){this.filters=e,this.id=r,this.key="admin.reports.commons.filters."+r,e.forEach(s=>{s.key=this.key+"."+s.id,s.hasTooltip&&(s.tooltipKey=s.key+".tooltip")})}}var t=a(54438);function B(i,r){if(1&i&&(t.j41(0,"div",7),t.nrm(1,"input",8),t.j41(2,"label",9),t.nI1(3,"translate"),t.EFF(4),t.nI1(5,"translate"),t.k0s()()),2&i){const e=r.$implicit;t.R7$(),t.Mz_("id","flt-",e.id,""),t.FS9("value",e.id),t.FS9("formControlName",e.id),t.R7$(),t.Mz_("for","flt-",e.id,""),t.FS9("title",t.bMT(3,8,e.tooltipKey)),t.R7$(2),t.JRh(t.bMT(5,10,e.key))}}function P(i,r){if(1&i&&(t.j41(0,"fieldset",0)(1,"legend"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.qex(4,6),t.Z7z(5,B,6,12,"div",7,t.fX1),t.bVm(),t.k0s()),2&i){const e=r.$implicit,s=t.XpG();t.R7$(2),t.JRh(t.bMT(3,2,e.key)),t.R7$(2),t.Y8G("formGroup",s.filtersForm),t.R7$(),t.Dyx(e.filters)}}class F{static{this.FILTERS=[new x("property",[new d("is_item"),new d("is_withdrawn"),new d("is_not_withdrawn"),new d("is_discoverable"),new d("is_not_discoverable")]),new x("bitstream",[new d("has_multiple_originals"),new d("has_no_originals"),new d("has_one_original")]),new x("bitstream_mime",[new d("has_doc_original"),new d("has_image_original"),new d("has_unsupp_type"),new d("has_mixed_original"),new d("has_pdf_original"),new d("has_jpg_original"),new d("has_small_pdf"),new d("has_large_pdf"),new d("has_doc_without_text")]),new x("mime",[new d("has_only_supp_image_type"),new d("has_unsupp_image_type"),new d("has_only_supp_doc_type"),new d("has_unsupp_doc_type")]),new x("bundle",[new d("has_unsupported_bundle"),new d("has_small_thumbnail"),new d("has_original_without_thumbnail"),new d("has_invalid_thumbnail_name"),new d("has_non_generated_thumb"),new d("no_license"),new d("has_license_documentation")]),new x("permission",[new d("has_restricted_original",!0),new d("has_restricted_thumbnail",!0),new d("has_restricted_metadata",!0)])]}static formGroup(r){const e={},s=F.FILTERS;for(let n=0;n<s.length;n++){const o=s[n];for(let l=0;l<o.filters.length;l++)e[o.filters[l].id]=new f.MJ(!1)}return r.group(e)}static getFilter(r){const e=F.FILTERS;for(let s=0;s<e.length;s++){const n=e[s];for(let o=0;o<n.filters.length;o++){const l=n.filters[o];if(l.id===r)return l}}}static getGroup(r){const e=F.FILTERS;for(let s=0;s<e.length;s++){const n=e[s];for(let o=0;o<n.filters.length;o++)if(n.filters[o].id===r)return n}}static toQueryString(r){let e="",s=!0;for(const n in r)r[n]&&(s?s=!1:e+="&",e+=`filters=${n}`);return e}allFilters(){return F.FILTERS}setAllFilters(r){const e={},s=F.FILTERS;for(let n=0;n<s.length;n++){const o=s[n];for(let l=0;l<o.filters.length;l++)e[o.filters[l].id]=r}this.filtersForm.setValue(e)}selectAll(){this.setAllFilters(!0)}deselectAll(){this.setAllFilters(!1)}static{this.\u0275fac=function(e){return new(e||F)}}static{this.\u0275cmp=t.VBU({type:F,selectors:[["ds-filters"]],inputs:{filtersForm:"filtersForm"},standalone:!0,features:[t.aNF],decls:20,vars:6,consts:[[1,"row","row-cols-2"],[1,"col-12"],[1,"col-1"],["id","btnSelectAllFilters",1,"btn","btn-light","mt-1","col-4",3,"click"],[1,"col-2"],["id","btnDeselectAllFilters",1,"btn","btn-light","mt-1","col-4",3,"click"],[3,"formGroup"],[1,"col-6"],["type","checkbox",1,"form-check-input","col-1",3,"id","value","formControlName"],[1,"col-11","align-middle",3,"for","title"]],template:function(e,s){1&e&&(t.j41(0,"fieldset",0),t.qex(1),t.j41(2,"span",1),t.EFF(3,"\xa0"),t.k0s(),t.j41(4,"span",2),t.EFF(5,"\xa0"),t.k0s(),t.j41(6,"button",3),t.bIt("click",function(){return s.selectAll()}),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.j41(9,"span",4),t.EFF(10,"\xa0"),t.k0s(),t.j41(11,"button",5),t.bIt("click",function(){return s.deselectAll()}),t.EFF(12),t.nI1(13,"translate"),t.k0s(),t.j41(14,"span",2),t.EFF(15,"\xa0"),t.k0s(),t.j41(16,"span",1),t.EFF(17,"\xa0"),t.k0s(),t.bVm(),t.k0s(),t.Z7z(18,P,7,4,"fieldset",0,t.fX1)),2&e&&(t.R7$(7),t.JRh(t.bMT(8,2,"admin.reports.commons.filters.select_all")),t.R7$(5),t.JRh(t.bMT(13,4,"admin.reports.commons.filters.deselect_all")),t.R7$(6),t.Dyx(s.allFilters()))},dependencies:[f.X1,f.Zm,f.BC,f.cb,f.j4,f.JD,y.h,y.D9],styles:[".col-6[_ngcontent-%COMP%] > label.col-11.align-middle[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}fieldset.row-cols-2[_ngcontent-%COMP%] > legend[_ngcontent-%COMP%]{float:none!important}"]})}}class E{constructor(){this.values={}}clear(){this.label="",this.handle="",this.communityLabel="",this.communityHandle="",this.nbTotalItems=0,this.values={},this.allFiltersValue=0}deserialize(r){this.clear(),this.label=r.label,this.handle=r.handle,this.communityLabel=r.community_label,this.communityHandle=r.community_handle,this.nbTotalItems=r.nb_total_items;const e=r.values;for(const s in e)e.hasOwnProperty(s)&&(this.values[s]=e[s]);this.allFiltersValue=r.all_filters_value}}class G{constructor(){this.collections=[],this.summary=new E}clear(){this.collections.splice(0,this.collections.length),this.summary.clear()}deserialize(r){this.clear(),this.summary.deserialize(r.summary);const s=r.collections;for(let n=0;n<s.length;n++){const o=s[n],l=new E;l.deserialize(o),this.collections.push(l)}}}const h=["acc"];function v(i,r){1&i&&(t.EFF(0),t.nI1(1,"translate")),2&i&&t.SpI(" ",t.bMT(1,1,"admin.reports.commons.filters")," ")}function m(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",1)(1,"div",11),t.nrm(2,"span",12),t.j41(3,"button",13),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.submit())}),t.EFF(4),t.nI1(5,"translate"),t.k0s()(),t.nrm(6,"ds-filters",14),t.j41(7,"div",11),t.nrm(8,"span",12),t.j41(9,"button",13),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.submit())}),t.EFF(10),t.nI1(11,"translate"),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(4),t.JRh(t.bMT(5,3,"admin.reports.button.show-collections")),t.R7$(2),t.Y8G("filtersForm",e.filtersFormGroup()),t.R7$(4),t.JRh(t.bMT(11,5,"admin.reports.button.show-collections"))}}function p(i,r){1&i&&(t.EFF(0),t.nI1(1,"translate")),2&i&&t.SpI(" ",t.bMT(1,1,"admin.reports.collections.collections-report")," ")}function g(i,r){if(1&i&&(t.j41(0,"th"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i){const e=r.$implicit,s=t.XpG(2);t.R7$(),t.JRh(t.bMT(2,1,"admin.reports.commons.filters."+s.getGroup(e.key)+"."+e.key))}}function T(i,r){if(1&i&&(t.j41(0,"th",18),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.R7$(),t.JRh(e.value)}}function C(i,r){if(1&i&&(t.j41(0,"td",18),t.EFF(1),t.k0s()),2&i){const e=r.$implicit,s=t.XpG().$implicit;t.R7$(),t.JRh(s.values[e.key]||0)}}function A(i,r){if(1&i&&(t.j41(0,"tr")(1,"td")(2,"a",19),t.EFF(3),t.k0s()(),t.j41(4,"td")(5,"a",19),t.EFF(6),t.k0s()(),t.j41(7,"td",18),t.EFF(8),t.k0s(),t.j41(9,"td",18),t.EFF(10),t.k0s(),t.Z7z(11,C,2,1,"td",18,t.fX1),t.nI1(13,"keyvalue"),t.k0s()),2&i){const e=r.$implicit,s=t.XpG(2);t.R7$(2),t.Mz_("href","/handle/",e.communityHandle,"",t.B4B),t.R7$(),t.JRh(e.communityLabel),t.R7$(2),t.Mz_("href","/handle/",e.handle,"",t.B4B),t.R7$(),t.JRh(e.label),t.R7$(2),t.JRh(e.nbTotalItems),t.R7$(2),t.JRh(e.allFiltersValue),t.R7$(),t.Dyx(t.bMT(13,8,s.results.summary.values))}}function X(i,r){if(1&i&&(t.j41(0,"table",15)(1,"thead")(2,"tr",16)(3,"th",17),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"th",17),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.j41(9,"th"),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.j41(12,"th"),t.EFF(13),t.nI1(14,"translate"),t.k0s(),t.Z7z(15,g,3,3,"th",null,t.fX1),t.nI1(17,"keyvalue"),t.k0s(),t.j41(18,"tr",16)(19,"th",18),t.EFF(20),t.k0s(),t.j41(21,"th",18),t.EFF(22),t.k0s(),t.Z7z(23,T,2,1,"th",18,t.fX1),t.nI1(25,"keyvalue"),t.k0s()(),t.j41(26,"tbody"),t.Z7z(27,A,14,10,"tr",null,t.fX1),t.k0s()()),2&i){const e=t.XpG();t.R7$(4),t.JRh(t.bMT(5,6,"admin.reports.collections.community")),t.R7$(3),t.JRh(t.bMT(8,8,"admin.reports.collections.collection")),t.R7$(3),t.JRh(t.bMT(11,10,"admin.reports.collections.nb_items")),t.R7$(3),t.JRh(t.bMT(14,12,"admin.reports.collections.match_all_selected_filters")),t.R7$(2),t.Dyx(t.bMT(17,14,e.results.summary.values)),t.R7$(5),t.JRh(e.results.summary.nbTotalItems),t.R7$(2),t.JRh(e.results.summary.allFiltersValue),t.R7$(),t.Dyx(t.bMT(25,16,e.results.summary.values)),t.R7$(4),t.Dyx(e.results.collections)}}let L=(()=>{class i{constructor(e,s){this.formBuilder=e,this.restService=s,this.results=new G}ngOnInit(){this.queryForm=this.formBuilder.group({filters:F.formGroup(this.formBuilder)})}filtersFormGroup(){return this.queryForm.get("filters")}getGroup(e){return F.getGroup(e).id}submit(){this.getFilteredCollections().subscribe(e=>{this.results.deserialize(e.payload),this.accordionComponent.expand("collections")})}getFilteredCollections(){let e=this.toQueryString();return e.length>0&&(e=`?${e}`),this.restService.request(D.D.GET,`${R.c.rest.ssl?"https":"http"}://${R.c.rest.host}:${R.c.rest.port}${R.c.rest.nameSpace}/api/contentreport/filteredcollections${e}`)}toQueryString(){return F.toQueryString(this.queryForm.value.filters)}static{this.\u0275fac=function(s){return new(s||i)(t.rXU(f.ok),t.rXU(k.Y))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["ds-report-filtered-collections"]],viewQuery:function(s,n){if(1&s&&t.GBs(h,5),2&s){let o;t.mGM(o=t.lsd())&&(n.accordionComponent=o.first)}},standalone:!0,features:[t.aNF],decls:15,vars:4,consts:[["acc","ngbAccordion"],[1,"container"],[1,"metadata-registry","row"],[1,"col-12"],["id","header",1,"border-bottom","pb-2"],["id","metadatadiv"],["activeIds","filters",3,"closeOthers"],["id","filters"],["ngbPanelTitle",""],["ngbPanelContent",""],["id","collections"],[1,"row"],[1,"col-3"],[1,"btn","btn-primary","mt-1","col-6",3,"click"],[3,"filtersForm"],["id","table",1,"table","table-striped"],[1,"header"],["rowspan","2"],[1,"num"],["rel","noopener noreferrer","target","_blank",3,"href"]],template:function(s,n){1&s&&(t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"div",5)(7,"ngb-accordion",6,0)(9,"ngb-panel",7),t.DNE(10,v,2,3,"ng-template",8)(11,m,12,7,"ng-template",9),t.k0s(),t.j41(12,"ngb-panel",10),t.DNE(13,p,2,3,"ng-template",8)(14,X,29,18,"ng-template",9),t.k0s()()()()()()),2&s&&(t.R7$(4),t.JRh(t.bMT(5,2,"admin.reports.collections.head")),t.R7$(3),t.Y8G("closeOthers",!0))},dependencies:[F,$.lG,b._f,b.W1,b.CT,b.sb,b.t3,y.h,y.D9],styles:[".num[_ngcontent-%COMP%]{text-align:center}"]})}}return i})();var w=a(84412),N=a(96354),Q=a(69295),W=a(30684),J=a(11873),H=a(87151),Y=a(51325),K=a(60696),O=a(4093),z=a(89777),Z=a(15202),q=a(79104),tt=a(84572),et=a(6170),it=a(44280),st=a(9847),nt=a(71985);class _{constructor(){this.disabled=!1}static collection(r,e,s=!1){const n=new _;return n.id=r,n.name$=_.toObservable(e),n.disabled=s,n}static collectionLoc(r,e,s=!1){const n=new _;return n.id=r,n.name$=e,n.disabled=s,n}static item(r,e){const s=new _;return s.id=r,s.name$=_.toObservable(e),s}static itemLoc(r,e){const s=new _;return s.id=r,s.name$=e,s}static toObservable(r){return new nt.c(e=>{e.next(r),e.complete()})}static toString(r){return r?r instanceof _&&r.id?r.id:r:""}}let c=(()=>{class i{constructor(){this.field="*"}static{this.EXISTS="exists"}static{this.DOES_NOT_EXIST="doesnt_exist"}static{this.EQUALS="equals"}static{this.DOES_NOT_EQUAL="not_equals"}static{this.LIKE="like"}static{this.NOT_LIKE="not_like"}static{this.CONTAINS="contains"}static{this.DOES_NOT_CONTAIN="doesnt_contain"}static{this.MATCHES="matches"}static{this.DOES_NOT_MATCH="doesnt_match"}static of(e,s,n=""){const o=new i;return o.field=e,o.operator=s,o.value=n,o}static toString(e){return e.value?`${e.field}:${e.operator}:${e.value}`:`${e.field}:${e.operator}`}toFormGroup(e){return e.group({field:new f.MJ(this.field),operator:new f.MJ(this.operator),value:new f.MJ(this.value)})}}return i})();var rt=a(7901);function at(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",1),t.nI1(1,"translate"),t.nI1(2,"translate"),t.nI1(3,"translate"),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.export())}),t.nrm(4,"i",2),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("ngbTooltip",t.bMT(1,3,e.tooltipMsg))("title",t.bMT(2,5,e.tooltipMsg)),t.BMQ("aria-label",t.bMT(3,7,e.tooltipMsg))}}let V=(()=>{class i{constructor(e,s,n,o,l){this.scriptDataService=e,this.authorizationDataService=s,this.notificationsService=n,this.translateService=o,this.router=l,this.tooltipMsg="metadata-export-filtered-items.tooltip"}static csvExportEnabled(e,s){const n=e.findById("metadata-export-filtered-items-report").pipe((0,O.qD)(),(0,N.T)(l=>l.isSuccess&&(0,z.a4)(l.payload))),o=s.isAuthorized(et._.AdministratorOf);return(0,tt.z)([n,o]).pipe((0,N.T)(([l,u])=>l&&u))}ngOnInit(){this.shouldShowButton$=i.csvExportEnabled(this.scriptDataService,this.authorizationDataService)}export(){const e=[],s=this.reportParams.value.collections||[];for(let l=0;l<s.length;l++)s[l]&&e.push({name:"-c",value:_.toString(s[l])});const n=this.reportParams.value.queryPredicates||[];for(let l=0;l<n.length;l++)n[l].field&&n[l].operator&&e.push({name:"-qp",value:c.toString(n[l])});const o=F.toQueryString(this.reportParams.value.filters)||[];o.length>0&&e.push({name:"-f",value:o}),this.scriptDataService.invoke("metadata-export-filtered-items-report",e,[]).pipe((0,O.qD)()).subscribe(l=>{l.hasSucceeded?(this.notificationsService.success(this.translateService.get("metadata-export-filtered-items.submit.success")),this.router.navigateByUrl((0,it.yJ)(l.payload.processId))):this.notificationsService.error(this.translateService.get("metadata-export-filtered-items.submit.error"))})}static{this.\u0275fac=function(s){return new(s||i)(t.rXU(K.ScriptDataService),t.rXU(J.AuthorizationDataService),t.rXU(st.I),t.rXU(y.c$),t.rXU(rt.Ix))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["ds-filtered-items-export-csv"]],inputs:{reportParams:"reportParams"},standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[[1,"export-button","btn","btn-dark","btn-sm",3,"ngbTooltip","title"],[1,"export-button","btn","btn-dark","btn-sm",3,"click","ngbTooltip","title"],[1,"fas","fa-file-export","fa-fw"]],template:function(s,n){1&s&&(t.DNE(0,at,5,9,"button",0),t.nI1(1,"async")),2&s&&t.vxM(t.bMT(1,1,n.shouldShowButton$)?0:-1)},dependencies:[$.Jj,b.n8,b.md,y.h,y.D9],styles:[".export-button[_ngcontent-%COMP%]{background:var(--ds-admin-sidebar-bg);border-color:var(--ds-admin-sidebar-bg)}"]})}}return i})();class ot{constructor(){this.items=[]}clear(){this.items.splice(0,this.items.length)}deserialize(r,e=0){this.clear(),this.itemCount=r.itemCount;const s=r.items;for(let n=0;n<s.length;n++){const o=s[n];o.index=this.items.length+e+1,this.items.push(o)}}}class I{static of(r,e,s){const n=new I;return n.id=r,n.label=e,n.predicates=s,n}}const lt=["acc"],ct=(i,r)=>r.id;function mt(i,r){1&i&&(t.EFF(0),t.nI1(1,"translate")),2&i&&t.SpI(" ",t.bMT(1,1,"admin.reports.items.section.collectionSelector")," ")}function dt(i,r){1&i&&t.nrm(0,"ds-loading")}function pt(i,r){if(1&i&&(t.j41(0,"option",19),t.EFF(1),t.nI1(2,"async"),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e.id)("disabled",e.disabled),t.R7$(),t.JRh(t.bMT(2,3,e.name$))}}function ut(i,r){if(1&i&&(t.j41(0,"select",15),t.Z7z(1,pt,3,5,"option",19,t.fX1),t.k0s()),2&i){const e=t.XpG(2);t.R7$(),t.Dyx(e.collections)}}function _t(i,r){if(1&i){const e=t.RV6();t.DNE(0,dt,1,0,"ds-loading"),t.nI1(1,"async"),t.DNE(2,ut,3,0,"select",15),t.nI1(3,"async"),t.j41(4,"div",16),t.nrm(5,"span",17),t.j41(6,"button",18),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.submit())}),t.EFF(7),t.nI1(8,"translate"),t.k0s()()}if(2&i){const e=t.XpG();t.vxM(t.bMT(1,3,e.loadingCollections$)?0:-1),t.R7$(2),t.vxM(!0!==t.bMT(3,5,e.loadingCollections$)?2:-1),t.R7$(5),t.JRh(t.bMT(8,7,"admin.reports.items.run"))}}function ht(i,r){1&i&&(t.EFF(0),t.nI1(1,"translate")),2&i&&t.SpI(" ",t.bMT(1,1,"admin.reports.items.section.metadataFieldQueries")," ")}function ft(i,r){if(1&i&&(t.j41(0,"option",22),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e.id)("selected",e.isDefault),t.R7$(),t.JRh(t.bMT(2,3,e.label))}}function Ft(i,r){if(1&i&&(t.j41(0,"option",28),t.EFF(1),t.nI1(2,"async"),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(t.bMT(2,2,e.name$))}}function gt(i,r){if(1&i&&(t.j41(0,"option",28),t.EFF(1),t.nI1(2,"async"),t.nI1(3,"translate"),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(t.bMT(3,4,t.bMT(2,2,e.name$)))}}function vt(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",24)(1,"div",25)(2,"div",16)(3,"div",26)(4,"select",27),t.Z7z(5,Ft,3,4,"option",28,t.fX1),t.k0s()(),t.j41(7,"div",29)(8,"select",30),t.Z7z(9,gt,4,6,"option",28,t.fX1),t.k0s()(),t.j41(11,"div",31),t.nrm(12,"input",32),t.k0s(),t.j41(13,"div",29)(14,"button",33),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.addQueryPredicate())}),t.EFF(15,"+"),t.k0s(),t.EFF(16," \xa0 "),t.j41(17,"button",34),t.bIt("click",function(){const n=t.eBV(e).$index,o=t.XpG(2);return t.Njj(o.deleteQueryPredicate(n))}),t.EFF(18,"\u2013"),t.k0s()()()()()}if(2&i){const e=r.$implicit,s=t.XpG(2);t.R7$(),t.Y8G("formGroup",e),t.R7$(4),t.Dyx(s.metadataFieldsWithAny),t.R7$(4),t.Dyx(s.predicates),t.R7$(8),t.Y8G("dsBtnDisabled",s.deleteQueryPredicateDisabled())}}function bt(i,r){if(1&i){const e=t.RV6();t.j41(0,"fieldset",20)(1,"label"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"select",21),t.bIt("change",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.setPresetQuery())}),t.Z7z(5,ft,3,5,"option",22,ct),t.k0s()(),t.j41(7,"div",16),t.EFF(8,"\xa0"),t.k0s(),t.j41(9,"div",23),t.Z7z(10,vt,19,2,"div",24,t.fX1),t.k0s(),t.j41(12,"div",16),t.nrm(13,"span",17),t.j41(14,"button",18),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.submit())}),t.EFF(15),t.nI1(16,"translate"),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(2),t.SpI(" ",t.bMT(3,2,"admin.reports.items.predefinedQueries")," "),t.R7$(3),t.Dyx(e.presetQueries),t.R7$(5),t.Dyx(e.queryPredicatesArray().controls),t.R7$(5),t.JRh(t.bMT(16,4,"admin.reports.items.run"))}}function Et(i,r){1&i&&(t.EFF(0),t.nI1(1,"translate")),2&i&&t.SpI(" ",t.bMT(1,1,"admin.reports.items.section.limitPaginateQueries")," ")}function Tt(i,r){if(1&i&&(t.j41(0,"option",22),t.EFF(1),t.nI1(2,"async"),t.k0s()),2&i){const e=r.$implicit;t.FS9("value",e.id),t.Y8G("selected",e.isDefault),t.R7$(),t.JRh(t.bMT(2,3,e.name$))}}function It(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",35)(1,"label",36),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",37)(5,"select",38),t.Z7z(6,Tt,3,5,"option",22,t.fX1),t.k0s()()(),t.j41(8,"div",35)(9,"label",39),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.j41(12,"div",37),t.nrm(13,"input",40),t.k0s()(),t.j41(14,"div",16),t.nrm(15,"span",17),t.j41(16,"button",41),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.submit())}),t.EFF(17),t.nI1(18,"translate"),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(2),t.SpI("",t.bMT(3,3,"admin.reports.items.limit"),":"),t.R7$(4),t.Dyx(e.pageLimits),t.R7$(4),t.SpI("",t.bMT(11,5,"admin.reports.items.offset"),":"),t.R7$(7),t.JRh(t.bMT(18,7,"admin.reports.items.run"))}}function yt(i,r){1&i&&(t.EFF(0),t.nI1(1,"translate")),2&i&&t.SpI(" ",t.bMT(1,1,"admin.reports.commons.filters")," ")}function Rt(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",16),t.nrm(1,"span",17),t.j41(2,"button",18),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.submit())}),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.nrm(5,"ds-filters",42),t.j41(6,"div",16),t.nrm(7,"span",17),t.j41(8,"button",18),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.submit())}),t.EFF(9),t.nI1(10,"translate"),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(3),t.JRh(t.bMT(4,3,"admin.reports.items.run")),t.R7$(2),t.Y8G("filtersForm",e.filtersFormGroup()),t.R7$(4),t.JRh(t.bMT(10,5,"admin.reports.items.run"))}}function Ct(i,r){1&i&&(t.EFF(0),t.nI1(1,"translate")),2&i&&t.SpI(" ",t.bMT(1,1,"admin.reports.commons.additional-data")," ")}function Mt(i,r){if(1&i&&(t.j41(0,"option",28),t.EFF(1),t.nI1(2,"async"),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e.id),t.R7$(),t.JRh(t.bMT(2,2,e.name$))}}function $t(i,r){1&i&&(t.nrm(0,"span",17),t.j41(1,"div",45),t.EFF(2),t.nI1(3,"translate"),t.k0s()),2&i&&(t.R7$(2),t.JRh(t.bMT(3,1,"metadata-export-filtered-items.columns.warning")))}function Dt(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",43)(1,"select",44),t.Z7z(2,Mt,3,4,"option",28,t.fX1),t.k0s()(),t.j41(4,"div",16),t.DNE(5,$t,4,3),t.nI1(6,"async"),t.nrm(7,"span",17),t.j41(8,"button",18),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.submit())}),t.EFF(9),t.nI1(10,"translate"),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(2),t.Dyx(e.metadataFields),t.R7$(3),t.vxM(t.bMT(6,2,e.csvExportEnabled$)?5:-1),t.R7$(4),t.JRh(t.bMT(10,4,"admin.reports.items.run"))}}function Pt(i,r){1&i&&(t.EFF(0),t.nI1(1,"translate")),2&i&&t.SpI(" ",t.bMT(1,1,"admin.reports.collections.item-results")," ")}function xt(i,r){if(1&i&&(t.j41(0,"th"),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.R7$(),t.JRh(e)}}function jt(i,r){if(1&i&&(t.j41(0,"a",54),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.Mz_("href","/handle/",e.owningCollection.handle,"",t.B4B),t.R7$(),t.JRh(e.owningCollection.name)}}function St(i,r){if(1&i&&(t.j41(0,"a",54),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.Mz_("href","/handle/",e.handle,"",t.B4B),t.R7$(),t.JRh(e.handle)}}function kt(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.R7$(),t.SpI(" ",e.value||""," ")}}function Ot(i,r){if(1&i&&(t.j41(0,"td",53),t.Z7z(1,kt,2,1,"span",null,t.fX1),t.k0s()),2&i){const e=r.$implicit,s=t.XpG().$implicit;t.R7$(),t.Dyx(s.metadata[e])}}function Bt(i,r){if(1&i&&(t.j41(0,"tr")(1,"td",53),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.DNE(6,jt,2,3,"a",54),t.k0s(),t.j41(7,"td"),t.DNE(8,St,2,3,"a",54),t.k0s(),t.j41(9,"td"),t.EFF(10),t.k0s(),t.Z7z(11,Ot,3,0,"td",53,t.fX1),t.k0s()),2&i){const e=r.$implicit,s=t.XpG(2);t.R7$(2),t.JRh(e.index),t.R7$(2),t.JRh(e.uuid),t.R7$(2),t.vxM(e.owningCollection?6:-1),t.R7$(2),t.vxM(e.handle?8:-1),t.R7$(2),t.JRh(e.name),t.R7$(),t.Dyx(s.queryForm.value.additionalFields)}}function At(i,r){if(1&i){const e=t.RV6();t.j41(0,"table",46)(1,"thead")(2,"tr",47)(3,"th"),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"th"),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.j41(9,"th"),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.j41(12,"th"),t.EFF(13),t.nI1(14,"translate"),t.k0s(),t.j41(15,"th"),t.EFF(16),t.nI1(17,"translate"),t.k0s(),t.Z7z(18,xt,2,1,"th",null,t.fX1),t.k0s()(),t.j41(20,"tbody"),t.Z7z(21,Bt,13,5,"tr",null,t.fX1),t.nI1(23,"async"),t.k0s()(),t.j41(24,"div"),t.EFF(25),t.nI1(26,"translate"),t.nI1(27,"translate"),t.k0s(),t.j41(28,"div")(29,"button",48),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.prevPage())}),t.EFF(30),t.nI1(31,"translate"),t.k0s(),t.j41(32,"button",49),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.nextPage())}),t.EFF(33),t.nI1(34,"translate"),t.k0s(),t.j41(35,"div",50),t.nrm(36,"ds-filtered-items-export-csv",51),t.k0s()(),t.nrm(37,"table",52)}if(2&i){const e=t.XpG();t.R7$(4),t.JRh(t.bMT(5,14,"admin.reports.items.number")),t.R7$(3),t.JRh(t.bMT(8,16,"admin.reports.items.id")),t.R7$(3),t.JRh(t.bMT(11,18,"admin.reports.items.collection")),t.R7$(3),t.JRh(t.bMT(14,20,"admin.reports.items.handle")),t.R7$(3),t.JRh(t.bMT(17,22,"admin.reports.items.title")),t.R7$(2),t.Dyx(e.queryForm.value.additionalFields),t.R7$(3),t.Dyx(t.bMT(23,24,e.results$)),t.R7$(4),t.LHq(" ",t.bMT(26,26,"admin.reports.commons.page")," ",e.currentPage+1," ",t.bMT(27,28,"admin.reports.commons.of")," ",e.pageCount()," "),t.R7$(4),t.Y8G("dsBtnDisabled",!e.canNavigatePrevious()),t.R7$(),t.JRh(t.bMT(31,30,"admin.reports.commons.previous-page")),t.R7$(2),t.Y8G("dsBtnDisabled",!e.canNavigateNext()),t.R7$(),t.JRh(t.bMT(34,32,"admin.reports.commons.next-page")),t.R7$(3),t.Y8G("reportParams",e.queryForm)}}const Gt=[{path:"collections",resolve:{breadcrumb:S.S},data:{title:"admin.reports.collections.title",breadcrumbKey:"admin.reports.collections"},children:[{path:"",component:L}]},{path:"queries",resolve:{breadcrumb:S.S},data:{title:"admin.reports.items.title",breadcrumbKey:"admin.reports.items"},children:[{path:"",component:(()=>{class i{constructor(e,s,n,o,l,u,M,Xt,Lt){this.communityService=e,this.collectionService=s,this.metadataSchemaService=n,this.metadataFieldService=o,this.translateService=l,this.scriptDataService=u,this.authorizationDataService=M,this.formBuilder=Xt,this.restService=Lt,this.loadingCollections$=new w.t(!1),this.currentPage=0,this.results=new ot}ngOnInit(){this.loadCollections(),this.loadPresetQueries(),this.loadMetadataFields(),this.loadPredicates(),this.loadPageLimits();const e=[(new c).toFormGroup(this.formBuilder)];this.csvExportEnabled$=V.csvExportEnabled(this.scriptDataService,this.authorizationDataService),this.queryForm=this.formBuilder.group({collections:this.formBuilder.control([""],[]),presetQuery:this.formBuilder.control("new",[]),queryPredicates:this.formBuilder.array(e),pageLimit:this.formBuilder.control("10",[]),filters:F.formGroup(this.formBuilder),additionalFields:this.formBuilder.control([],[])})}loadCollections(){this.loadingCollections$.next(!0),this.collections=[];const e=this.translateService.stream("admin.reports.items.wholeRepo");this.collections.push(_.collectionLoc("",e)),this.communityService.findAll({elementsPerPage:1e4,currentPage:1}).pipe((0,O.Ar)()).subscribe(s=>{s.forEach(n=>{const o=_.collection(n.uuid,n.name,!0);this.collections.push(o),this.collectionService.findByParent(n.uuid,{elementsPerPage:1e4,currentPage:1}).pipe((0,O.Ar)()).subscribe(l=>{l.filter(u=>"Publication"===u.firstMetadataValue("dspace.entity.type")).forEach(u=>{const M=_.collection(u.uuid,"\u2013"+u.name);this.collections.push(M)}),this.loadingCollections$.next(!1)})})})}loadPresetQueries(){this.presetQueries=[I.of("new","admin.reports.items.preset.new",[]),I.of("q1","admin.reports.items.preset.hasNoTitle",[c.of("dc.title",c.DOES_NOT_EXIST)]),I.of("q2","admin.reports.items.preset.hasNoIdentifierUri",[c.of("dc.identifier.uri",c.DOES_NOT_EXIST)]),I.of("q3","admin.reports.items.preset.hasCompoundSubject",[c.of("dc.subject.*",c.LIKE,"%;%")]),I.of("q4","admin.reports.items.preset.hasCompoundAuthor",[c.of("dc.contributor.author",c.LIKE,"% and %")]),I.of("q5","admin.reports.items.preset.hasCompoundCreator",[c.of("dc.creator",c.LIKE,"% and %")]),I.of("q6","admin.reports.items.preset.hasUrlInDescription",[c.of("dc.description",c.MATCHES,"^.*(http://|https://|mailto:).*$")]),I.of("q7","admin.reports.items.preset.hasFullTextInProvenance",[c.of("dc.description.provenance",c.MATCHES,"^.*No. of bitstreams(.|\r|\n|\r\n)*.(PDF|pdf|DOC|doc|PPT|ppt|DOCX|docx|PPTX|pptx).*$")]),I.of("q8","admin.reports.items.preset.hasNonFullTextInProvenance",[c.of("dc.description.provenance",c.DOES_NOT_MATCH,"^.*No. of bitstreams(.|\r|\n|\r\n)*.(PDF|pdf|DOC|doc|PPT|ppt|DOCX|docx|PPTX|pptx).*$")]),I.of("q9","admin.reports.items.preset.hasEmptyMetadata",[c.of("*",c.MATCHES,"^\\s*$")]),I.of("q10","admin.reports.items.preset.hasUnbreakingDataInDescription",[c.of("dc.description.*",c.MATCHES,"^.*(\\S){50,}.*$")]),I.of("q12","admin.reports.items.preset.hasXmlEntityInMetadata",[c.of("*",c.MATCHES,"^.*&#.*$")]),I.of("q13","admin.reports.items.preset.hasNonAsciiCharInMetadata",[c.of("*",c.MATCHES,"^.*[^[:ascii:]].*$")])]}loadMetadataFields(){this.metadataFields=[],this.metadataFieldsWithAny=[];const e=this.translateService.stream("admin.reports.items.anyField");this.metadataFieldsWithAny.push(_.itemLoc("*",e)),this.metadataSchemaService.findAll({elementsPerPage:1e4,currentPage:1}).pipe((0,O.Ar)()).subscribe(s=>{s.forEach(n=>{this.metadataFieldService.findBySchema(n,{elementsPerPage:1e4,currentPage:1}).pipe((0,O.Ar)()).subscribe(o=>{o.forEach(l=>{let u=n.prefix+"."+l.toString(),M=_.item(u,u);this.metadataFields.push(M),this.metadataFieldsWithAny.push(M),(0,z.Im)(l.qualifier)&&(u=n.prefix+"."+l.element+".*",M=_.item(u,u),this.metadataFieldsWithAny.push(M))})})})})}loadPredicates(){this.predicates=[_.item(c.EXISTS,"admin.reports.items.predicate.exists"),_.item(c.DOES_NOT_EXIST,"admin.reports.items.predicate.doesNotExist"),_.item(c.EQUALS,"admin.reports.items.predicate.equals"),_.item(c.DOES_NOT_EQUAL,"admin.reports.items.predicate.doesNotEqual"),_.item(c.LIKE,"admin.reports.items.predicate.like"),_.item(c.NOT_LIKE,"admin.reports.items.predicate.notLike"),_.item(c.CONTAINS,"admin.reports.items.predicate.contains"),_.item(c.DOES_NOT_CONTAIN,"admin.reports.items.predicate.doesNotContain"),_.item(c.MATCHES,"admin.reports.items.predicate.matches"),_.item(c.DOES_NOT_MATCH,"admin.reports.items.predicate.doesNotMatch")]}loadPageLimits(){this.pageLimits=[_.item("10","10"),_.item("25","25"),_.item("50","50"),_.item("100","100")]}queryPredicatesArray(){return this.queryForm.get("queryPredicates")}addQueryPredicate(e=(new c).toFormGroup(this.formBuilder)){this.queryPredicatesArray().push(e)}deleteQueryPredicateDisabled(){return this.queryPredicatesArray().length<2}deleteQueryPredicate(e,s=1){e>-1&&this.queryPredicatesArray().removeAt(e)}setPresetQuery(){const s=this.queryForm.controls.presetQuery.value,n=this.presetQueries.find(o=>o.id===s);void 0!==n&&(this.queryPredicatesArray().clear(),n.predicates.map(o=>o.toFormGroup(this.formBuilder)).forEach(o=>this.addQueryPredicate(o)),0===n.predicates.length&&this.addQueryPredicate((new c).toFormGroup(this.formBuilder)))}filtersFormGroup(){return this.queryForm.get("filters")}pageSize(){return this.queryForm.value.pageLimit}canNavigatePrevious(){return this.currentPage>0}prevPage(){this.canNavigatePrevious()&&(this.currentPage--,this.resubmit())}pageCount(){return Math.ceil((this.results.itemCount||0)/this.pageSize())}canNavigateNext(){return this.currentPage+1<this.pageCount()}nextPage(){this.canNavigateNext()&&(this.currentPage++,this.resubmit())}submit(){this.accordionComponent.expand("itemResults"),this.currentPage=0,this.resubmit()}resubmit(){this.results$=this.getFilteredItems().pipe((0,N.T)(e=>{const s=this.currentPage*this.pageSize();return this.results.deserialize(e.payload,s),this.results.items}))}getFilteredItems(){let e=this.toQueryString();return e.length>0&&(e=`?${e}`),this.restService.request(D.D.GET,`${R.c.rest.ssl?"https":"http"}://${R.c.rest.host}:${R.c.rest.port}${R.c.rest.nameSpace}/api/contentreport/filtereditems${e}`)}toQueryString(){let e=`pageNumber=${this.currentPage}&pageLimit=${this.pageSize()}`;const s=this.queryForm.value.collections;for(let u=0;u<s.length;u++)e+=`&collections=${s[u]}`;const n=this.queryForm.value.queryPredicates;for(let u=0;u<n.length;u++)e+=`&queryPredicates=${encodeURIComponent(c.toString(n[u]))}`;const o=F.toQueryString(this.queryForm.value.filters);o.length>0&&(e+=`&${o}`);const l=this.queryForm.value.additionalFields;for(let u=0;u<l.length;u++)e+=`&additionalFields=${l[u]}`;return e}static{this.\u0275fac=function(s){return new(s||i)(t.rXU(W.CommunityDataService),t.rXU(Q.CollectionDataService),t.rXU(Y.MetadataSchemaDataService),t.rXU(H.MetadataFieldDataService),t.rXU(y.c$),t.rXU(K.ScriptDataService),t.rXU(J.AuthorizationDataService),t.rXU(f.ok),t.rXU(k.Y))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["ds-report-filtered-items"]],viewQuery:function(s,n){if(1&s&&t.GBs(lt,5),2&s){let o;t.mGM(o=t.lsd())&&(n.accordionComponent=o.first)}},standalone:!0,features:[t.aNF],decls:27,vars:5,consts:[["acc","ngbAccordion"],[1,"container"],[1,"metadata-registry","row"],[1,"col-12"],["id","header",1,"border-bottom","pb-2"],["id","querydiv",3,"formGroup"],["activeIds","collectionSelector",3,"closeOthers"],["id","collectionSelector"],["ngbPanelTitle",""],["ngbPanelContent",""],["id","metadataFieldQueries"],["id","limitPaginateQueries"],["id","filters"],["id","additionalData"],["id","itemResults"],["id","collSel","name","collSel","multiple","multiple","size","10","formControlName","collections",1,"form-select"],[1,"row"],[1,"col-3"],[1,"btn","btn-primary","mt-1","col-6",3,"click"],[3,"value","disabled"],["id","predefqueries",1,"mb-3"],["id","predefselect","formControlName","presetQuery",1,"form-select",3,"change"],[3,"value","selected"],["id","queries"],[1,"metadata"],[1,"mb-3",3,"formGroup"],[1,"col-4"],["formControlName","field",1,"form-select"],[3,"value"],[1,"col-auto"],["formControlName","operator",1,"form-select"],[1,"col"],["formControlName","value",1,"form-control"],[1,"btn","btn-light",3,"click"],[1,"btn","btn-light",3,"click","dsBtnDisabled"],[1,"row","align-items-center","mb-3"],["for","limit",1,"col-sm-2","col-form-label"],[1,"col-6"],["id","limit","name","limit","formControlName","pageLimit",1,"form-select","col-6"],["for","offset",1,"col-sm-2","col-form-label"],["id","offset","name","offset","value","0",1,"form-control","col-6"],[1,"btn","btn-primary","col-6",3,"click"],[3,"filtersForm"],["id","show-fields"],["name","show_fields","multiple","multiple","size","8","formControlName","additionalFields",1,"form-select"],[1,"warning"],["id","table",1,"table","table-striped"],[1,"header"],["id","prev",1,"btn","btn-light",3,"click","dsBtnDisabled"],["id","next",1,"btn","btn-light",3,"click","dsBtnDisabled"],[2,"float","right","margin-right","60px"],[3,"reportParams"],["id","itemtable",1,"sortable"],[1,"num"],["rel","noopener noreferrer","target","_blank",3,"href"]],template:function(s,n){1&s&&(t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"div",5)(7,"ngb-accordion",6,0)(9,"ngb-panel",7),t.DNE(10,mt,2,3,"ng-template",8)(11,_t,9,9,"ng-template",9),t.k0s(),t.j41(12,"ngb-panel",10),t.DNE(13,ht,2,3,"ng-template",8)(14,bt,17,6,"ng-template",9),t.k0s(),t.j41(15,"ngb-panel",11),t.DNE(16,Et,2,3,"ng-template",8)(17,It,19,9,"ng-template",9),t.k0s(),t.j41(18,"ngb-panel",12),t.DNE(19,yt,2,3,"ng-template",8)(20,Rt,11,7,"ng-template",9),t.k0s(),t.j41(21,"ngb-panel",13),t.DNE(22,Ct,2,3,"ng-template",8)(23,Dt,11,6,"ng-template",9),t.k0s(),t.j41(24,"ngb-panel",14),t.DNE(25,Pt,2,3,"ng-template",8)(26,At,38,34,"ng-template",9),t.k0s()()()()()()),2&s&&(t.R7$(4),t.JRh(t.bMT(5,3,"admin.reports.items.head")),t.R7$(2),t.Y8G("formGroup",n.queryForm),t.R7$(),t.Y8G("closeOthers",!0))},dependencies:[$.Jj,q.A,V,F,b._f,b.W1,b.CT,b.sb,b.t3,f.X1,f.xH,f.y7,f.me,f.wz,f.W0,f.BC,f.cb,f.j4,f.JD,Z.v,y.h,y.D9],styles:[".num[_ngcontent-%COMP%]{text-align:center}.warning[_ngcontent-%COMP%]{color:red;font-style:italic;text-align:center;width:100%}"]})}}return i})()}]}]},87151:(U,j,a)=>{a.r(j),a.d(j,{MetadataFieldDataService:()=>G});var S=a(96697),$=a(89777),b=a(9847),y=a(57775),D=a(10186),k=a(81948),R=a(7094),f=a(18328),d=a(72073),x=a(20881),t=a(53271),B=a(60796),P=a(36343),F=a(3601),E=a(54438);let G=(()=>{class h extends x.W{constructor(m,p,g,T,C){super("metadatafields",m,p,g,T),this.requestService=m,this.rdbService=p,this.objectCache=g,this.halService=T,this.notificationsService=C,this.searchBySchemaLinkPath="bySchema",this.searchByFieldNameLinkPath="byFieldName",this.createData=new f.V(this.linkPath,m,p,g,T,C,this.responseMsToLive),this.searchData=new B.X(this.linkPath,m,p,g,T,this.responseMsToLive),this.putData=new t.W(this.linkPath,m,p,g,T,this.responseMsToLive),this.deleteData=new d.I(this.linkPath,m,p,g,T,C,this.responseMsToLive,this.constructIdEndpoint)}findBySchema(m,p={},g=!0,T=!0,...C){const A=Object.assign(new P._,p,{searchParams:[new D.x("schema",m.prefix)]});return this.searchBy(this.searchBySchemaLinkPath,A,g,T,...C)}searchByFieldNameParams(m,p,g,T,C,A={},X=!0,L=!0,...w){const N=Object.assign(new P._,A,{searchParams:[new D.x("schema",(0,$.a4)(m)?m:""),new D.x("element",(0,$.a4)(p)?p:""),new D.x("qualifier",(0,$.a4)(g)?g:""),new D.x("query",(0,$.a4)(T)?T:""),new D.x("exactName",(0,$.a4)(C)?C:"")]});return this.searchBy(this.searchByFieldNameLinkPath,N,X,L,...w)}findByExactFieldName(m){return this.searchByFieldNameParams(null,null,null,null,m,null)}clearRequests(){this.getBrowseEndpoint().pipe((0,S.s)(1)).subscribe(m=>{this.requestService.setStaleByHrefSubstring(m)})}delete(m,p){return this.deleteData.delete(m,p)}deleteByHref(m,p){return this.deleteData.deleteByHref(m,p)}put(m){return this.putData.put(m)}create(m,...p){return this.createData.create(m,...p)}searchBy(m,p,g,T,...C){return this.searchData.searchBy(m,p,g,T,...C)}static{this.\u0275fac=function(p){return new(p||h)(E.KVO(F.B),E.KVO(y.o),E.KVO(k.$),E.KVO(R.Y),E.KVO(b.I))}}static{this.\u0275prov=E.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},51325:(U,j,a)=>{a.r(j),a.d(j,{MetadataSchemaDataService:()=>F});var S=a(88141),$=a(89777),b=a(9847),y=a(57775),D=a(81948),k=a(7094),R=a(18328),f=a(72073),d=a(88667),x=a(20881),t=a(53271),B=a(3601),P=a(54438);let F=(()=>{class E extends x.W{constructor(h,v,m,p,g){super("metadataschemas",h,v,m,p),this.requestService=h,this.rdbService=v,this.objectCache=m,this.halService=p,this.notificationsService=g,this.createData=new R.V(this.linkPath,h,v,m,p,g,this.responseMsToLive),this.putData=new t.W(this.linkPath,h,v,m,p,this.responseMsToLive),this.deleteData=new f.I(this.linkPath,h,v,m,p,g,this.responseMsToLive,this.constructIdEndpoint),this.findAllData=new d.H(this.linkPath,h,v,m,p,this.responseMsToLive)}createOrUpdateMetadataSchema(h){return(0,$.a4)(h.id)?this.putData.put(h):this.createData.create(h)}clearRequests(){return this.getBrowseEndpoint().pipe((0,S.M)(h=>this.requestService.removeByHrefSubstring(h)))}findAll(h,v,m,...p){return this.findAllData.findAll(h,v,m,...p)}delete(h,v){return this.deleteData.delete(h,v)}deleteByHref(h,v){return this.deleteData.deleteByHref(h,v)}static{this.\u0275fac=function(v){return new(v||E)(P.KVO(B.B),P.KVO(y.o),P.KVO(D.$),P.KVO(k.Y),P.KVO(b.I))}}static{this.\u0275prov=P.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})()}}]);