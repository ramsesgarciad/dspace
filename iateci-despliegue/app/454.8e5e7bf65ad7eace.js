"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[454],{80495:(D,S,o)=>{o.d(S,{Q:()=>C});class C{constructor(m,e){this.text=m,this.url=e}}},59072:(D,S,o)=>{o.d(S,{S:()=>b});var C=o(54438),T=o(89777),m=o(54034),e=o(7673),v=o(80495);let g=(()=>{class f{getBreadcrumbs(_,R){return(0,e.of)([new v.Q(_+".breadcrumbs",R)])}static{this.\u0275fac=function(R){return new(R||f)}}static{this.\u0275prov=C.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})();const b=(f,Y,_=(0,C.WQX)(g))=>{const R=f.data.breadcrumbKey;if((0,T.Tn)(R))throw new Error('You provided an i18nBreadcrumbResolver for url "'+f.url+"\" but no breadcrumbKey in the route's data");return{provider:_,key:R,url:(0,m.F)(f)}}},10454:(D,S,o)=>{o.r(S),o.d(S,{ROUTES:()=>bs});var C=o(85643),T=o(59072),m=o(60177),e=o(54438),v=o(7901),c=o(68018),g=o(84412),b=o(25558),f=o(5964),Y=o(47677),_=o(96354),R=o(99172),V=o(88141),x=o(96697),J=o(70980),A=o(94196),z=o(43446),oe=o(4266),I=o(96766),H=o(19548),le=o(73685),h=o(4093),ce=o(5127),pe=o(74082),d=o(89777),ue=o(96044),j=o(15202),E=o(9847),de=o(81829),me=o(95038),w=o(50186),k=o(4600);const K=[(0,k.s)("files")];var Z=o(44280),y=o(4589);const ve=["*"];let fe=(()=>{class s{static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-process-detail-field"]],inputs:{title:"title"},standalone:!0,features:[e.aNF],ngContentSelectors:ve,decls:4,vars:3,consts:[[1,"h3","mt-4"]],template:function(n,i){1&n&&(e.NAR(),e.j41(0,"h2",0),e.EFF(1),e.nI1(2,"translate"),e.k0s(),e.SdG(3)),2&n&&(e.R7$(),e.JRh(e.bMT(2,1,i.title)))},dependencies:[c.h,c.D9],encapsulation:2})}}return s})();var _e=o(21626),F=o(58003);const ge=(s,a)=>({id:s,name:a}),be=s=>({id:s});function Se(s,a){1&s&&(e.j41(0,"div",5),e.EFF(1),e.nI1(2,"translate"),e.nrm(3,"i",19),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"process.detail.refreshing")," "))}function Ce(s,a){if(1&s&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&s){const t=a.$implicit;e.R7$(),e.Lme("",null==t?null:t.name," ",null==t?null:t.value,"")}}function Te(s,a){if(1&s&&(e.j41(0,"ds-process-detail-field",7),e.Z7z(1,Ce,2,2,"div",null,e.fX1),e.k0s()),2&s){const t=e.XpG();e.Y8G("title","process.detail.arguments"),e.R7$(),e.Dyx(null==t?null:t.parameters)}}function Pe(s,a){if(1&s&&(e.j41(0,"ds-file-download-link",22)(1,"span"),e.EFF(2),e.k0s(),e.j41(3,"span"),e.EFF(4),e.nI1(5,"dsFileSize"),e.k0s()()),2&s){const t=a.$implicit,n=e.XpG(4);e.Y8G("bitstream",t)("showAccessStatusBadge",!1),e.R7$(2),e.JRh(n.getFileName(t)),e.R7$(2),e.SpI("(",e.bMT(5,4,null==t?null:t.sizeBytes),")")}}function Re(s,a){if(1&s&&(e.j41(0,"ds-process-detail-field",20)(1,"div",21),e.Z7z(2,Pe,6,6,"ds-file-download-link",22,e.fX1),e.k0s()()),2&s){const t=e.XpG().ngVar;e.Y8G("title","process.detail.output-files"),e.R7$(2),e.Dyx(t)}}function Fe(s,a){if(1&s&&(e.j41(0,"div"),e.DNE(1,Re,4,1,"ds-process-detail-field",20),e.k0s()),2&s){const t=a.ngVar;e.R7$(),e.vxM(t&&(null==t?null:t.length)>0?1:-1)}}function Ie(s,a){if(1&s&&(e.j41(0,"ds-process-detail-field",9),e.nI1(1,"translate"),e.j41(2,"div"),e.EFF(3),e.nI1(4,"date"),e.k0s()()),2&s){const t=e.XpG(),n=e.XpG();e.Y8G("title",e.bMT(1,2,"process.detail.start-time")),e.R7$(3),e.JRh(e.brH(4,4,t.startTime,n.dateFormat,"UTC"))}}function Ve(s,a){if(1&s&&(e.j41(0,"ds-process-detail-field",10),e.nI1(1,"translate"),e.j41(2,"div"),e.EFF(3),e.nI1(4,"date"),e.k0s()()),2&s){const t=e.XpG(),n=e.XpG();e.Y8G("title",e.bMT(1,2,"process.detail.end-time")),e.R7$(3),e.JRh(e.brH(4,4,t.endTime,n.dateFormat,"UTC"))}}function ye(s,a){if(1&s&&(e.j41(0,"ds-process-detail-field",11),e.nI1(1,"translate"),e.j41(2,"div"),e.EFF(3),e.k0s()()),2&s){const t=e.XpG();e.Y8G("title",e.bMT(1,2,"process.detail.status")),e.R7$(3),e.JRh(t.processStatus)}}function Me(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",27),e.bIt("click",function(){e.eBV(t);const i=e.XpG(3);return e.Njj(i.showProcessOutputLogs())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"process.detail.logs.button")," "))}function De(s,a){1&s&&(e.nrm(0,"ds-loading",24),e.nI1(1,"translate")),2&s&&e.FS9("message",e.bMT(1,1,"process.detail.logs.loading"))}function xe(s,a){if(1&s&&(e.j41(0,"pre",25),e.EFF(1),e.nI1(2,"async"),e.k0s()),2&s){const t=e.XpG(3);e.R7$(),e.JRh(e.bMT(2,1,t.outputLogs$))}}function $e(s,a){1&s&&(e.j41(0,"p",26),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"process.detail.logs.none")," "))}function je(s,a){if(1&s&&(e.j41(0,"ds-process-detail-field",12),e.DNE(1,Me,3,3,"button",23)(2,De,2,3,"ds-loading",24),e.nI1(3,"async"),e.DNE(4,xe,3,3,"pre",25),e.nI1(5,"async"),e.DNE(6,$e,3,3,"p",26),e.nI1(7,"async"),e.nI1(8,"async"),e.nI1(9,"dsHasNoValue"),e.nI1(10,"async"),e.k0s()),2&s){let t,n;const i=e.XpG(),r=e.XpG();e.Y8G("title","process.detail.output"),e.R7$(),e.vxM(r.showOutputLogs||void 0===(null==i||null==i._links||null==i._links.output?null:i._links.output.href)?-1:1),e.R7$(),e.vxM(e.bMT(3,5,r.retrievingOutputLogs$)?2:-1),e.R7$(2),e.vxM(r.showOutputLogs&&(null==(t=e.bMT(5,7,r.outputLogs$))?null:t.length)>0?4:-1),e.R7$(2),e.vxM(!0!==e.bMT(7,9,r.retrievingOutputLogs$)&&r.showOutputLogs&&e.bMT(9,13,e.bMT(8,11,r.outputLogs$))||0===(null==(n=e.bMT(10,15,r.outputLogs$))?null:n.length)||!i._links.output?6:-1)}}function Ee(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",28),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2),r=e.sdS(3);return e.Njj(i.openDeleteModal(r))}),e.nrm(1,"i",29),e.EFF(2),e.nI1(3,"translate"),e.k0s()}2&s&&(e.R7$(2),e.SpI("",e.bMT(3,1,"process.detail.delete.button")," "))}function we(s,a){if(1&s&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.DNE(6,Se,4,3,"div",5),e.nI1(7,"async"),e.k0s(),e.j41(8,"ds-process-detail-field",6)(9,"div"),e.EFF(10),e.k0s()(),e.DNE(11,Te,3,1,"ds-process-detail-field",7)(12,Fe,2,1,"div",8),e.nI1(13,"async"),e.DNE(14,Ie,5,8,"ds-process-detail-field",9)(15,Ve,5,8,"ds-process-detail-field",10)(16,ye,4,4,"ds-process-detail-field",11)(17,je,11,17,"ds-process-detail-field",12),e.j41(18,"ds-process-detail-field",13)(19,"button",14),e.nrm(20,"i",15),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.DNE(23,Ee,4,3,"button",16),e.k0s(),e.j41(24,"div",17)(25,"a",18),e.EFF(26),e.nI1(27,"translate"),e.k0s()()()),2&s){let t;const n=a,i=e.XpG();e.R7$(4),e.SpI(" ",e.i5U(5,16,"process.detail.title",e.l_i(27,ge,null==n?null:n.processId,null==n?null:n.scriptName))," "),e.R7$(2),e.vxM(e.bMT(7,19,i.isRefreshing$)?6:-1),e.R7$(2),e.Y8G("title","process.detail.script"),e.R7$(2),e.JRh(null==n?null:n.scriptName),e.R7$(),e.vxM(null!=n&&n.parameters&&(null==n||null==n.parameters?null:n.parameters.length)>0?11:-1),e.R7$(),e.Y8G("ngVar",null==(t=e.bMT(13,21,i.filesRD$))||null==t.payload?null:t.payload.page),e.R7$(2),e.vxM(n&&n.startTime?14:-1),e.R7$(),e.vxM(n&&n.endTime?15:-1),e.R7$(),e.vxM(n&&n.processStatus?16:-1),e.R7$(),e.vxM(i.isProcessFinished(n)?17:-1),e.R7$(),e.Y8G("title","process.detail.actions"),e.R7$(),e.Y8G("queryParams",e.eq3(30,be,null==n?null:n.processId)),e.R7$(2),e.JRh(e.bMT(22,23,"process.detail.create")),e.R7$(2),e.vxM(i.isProcessFinished(n)?23:-1),e.R7$(2),e.Y8G("routerLink","/processes"),e.R7$(),e.JRh(e.bMT(27,25,"process.detail.back"))}}function ke(s,a){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"div",30)(2,"div")(3,"h4"),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"button",31),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.closeModal())}),e.j41(7,"span",32),e.EFF(8,"\xd7"),e.k0s()()(),e.j41(9,"div",33)(10,"div"),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"div",34)(14,"button",35),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.closeModal())}),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.j41(17,"button",36),e.bIt("click",function(){const i=e.eBV(t),r=e.XpG(2);return e.Njj(r.deleteProcess(i))}),e.EFF(18),e.nI1(19,"translate"),e.k0s()()()()}2&s&&(e.R7$(4),e.JRh(e.bMT(5,4,"process.detail.delete.header")),e.R7$(7),e.JRh(e.bMT(12,6,"process.detail.delete.body")),e.R7$(4),e.JRh(e.bMT(16,8,"process.detail.delete.cancel")),e.R7$(3),e.SpI("",e.bMT(19,10,"process.detail.delete.confirm")," "))}function Oe(s,a){if(1&s&&(e.DNE(0,ke,20,12,"div"),e.nI1(1,"async")),2&s){let t;const n=e.XpG();e.vxM((t=null==(t=e.bMT(1,1,n.processRD$))?null:t.payload)?0:-1,t)}}let Be=(()=>{class s{constructor(t,n,i,r,p,u,G,X,U,L,Ss,Cs){this.platformId=t,this.route=n,this.router=i,this.processService=r,this.bitstreamDataService=p,this.nameService=u,this.zone=G,this.authService=X,this.http=U,this.modalService=L,this.notificationsService=Ss,this.translateService=Cs,this.AlertTypeEnum=pe.v,this.outputLogs$=new g.t(void 0),this.showOutputLogs=!1,this.retrievingOutputLogs$=new g.t(!1),this.dateFormat="yyyy-MM-dd HH:mm:ss ZZZZ"}ngOnInit(){this.processRD$=this.route.data.pipe((0,b.n)(t=>(0,m.UE)(this.platformId)?(this.autoRefreshingID=this.route.snapshot.params.id,this.processService.autoRefreshUntilCompletion(this.autoRefreshingID,5e3,...K)):[t.process]),(0,f.p)(()=>!this.isDeleting),(0,H.QD)(this.router,this.authService)),this.isRefreshing$=this.processRD$.pipe((0,Y.I)(t=>I.ProcessDataService.hasCompletedOrFailed(t.payload)),(0,_.T)(()=>!1),(0,R.Z)(!0)),this.filesRD$=this.processRD$.pipe((0,h.Hz)(),(0,b.n)(t=>t.files))}ngOnDestroy(){(0,d.a4)(this.autoRefreshingID)&&this.processService.stopAutoRefreshing(this.autoRefreshingID)}getFileName(t){return t instanceof le.M?this.nameService.getName(t):"unknown"}showProcessOutputLogs(){this.retrievingOutputLogs$.next(!0),this.zone.runOutsideAngular(()=>{const t=this.processRD$.pipe((0,h.ak)(),(0,b.n)(n=>this.bitstreamDataService.findByHref(n._links.output.href,!1)));this.outputLogFileUrl$=t.pipe((0,h.yd)(),(0,V.M)(n=>{204===n.statusCode&&(this.zone.run(()=>this.retrievingOutputLogs$.next(!1)),this.showOutputLogs=!0)}),(0,b.n)(n=>{const i=n.payload._links.content.href;return this.authService.getShortlivedToken().pipe((0,x.s)(1),(0,_.T)(r=>(0,d.a4)(r)?new ce.t(i,`?authentication-token=${r}`).toString():i))}))}),this.outputLogFileUrl$.pipe((0,x.s)(1),(0,b.n)(t=>this.getTextFile(t)),(0,J.j)(()=>this.zone.run(()=>this.retrievingOutputLogs$.next(!1)))).subscribe(t=>{this.outputLogs$.next(t)})}getTextFile(t){return this.http.get(t,{responseType:"text"}).pipe((0,J.j)(()=>{this.showOutputLogs=!0}))}isProcessFinished(t){return(0,d.a4)(t)&&(0,d.a4)(t.processStatus)&&(t.processStatus.toString()===y.K[y.K.COMPLETED].toString()||t.processStatus.toString()===y.K[y.K.FAILED].toString())}deleteProcess(t){this.isDeleting=!0,this.processService.delete(t.processId).pipe((0,h.qD)()).subscribe(n=>{n.hasSucceeded?(this.notificationsService.success(this.translateService.get("process.detail.delete.success")),this.closeModal(),this.router.navigateByUrl((0,Z.JO)())):(this.notificationsService.error(this.translateService.get("process.detail.delete.error")),this.isDeleting=!1)})}openDeleteModal(t){this.modalRef=this.modalService.open(t)}closeModal(){this.modalRef.close()}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(e.Agw),e.rXU(v.nX),e.rXU(v.Ix),e.rXU(I.ProcessDataService),e.rXU(oe.BitstreamDataService),e.rXU(z.f),e.rXU(e.SKi),e.rXU(A.uR),e.rXU(_e.Qq),e.rXU(F.Bq),e.rXU(E.I),e.rXU(c.c$))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-process-detail"]],standalone:!0,features:[e.aNF],decls:4,vars:3,consts:[["deleteModal",""],[1,"container"],[1,"row"],[1,"col-10"],[1,"flex-grow-1"],[1,"col-2","refresh-counter"],["id","process-name",3,"title"],["id","process-arguments",3,"title"],[4,"ngVar"],["id","process-start-time",3,"title"],["id","process-end-time",3,"title"],["id","process-status",3,"title"],["id","process-output",3,"title"],["id","process-actions",3,"title"],["routerLink","/processes/new",1,"btn","btn-success","me-2",3,"queryParams"],[1,"fas","fa-plus","pe-2"],["id","delete",1,"btn","btn-danger"],[2,"text-align","right"],[1,"btn","btn-outline-secondary","mt-3",3,"routerLink"],[1,"fas","fa-sync-alt","fa-spin"],["id","process-files",3,"title"],[1,"d-flex","flex-column"],[3,"bitstream","showAccessStatusBadge"],["id","showOutputButton",1,"btn","btn-primary"],[1,"ds-themed-loading",3,"message"],["tabindex","0",1,"fw-bold","text-secondary","bg-light","p-3"],["id","no-output-logs-message"],["id","showOutputButton",1,"btn","btn-primary",3,"click"],["id","delete",1,"btn","btn-danger",3,"click"],[1,"fas","fa-trash","pe-2"],[1,"modal-header"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"mt-4"],[1,"btn","btn-primary","me-2",3,"click"],["id","delete-confirm",1,"btn","btn-danger",3,"click"]],template:function(n,i){if(1&n&&(e.DNE(0,we,28,32,"div",1),e.nI1(1,"async"),e.DNE(2,Oe,2,3,"ng-template",null,0,e.C5r)),2&n){let r;e.vxM((r=null==(r=e.bMT(1,1,i.processRD$))?null:r.payload)?0:-1,r)}},dependencies:[m.Jj,m.vh,de.s,me.n,fe,v.Wk,ue.z,j.v,c.h,c.D9,w.r],encapsulation:2})}}return s})();var Ne=o(8177),Ge=o(27432),l=o(89417),Q=o(60696),Xe=o(25394),O=(o(71695),o(34010));function P(s){return s}var B=function(s){return s.STRING="String",s.INTEGER="Integer",s.DATE="date",s.BOOLEAN="boolean",s.FILE="InputStream",s.OUTPUT="OutputStream",s}(B||{});let M=(()=>{class s{constructor(){this.updateValue=new e.bkB}static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-value-input"]],inputs:{index:"index"},outputs:{updateValue:"updateValue"},standalone:!0,features:[e.aNF],decls:0,vars:0,template:function(n,i){},encapsulation:2})}}return s})(),Ue=(()=>{class s extends M{ngOnInit(){this.updateValue.emit(!0)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=e.xGo(s)))(i||s)}})()}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-boolean-value-input"]],standalone:!0,features:[e.Jv_([],[{provide:l.ZU,useFactory:P,deps:[[new e.Xx1,l.cV]]}]),e.Vt3,e.aNF],decls:2,vars:7,consts:[["type","hidden","value","true",3,"name","id"]],template:function(n,i){1&n&&(e.nrm(0,"input",0),e.nI1(1,"translate")),2&n&&(e.Mz_("name","boolean-value-",i.index,""),e.Mz_("id","boolean-value-",i.index,""),e.BMQ("aria-label",e.bMT(1,5,"process.new.parameter.label")))},dependencies:[c.h,c.D9]})}}return s})();function Le(s,a){1&s&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"process.new.parameter.string.required")," "))}function Ye(s,a){if(1&s&&(e.j41(0,"div",2),e.DNE(1,Le,3,3,"div"),e.k0s()),2&s){e.XpG();const t=e.sdS(1);e.R7$(),e.vxM(t.errors.required?1:-1)}}let Je=(()=>{class s extends M{ngOnInit(){this.value=this.initialValue}setValue(t){this.value=t,this.updateValue.emit(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=e.xGo(s)))(i||s)}})()}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-date-value-input"]],inputs:{initialValue:"initialValue"},standalone:!0,features:[e.Jv_([],[{provide:l.ZU,useFactory:P,deps:[[new e.Xx1,l.cV]]}]),e.Vt3,e.aNF],decls:4,vars:9,consts:[["string","ngModel"],["required","","type","text",1,"form-control",3,"ngModelChange","name","id","ngModel"],[1,"alert","alert-danger","validation-error","mb-0"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"input",1,0),e.nI1(2,"translate"),e.bIt("ngModelChange",function(u){return e.eBV(r),e.Njj(i.setValue(u))}),e.k0s(),e.DNE(3,Ye,2,1,"div",2)}if(2&n){const r=e.sdS(1);e.Mz_("name","date-value-",i.index,""),e.Mz_("id","date-value-",i.index,""),e.Y8G("ngModel",i.value),e.BMQ("aria-label",e.bMT(2,7,"process.new.parameter.label")),e.R7$(3),e.vxM(r.invalid&&(r.dirty||r.touched)?3:-1)}},dependencies:[l.YN,l.me,l.BC,l.YS,l.vS,c.h,c.D9],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:calc(var(--bs-spacer) / 2)}"]})}}return s})(),Ae=(()=>{class s{constructor(){this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275dir=e.FsC({type:s,selectors:[["input","type","file"]],hostBindings:function(n,i){1&n&&e.bIt("change",function(p){return i.onChange(p.target.files)})("blur",function(){return i.onTouched()})},standalone:!0,features:[e.Jv_([{provide:l.kq,useExisting:s,multi:!0}])]})}}return s})(),ze=(()=>{class s{static validate(t){return null==t.value||0===t.value.length?{required:!0}:null}validate(t){return s.validate(t)}static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275dir=e.FsC({type:s,selectors:[["","requireFile",""]],standalone:!0,features:[e.Jv_([{provide:l.cz,useExisting:s,multi:!0}])]})}}return s})();function He(s,a){1&s&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"process.new.parameter.file.required")," "))}function Ke(s,a){if(1&s&&(e.j41(0,"div",5),e.DNE(1,He,3,3,"div"),e.k0s()),2&s){e.XpG();const t=e.sdS(7);e.R7$(),e.vxM(t.errors.required?1:-1)}}let Ze=(()=>{class s extends M{setFile(t){this.fileObject=t.length>0?t[0]:void 0,this.updateValue.emit(this.fileObject)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=e.xGo(s)))(i||s)}})()}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-file-value-input"]],standalone:!0,features:[e.Jv_([],[{provide:l.ZU,useFactory:P,deps:[[new e.Xx1,l.cV]]}]),e.Vt3,e.aNF],decls:9,vars:12,consts:[["file","ngModel"],[1,"form-label","d-flex","align-items-center","m-0",3,"for"],[1,"btn","btn-primary"],[1,"file-name","ms-1"],["requireFile","","type","file",1,"form-control","d-none",3,"ngModelChange","name","id","ngModel"],[1,"alert","alert-danger","validation-error"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"label",1)(1,"span",2),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"span",3),e.EFF(5),e.k0s()(),e.j41(6,"input",4,0),e.bIt("ngModelChange",function(u){return e.eBV(r),e.Njj(i.setFile(u))}),e.k0s(),e.DNE(8,Ke,2,1,"div",5)}if(2&n){const r=e.sdS(7);e.Mz_("for","file-upload-",i.index,""),e.R7$(2),e.SpI(" ",e.bMT(3,10,"process.new.parameter.file.upload-button")," "),e.R7$(3),e.JRh(null==i.fileObject?null:i.fileObject.name),e.R7$(),e.Mz_("name","file-upload-",i.index,""),e.Mz_("id","file-upload-",i.index,""),e.Y8G("ngModel",i.fileObject),e.R7$(2),e.vxM(r.invalid&&(r.dirty||r.touched)?8:-1)}},dependencies:[ze,Ae,l.YN,l.me,l.BC,l.vS,c.h,c.D9],styles:[".file-name[_ngcontent-%COMP%]{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}}return s})();function Qe(s,a){1&s&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"process.new.parameter.integer.required")," "))}function We(s,a){if(1&s&&(e.j41(0,"div",2),e.DNE(1,Qe,3,3,"div"),e.k0s()),2&s){e.XpG();const t=e.sdS(1);e.R7$(),e.vxM(t.errors.required?1:-1)}}let qe=(()=>{class s extends M{ngOnInit(){this.value=this.initialValue}setValue(t){this.value=t,this.updateValue.emit(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=e.xGo(s)))(i||s)}})()}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-integer-value-input"]],inputs:{initialValue:"initialValue"},standalone:!0,features:[e.Jv_([],[{provide:l.ZU,useFactory:P,deps:[[new e.Xx1,l.cV]]}]),e.Vt3,e.aNF],decls:4,vars:9,consts:[["integer","ngModel"],["required","","type","number","step","1",1,"form-control",3,"ngModelChange","name","id","ngModel"],[1,"alert","alert-danger","validation-error","mb-0"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"input",1,0),e.nI1(2,"translate"),e.bIt("ngModelChange",function(u){return e.eBV(r),e.Njj(i.setValue(u))}),e.k0s(),e.DNE(3,We,2,1,"div",2)}if(2&n){const r=e.sdS(1);e.Mz_("name","integer-value-",i.index,""),e.Mz_("id","integer-value-",i.index,""),e.Y8G("ngModel",i.value),e.BMQ("aria-label",e.bMT(2,7,"process.new.parameter.label")),e.R7$(3),e.vxM(r.invalid&&(r.dirty||r.touched)?3:-1)}},dependencies:[l.YN,l.me,l.Q0,l.BC,l.YS,l.vS,c.h,c.D9],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:calc(var(--bs-spacer) / 2)}"]})}}return s})();function et(s,a){1&s&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"process.new.parameter.string.required")," "))}function tt(s,a){if(1&s&&(e.j41(0,"div",2),e.DNE(1,et,3,3,"div"),e.k0s()),2&s){e.XpG();const t=e.sdS(1);e.R7$(),e.vxM(t.errors.required?1:-1)}}let st=(()=>{class s extends M{ngOnInit(){this.value=this.initialValue}setValue(t){this.value=t,this.updateValue.emit(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=e.xGo(s)))(i||s)}})()}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-string-value-input"]],inputs:{initialValue:"initialValue"},standalone:!0,features:[e.Jv_([],[{provide:l.ZU,useFactory:P,deps:[[new e.Xx1,l.cV]]}]),e.Vt3,e.aNF],decls:4,vars:9,consts:[["string","ngModel"],["required","","type","text",1,"form-control",3,"ngModelChange","name","id","ngModel"],[1,"alert","alert-danger","validation-error","mb-0"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"input",1,0),e.nI1(2,"translate"),e.bIt("ngModelChange",function(u){return e.eBV(r),e.Njj(i.setValue(u))}),e.k0s(),e.DNE(3,tt,2,1,"div",2)}if(2&n){const r=e.sdS(1);e.Mz_("name","string-value-",i.index,""),e.Mz_("id","string-value-",i.index,""),e.Y8G("ngModel",i.value),e.BMQ("aria-label",e.bMT(2,7,"process.new.parameter.label")),e.R7$(3),e.vxM(r.invalid&&(r.dirty||r.touched)?3:-1)}},dependencies:[l.YN,l.me,l.BC,l.YS,l.vS,c.h,c.D9],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:calc(var(--bs-spacer) / 2)}"]})}}return s})();function nt(s,a){if(1&s){const t=e.RV6();e.j41(0,"ds-string-value-input",2),e.bIt("updateValue",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateValue.emit(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("initialValue",t.initialValue)("index",t.index)}}function it(s,a){if(1&s){const t=e.RV6();e.j41(0,"ds-integer-value-input",2),e.bIt("updateValue",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateValue.emit(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("initialValue",t.initialValue)("index",t.index)}}function rt(s,a){if(1&s){const t=e.RV6();e.j41(0,"ds-string-value-input",2),e.bIt("updateValue",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateValue.emit(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("initialValue",t.initialValue)("index",t.index)}}function at(s,a){if(1&s){const t=e.RV6();e.j41(0,"ds-date-value-input",2),e.bIt("updateValue",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateValue.emit(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("initialValue",t.initialValue)("index",t.index)}}function ot(s,a){if(1&s){const t=e.RV6();e.j41(0,"ds-file-value-input",3),e.bIt("updateValue",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateValue.emit(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("index",t.index)}}function lt(s,a){if(1&s){const t=e.RV6();e.j41(0,"ds-boolean-value-input",3),e.bIt("updateValue",function(i){e.eBV(t);const r=e.XpG();return e.Njj(r.updateValue.emit(i))}),e.k0s()}if(2&s){const t=e.XpG();e.Y8G("index",t.index)}}let ct=(()=>{class s{constructor(){this.updateValue=new e.bkB,this.parameterTypes=B}static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-parameter-value-input"]],inputs:{index:"index",parameter:"parameter",initialValue:"initialValue"},outputs:{updateValue:"updateValue"},standalone:!0,features:[e.Jv_([],[{provide:l.ZU,useFactory:P,deps:[[new e.Xx1,l.cV]]}]),e.aNF],decls:7,vars:1,consts:[[3,"initialValue","index"],[3,"index"],[3,"updateValue","initialValue","index"],[3,"updateValue","index"]],template:function(n,i){if(1&n&&(e.j41(0,"div"),e.DNE(1,nt,1,2,"ds-string-value-input",0)(2,it,1,2,"ds-integer-value-input",0)(3,rt,1,2,"ds-string-value-input",0)(4,at,1,2,"ds-date-value-input",0)(5,ot,1,1,"ds-file-value-input",1)(6,lt,1,1,"ds-boolean-value-input",1),e.k0s()),2&n){let r;e.R7$(),e.vxM((r=null==i.parameter?null:i.parameter.type)===i.parameterTypes.STRING?1:r===i.parameterTypes.INTEGER?2:r===i.parameterTypes.OUTPUT?3:r===i.parameterTypes.DATE?4:r===i.parameterTypes.FILE?5:r===i.parameterTypes.BOOLEAN?6:-1)}},dependencies:[Ue,Je,Ze,qe,st]})}}return s})();function pt(s,a){if(1&s&&(e.j41(0,"option",3),e.EFF(1),e.k0s()),2&s){const t=a.$implicit;e.Y8G("ngValue",t.name),e.R7$(),e.SpI(" ",t.nameLong||t.name," ")}}function ut(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",7),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.removeParameter.emit(i.parameterValue))}),e.nrm(2,"i",8),e.k0s()}2&s&&e.BMQ("aria-label",e.bMT(1,1,"process.new.delete-parameter"))}function dt(s,a){1&s&&e.nrm(0,"span",6)}let mt=(()=>{class s{constructor(){this.parameterValue=new O.p,this.removeParameter=new e.bkB,this.changeParameter=new e.bkB}get selectedScriptParameter(){return this.parameters.find(t=>t.name===this.selectedParameter)}get selectedParameter(){return this.parameterValue?this.parameterValue.name:void 0}set selectedParameter(t){this.parameterValue.name=t,this.selectedParameterValue=void 0,this.changeParameter.emit(this.parameterValue)}get selectedParameterValue(){return this.parameterValue?this.parameterValue.value:void 0}set selectedParameterValue(t){this.parameterValue.value=t,this.changeParameter.emit(this.parameterValue)}static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-parameter-select"]],inputs:{index:"index",parameterValue:"parameterValue",parameters:"parameters",removable:"removable"},outputs:{removeParameter:"removeParameter",changeParameter:"changeParameter"},standalone:!0,features:[e.Jv_([],[{provide:l.ZU,useFactory:P,deps:[[new e.Xx1,l.cV]]}]),e.aNF],decls:12,vars:15,consts:[["param","ngModel"],[1,"row","gap-2","mb-2","mx-0"],["id","process-parameters",1,"form-select","col",3,"ngModelChange","name","ngModel"],[3,"ngValue"],[1,"d-block","col","px-0",3,"updateValue","initialValue","parameter","index"],[1,"btn","btn-danger","col-1","remove-button"],[1,"col-1"],[1,"btn","btn-danger","col-1","remove-button",3,"click"],[1,"fas","fa-trash"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",1)(1,"select",2,0),e.nI1(3,"translate"),e.mxI("ngModelChange",function(u){return e.eBV(r),e.DH7(i.selectedParameter,u)||(i.selectedParameter=u),e.Njj(u)}),e.j41(4,"option",3),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.Z7z(7,pt,2,2,"option",3,e.fX1),e.k0s(),e.j41(9,"ds-parameter-value-input",4),e.bIt("updateValue",function(u){return e.eBV(r),e.Njj(i.selectedParameterValue=u)}),e.k0s(),e.DNE(10,ut,3,3,"button",5)(11,dt,1,0,"span",6),e.k0s()}2&n&&(e.R7$(),e.Mz_("name","parameter-",i.index,""),e.R50("ngModel",i.selectedParameter),e.BMQ("aria-label",e.bMT(3,11,"process.new.select-parameter")),e.R7$(3),e.Y8G("ngValue",void 0),e.R7$(),e.JRh(e.bMT(6,13,"process.new.add-parameter")),e.R7$(2),e.Dyx(i.parameters),e.R7$(2),e.Y8G("initialValue",i.parameterValue.value)("parameter",i.selectedScriptParameter)("index",i.index),e.R7$(),e.vxM(i.removable?10:-1),e.R7$(),e.vxM(i.removable?-1:11))},dependencies:[l.YN,l.xH,l.y7,l.wz,l.BC,l.vS,ct,c.h,c.D9]})}}return s})();function ht(s,a){if(1&s){const t=e.RV6();e.j41(0,"ds-parameter-select",3),e.bIt("removeParameter",function(){const i=e.eBV(t).$index,r=e.XpG(2);return e.Njj(r.removeParameter(i))})("changeParameter",function(i){const r=e.eBV(t).$index,p=e.XpG(2);return e.Njj(p.updateParameter(i,r))}),e.k0s()}if(2&s){const t=a.$implicit,n=a.$index,i=a.$count,r=e.XpG(2);e.Y8G("parameters",r.script.parameters)("parameterValue",t)("removable",n!==i-1)("index",n)}}function vt(s,a){if(1&s&&(e.j41(0,"div",0)(1,"label",1),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.Z7z(4,ht,1,4,"ds-parameter-select",2,e.fX1),e.k0s()),2&s){const t=e.XpG();e.R7$(2),e.JRh(e.bMT(3,1,"process.new.select-parameters")),e.R7$(2),e.Dyx(t.parameterValues)}}let ft=(()=>{class s{constructor(){this.updateParameters=new e.bkB}ngOnInit(){(0,d.a4)(this.initialParams)&&(this.parameterValues=this.initialParams)}ngOnChanges(t){t.script&&this.initParameters()}initParameters(){(0,d.a4)(this.initialParams)?this.parameterValues=this.initialParams:(this.parameterValues=[],this.initializeParameter())}updateParameter(t,n){this.parameterValues[n]=t,n===this.parameterValues.length-1&&this.addParameter(),this.updateParameters.emit(this.parameterValues.filter(i=>(0,d.a4)(i.name)))}removeParameter(t){this.parameterValues=this.parameterValues.filter((n,i)=>i!==t),this.updateParameters.emit(this.parameterValues.filter(n=>(0,d.a4)(n.name)))}initializeParameter(){(0,d.a4)(this.script)&&(this.parameterValues=this.script.parameters.filter(t=>t.mandatory).map(t=>Object.assign(new O.p,{name:t.name}))),this.addParameter()}addParameter(){this.parameterValues=[...this.parameterValues,new O.p]}static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-process-parameters"]],inputs:{script:"script",initialParams:"initialParams"},outputs:{updateParameters:"updateParameters"},standalone:!0,features:[e.Jv_([],[{provide:l.ZU,useFactory:P,deps:[[new e.Xx1,l.cV]]}]),e.OA$,e.aNF],decls:1,vars:1,consts:[["data-testID","parameters-select-container",1,"mb-3"],[1,"form-label"],[3,"parameters","parameterValue","removable","index"],[3,"removeParameter","changeParameter","parameters","parameterValue","removable","index"]],template:function(n,i){1&n&&e.DNE(0,vt,6,3,"div",0),2&n&&e.vxM(null!=i.script&&null!=i.script.parameters&&i.script.parameters.length?0:-1)},dependencies:[mt,c.h,c.D9]})}}return s})();function _t(s,a){1&s&&e.eu8(0)}function gt(s,a){if(1&s&&(e.j41(0,"tr")(1,"td",3),e.EFF(2),e.DNE(3,_t,1,0,"ng-container",4),e.k0s(),e.j41(4,"td"),e.EFF(5),e.k0s()()),2&s){const t=a.$implicit;e.XpG();const n=e.sdS(9);e.R7$(2),e.Lme("",t.name," ",t.nameLong," "),e.R7$(),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t),e.R7$(2),e.JRh(t.description)}}function bt(s,a){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI("<",e.bMT(2,1,"process.new.parameter.type.value"),">"))}function St(s,a){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI("<",e.bMT(2,1,"process.new.parameter.type.value"),">"))}function Ct(s,a){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI("<",e.bMT(2,1,"process.new.parameter.type.value"),">"))}function Tt(s,a){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI("<",e.bMT(2,1,"process.new.parameter.type.file"),">"))}function Pt(s,a){if(1&s&&e.DNE(0,bt,3,3,"span")(1,St,3,3,"span")(2,Ct,3,3,"span")(3,Tt,3,3,"span"),2&s){let t;const n=a.type,i=e.XpG();e.vxM((t=n)===i.parameterTypes.DATE?0:t===i.parameterTypes.STRING?1:t===i.parameterTypes.OUTPUT?2:t===i.parameterTypes.FILE?3:-1)}}let Rt=(()=>{class s{constructor(){this.parameterTypes=B}static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-script-help"]],inputs:{script:"script"},standalone:!0,features:[e.aNF],decls:10,vars:2,consts:[["type",""],[1,"text-secondary"],[1,"table-borderless","mt-3"],[1,"align-top","text-nowrap"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,i){1&n&&(e.j41(0,"div",1)(1,"h2"),e.EFF(2),e.k0s(),e.j41(3,"span"),e.EFF(4),e.k0s(),e.j41(5,"table",2),e.Z7z(6,gt,6,5,"tr",null,e.fX1),e.k0s()(),e.DNE(8,Pt,4,1,"ng-template",null,0,e.C5r)),2&n&&(e.R7$(2),e.JRh(null==i.script?null:i.script.name),e.R7$(2),e.JRh(null==i.script?null:i.script.description),e.R7$(2),e.Dyx(null==i.script?null:i.script.parameters))},dependencies:[m.T3,c.h,c.D9]})}}return s})();var W=o(86820);const Ft=()=>({standalone:!0});function It(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",8),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.onSelect(i))}),e.j41(1,"span",9),e.EFF(2),e.k0s()()}if(2&s){const t=a.$implicit;e.FS9("title",t.name),e.R7$(2),e.JRh(t.name)}}function Vt(s,a){1&s&&(e.j41(0,"button",6),e.nrm(1,"ds-loading",10),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.FS9("message",e.bMT(2,1,"loading.default")))}function yt(s,a){1&s&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"process.new.select-script.required")," "))}function Mt(s,a){if(1&s&&(e.j41(0,"div",7),e.DNE(1,yt,3,3,"div"),e.k0s()),2&s){e.XpG();const t=e.sdS(4);e.R7$(),e.vxM(t.errors.required?1:-1)}}const q="script";let Dt=(()=>{class s{constructor(t,n,i){this.scriptService=t,this.router=n,this.route=i,this.select=new e.bkB,this.scripts=[],this._isLastPage=!1,this.scriptOptions={elementsPerPage:20,currentPage:1},this.isLoading$=new g.t(!1)}ngOnInit(){this.loadScripts()}loadScripts(){this.isLoading$.value||(this.isLoading$.next(!0),this.subscription=this.scriptService.findAll(this.scriptOptions).pipe((0,h.qD)(),(0,h.Bo)(),(0,V.M)(t=>{this._isLastPage=t?.pageInfo?.currentPage>=t?.pageInfo?.totalPages}),(0,_.T)(t=>t.page)).subscribe(t=>{this.scripts=[...this.scripts,...t],this.isLoading$.next(!1);const n=this.route.snapshot.queryParams[q];(0,d.a4)(n)&&(this._selectedScript=this.scripts.find(i=>i.id===n),this.select.emit(this._selectedScript))}))}onScroll(t){t.target.scrollTop+t.target.clientHeight>=t.target.scrollHeight&&!this.isLoading$.value&&!this._isLastPage&&(this.scriptOptions.currentPage++,this.loadScripts())}get selectedScript(){return this._selectedScript?this._selectedScript.id:void 0}set selectedScript(t){this.router.navigate([],{queryParams:{[q]:t}})}selectScript(t){this._selectedScript=t}onSelect(t){this.selectScript(t),this.select.emit(t),this.selectedScript=t.name}set script(t){this._selectedScript=t}ngOnDestroy(){(0,d.a4)(this.subscription)&&this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(Q.ScriptDataService),e.rXU(v.Ix),e.rXU(v.nX))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-scripts-select"]],inputs:{script:"script"},outputs:{select:"select"},standalone:!0,features:[e.Jv_([],[{provide:l.ZU,useFactory:P,deps:[[new e.Xx1,l.cV]]}]),e.aNF],decls:13,vars:15,consts:[["script","ngModel"],[1,"d-flex","w-100","flex-column","gap-3"],["ngbDropdown","",1,"d-flex"],["id","process-script","required","","ngbDropdownToggle","","role","combobox",1,"form-select",3,"ngModel","placeholder","ngModelOptions"],["ngbDropdownMenu","","aria-labelledby","process-script","role","menu","infiniteScroll","",1,"w-100","scrollable-menu",3,"scroll","infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollUpDistance","fromRoot","scrollWindow"],["role","menuitem","type","button",1,"dropdown-item",3,"title"],["role","menuitem",1,"dropdown-item","disabled"],[1,"alert","alert-danger","validation-error"],["role","menuitem","type","button",1,"dropdown-item",3,"click","title"],[1,"text-truncate"],[3,"message"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",1)(1,"div")(2,"div",2),e.nrm(3,"input",3,0),e.nI1(5,"translate"),e.j41(6,"div",4),e.bIt("scroll",function(u){return e.eBV(r),e.Njj(i.onScroll(u))}),e.Z7z(7,It,3,2,"button",5,e.fX1),e.DNE(9,Vt,3,3,"button",6),e.nI1(10,"async"),e.k0s()()(),e.j41(11,"div"),e.DNE(12,Mt,2,1,"div",7),e.k0s()()}if(2&n){const r=e.sdS(4);e.R7$(3),e.FS9("placeholder",e.bMT(5,10,"process.new.select-script.placeholder")),e.Y8G("ngModel",i.selectedScript)("ngModelOptions",e.lJ4(14,Ft)),e.R7$(3),e.Y8G("infiniteScrollDistance",5)("infiniteScrollThrottle",300)("infiniteScrollUpDistance",1.5)("fromRoot",!0)("scrollWindow",!1),e.R7$(),e.Dyx(i.scripts),e.R7$(2),e.vxM(e.bMT(10,12,i.isLoading$)?9:-1),e.R7$(3),e.vxM(r.invalid&&(r.dirty||r.touched)?12:-1)}},dependencies:[m.Jj,l.YN,l.me,l.BC,l.YS,l.vS,W.e,W.D,F.zH,F.tg,F.do,F.U0,j.v,c.h,c.D9],styles:[".dropdown-item[_ngcontent-%COMP%]{padding:.35rem 1rem}.dropdown-item[_ngcontent-%COMP%]:active{color:#fff!important}.scrollable-menu[_ngcontent-%COMP%]{height:auto;max-height:var(--ds-dropdown-menu-max-height);overflow-x:hidden}li[_ngcontent-%COMP%]:not(:last-of-type)   .dropdown-item[_ngcontent-%COMP%]{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}#entityControlsDropdownMenu[_ngcontent-%COMP%]{outline:0;left:0!important;box-shadow:var(--bs-btn-focus-box-shadow)}"]})}}return s})();const xt=()=>["/processes"];function $t(s,a){if(1&s&&e.nrm(0,"ds-script-help",11),2&s){const t=e.XpG();e.Y8G("script",t.selectedScript)}}function jt(s,a){if(1&s&&(e.j41(0,"li"),e.EFF(1),e.k0s()),2&s){const t=a.$implicit;e.R7$(),e.JRh(t)}}function Et(s,a){if(1&s&&(e.j41(0,"div",12),e.EFF(1),e.nI1(2,"translate"),e.j41(3,"ul"),e.Z7z(4,jt,2,1,"li",null,e.fX1),e.k0s()()),2&s){const t=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,1,"process.new.parameter.required.missing")," "),e.R7$(3),e.Dyx(t.missingParameters)}}let wt=(()=>{class s{constructor(t,n,i,r){this.scriptService=t,this.notificationsService=n,this.translationService=i,this.router=r,this.selectedScript=void 0,this.process=void 0,this.parameters=[],this.files=[],this.missingParameters=[]}ngOnInit(){this.process=new Xe.M}submitForm(t){if((0,d.Im)(this.parameters)&&(this.parameters=[]),!this.validateForm(t)||this.isRequiredMissing())return;const n=this.parameters.map(i=>({name:i.name,value:this.checkValue(i)}));this.scriptService.invoke(this.selectedScript.id,n,this.files).pipe((0,h.qD)()).subscribe(i=>{if(i.hasSucceeded){const r=this.translationService.get("process.new.notification.success.title"),p=this.translationService.get("process.new.notification.success.content");this.notificationsService.success(r,p),this.sendBack(i.payload)}else{const r=this.translationService.get("process.new.notification.error.title"),p=this.translationService.get("process.new.notification.error.content");this.notificationsService.error(r,p)}})}checkValue(t){return"object"==typeof t.value?(this.files=[...this.files,t.value],t.value.name):t.value}validateForm(t){let n=!0;return Object.keys(t.controls).forEach(i=>{t.controls[i].invalid&&(t.controls[i].markAsDirty(),n=!1)}),n}isRequiredMissing(){this.missingParameters=[];const t=this.parameters.map(i=>i.name),n=this.selectedScript.parameters.filter(i=>i.mandatory);for(const i of n)t.includes(i.name)||this.missingParameters.push(i.name);return this.missingParameters.length>0}sendBack(t){const n={queryParams:{new_process_id:t.processId}};this.router.navigate([(0,Z.JO)()],n)}updateScript(t){this.selectedScript=t,this.parameters=void 0}get generatedProcessName(){const t=this.parameters?.map(n=>{const i=this.parseValue(n.value);return(0,d.Im)(i)?n.name:`${n.name} ${i}`}).join(" ")||"";return(0,d.Im)(t)?this.selectedScript.name:`${this.selectedScript.name} ${t}`}parseValue(t){if("boolean"!=typeof t)return t instanceof File?t.name:t?.toString()}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(Q.ScriptDataService),e.rXU(E.I),e.rXU(c.c$),e.rXU(v.Ix))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-process-form"]],inputs:{selectedScript:"selectedScript",process:"process",parameters:"parameters",headerKey:"headerKey"},standalone:!0,features:[e.aNF],decls:19,vars:16,consts:[["form","ngForm"],[1,"container"],[1,"row"],[1,"col-12"],[1,"col-12","col-md-6","mb-2"],[3,"ngSubmit"],[3,"select","script"],[3,"updateParameters","initialParams","script"],[1,"btn","btn-danger","float-start",3,"routerLink"],["type","submit",1,"btn","btn-primary","float-end"],[1,"col-12","col-md-6"],[3,"script"],[1,"mt-3","alert","alert-danger","validation-error"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h1",3),e.EFF(3),e.nI1(4,"translate"),e.k0s(),e.j41(5,"div",4)(6,"form",5,0),e.bIt("ngSubmit",function(){e.eBV(r);const u=e.sdS(7);return e.Njj(i.submitForm(u))}),e.j41(8,"ds-scripts-select",6),e.bIt("select",function(u){return e.eBV(r),i.selectedScript=u,e.Njj(i.parameters=void 0)}),e.k0s(),e.j41(9,"ds-process-parameters",7),e.bIt("updateParameters",function(u){return e.eBV(r),e.Njj(i.parameters=u)}),e.k0s(),e.j41(10,"a",8),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"button",9),e.EFF(14),e.nI1(15,"translate"),e.k0s()()(),e.j41(16,"div",10),e.DNE(17,$t,1,1,"ds-script-help",11),e.k0s()(),e.DNE(18,Et,6,3,"div",12),e.k0s()}2&n&&(e.R7$(3),e.SpI(" ",e.bMT(4,9,i.headerKey)," "),e.R7$(5),e.Y8G("script",i.selectedScript),e.R7$(),e.Y8G("initialParams",i.parameters)("script",i.selectedScript),e.R7$(),e.Y8G("routerLink",e.lJ4(15,xt)),e.R7$(),e.JRh(e.bMT(12,11,"process.new.cancel")),e.R7$(3),e.JRh(e.bMT(15,13,"process.new.submit")),e.R7$(3),e.vxM(i.selectedScript?17:-1),e.R7$(),e.vxM(i.missingParameters.length>0?18:-1))},dependencies:[l.YN,l.qT,l.cb,l.cV,ft,v.Wk,Rt,Dt,c.h,c.D9]})}}return s})();function kt(s,a){if(1&s&&(e.nrm(0,"ds-process-form",0),e.nI1(1,"async")),2&s){const t=a.ngVar,n=e.XpG(2);e.Y8G("selectedScript",e.bMT(1,2,n.script$))("parameters",t.parameters)}}function Ot(s,a){if(1&s&&(e.DNE(0,kt,2,4,"ds-process-form",2),e.nI1(1,"async")),2&s){const t=e.XpG();e.Y8G("ngVar",e.bMT(1,1,t.fromExisting$))}}function Bt(s,a){1&s&&e.nrm(0,"ds-process-form",1)}let Nt=(()=>{class s{constructor(t,n,i){this.route=t,this.processService=n,this.linkService=i}ngOnInit(){const t=this.route.snapshot.queryParams.id;t&&(this.fromExisting$=this.processService.findById(t).pipe((0,h.ak)()),this.script$=this.fromExisting$.pipe((0,_.T)(n=>this.linkService.resolveLink(n,(0,k.s)("script"))),(0,b.n)(n=>n.script),(0,h.ak)()))}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(v.nX),e.rXU(I.ProcessDataService),e.rXU(Ne._))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-new-process"]],standalone:!0,features:[e.aNF],decls:4,vars:5,consts:[["headerKey","process.new.header",3,"selectedScript","parameters"],["headerKey","process.new.header"],["headerKey","process.new.header",3,"selectedScript","parameters",4,"ngVar"]],template:function(n,i){1&n&&(e.DNE(0,Ot,2,3,"ds-process-form",0),e.nI1(1,"async"),e.nI1(2,"dsHasValue"),e.DNE(3,Bt,1,0,"ds-process-form",1)),2&n&&e.vxM(e.bMT(2,3,e.bMT(1,1,i.fromExisting$))?0:3)},dependencies:[m.Jj,Ge.a,wt,w.r]})}}return s})();var Gt=o(79104),ee=o(22806),Xt=o(19852),Lt=o(70274);let te=(()=>{class s{constructor(t,n,i){this.processDataService=t,this.notificationsService=n,this.translateService=i,this.processesToDelete=[],this.isProcessingBehaviorSubject=new g.t(!1)}toggleDelete(t){this.isToBeDeleted(t)?this.processesToDelete.splice(this.processesToDelete.indexOf(t),1):this.processesToDelete.push(t)}isToBeDeleted(t){return this.processesToDelete.includes(t)}clearAllProcesses(){this.processesToDelete.splice(0)}getAmountOfSelectedProcesses(){return this.processesToDelete.length}isProcessing$(){return this.isProcessingBehaviorSubject}hasSelected(){return(0,d.hj)(this.processesToDelete)}deleteSelectedProcesses(){this.isProcessingBehaviorSubject.next(!0),(0,ee.H)([...this.processesToDelete]).pipe((0,Lt.H)(t=>this.processDataService.delete(t).pipe((0,h.qD)(),(0,V.M)(n=>{n.hasFailed?this.notificationsService.error(this.translateService.get("process.bulk.delete.error.head"),this.translateService.get("process.bulk.delete.error.body",{processId:t})):this.toggleDelete(t)}))),(0,f.p)(t=>t.hasSucceeded),function Ut(s){return(0,Xt.T)((a,t,n)=>!s||s(t,n)?a+1:a,0)}()).subscribe(t=>{this.notificationsService.success(this.translateService.get("process.bulk.delete.success",{count:t})),this.isProcessingBehaviorSubject.next(!1)})}static{this.\u0275fac=function(n){return new(n||s)(e.KVO(I.ProcessDataService),e.KVO(E.I),e.KVO(c.c$))}}static{this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var Yt=o(10186),se=o(70998),ne=o(36343),N=function(s){return s.creationTime="creationTime",s.startTime="startTime",s.endTime="endTime",s}(N||{});let ie=(()=>{class s{constructor(t){this.processDataService=t,this.dateFormat="yyyy-MM-dd HH:mm:ss",this.datePipe=new m.vh("en-US"),this.timeCreated=n=>this.datePipe.transform(n.creationTime,this.dateFormat,"UTC"),this.timeCompleted=n=>this.datePipe.transform(n.endTime,this.dateFormat,"UTC"),this.timeStarted=n=>this.datePipe.transform(n.startTime,this.dateFormat,"UTC")}getProcessesByProcessStatus(t,n,i=null){const r=new Yt.x("processStatus",t),p=Object.assign(new ne._,{searchParams:[r],elementsPerPage:5},n);return(0,d.a4)(i)&&i>0?(this.processDataService.stopAutoRefreshing(t),this.processDataService.autoRefreshingSearchBy(t,"byProperty",p,i)):this.processDataService.searchBy("byProperty",p)}stopAutoRefreshing(t){this.processDataService.stopAutoRefreshing(t)}getFindListOptions(t,n){const i=new se.z(n,se.U.DESC);return Object.assign(new ne._,{currentPage:t.currentPage,elementsPerPage:t.pageSize,sort:i})}static{this.\u0275fac=function(n){return new(n||s)(e.KVO(I.ProcessDataService))}}static{this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var Jt=o(73028),At=o(56594),zt=o(31),Ht=o(58956),Kt=o(13817),Zt=o(87507),Qt=o(2175),Wt=o(8417);const re=s=>["/processes/",s];function qt(s,a){if(1&s&&(e.j41(0,"span",4),e.EFF(1),e.k0s()),2&s){const t=a;e.R7$(),e.SpI(" ",null==t||null==t.payload?null:t.payload.totalElements," ")}}function es(s,a){1&s&&e.nrm(0,"ds-loading")}function ts(s,a){if(1&s){const t=e.RV6();e.j41(0,"tr")(1,"td")(2,"a",18),e.EFF(3),e.k0s()(),e.j41(4,"td")(5,"a",18),e.EFF(6),e.k0s()(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td")(12,"button",19),e.nI1(13,"translate"),e.bIt("click",function(){const i=e.eBV(t).$implicit,r=e.XpG(3);return e.Njj(r.processBulkDeleteService.toggleDelete(i.process.processId))}),e.nrm(14,"i",20),e.k0s()()()}if(2&s){const t=a.$implicit,n=e.XpG(3);e.HbH(n.getRowClass(t.process)),e.R7$(2),e.Y8G("routerLink",e.eq3(11,re,t.process.processId)),e.R7$(),e.JRh(t.process.processId),e.R7$(2),e.Y8G("routerLink",e.eq3(13,re,t.process.processId)),e.R7$(),e.JRh(t.process.scriptName),e.R7$(2),e.JRh(t.user),e.R7$(2),e.JRh(t.info),e.R7$(2),e.BMQ("aria-label",e.bMT(13,9,"process.overview.delete-process"))}}function ss(s,a){if(1&s&&(e.j41(0,"ds-pagination",9),e.nI1(1,"async"),e.j41(2,"div",10)(3,"table",11)(4,"thead")(5,"tr")(6,"th",12),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"th",13),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"th",14),e.EFF(13),e.nI1(14,"translate"),e.k0s(),e.j41(15,"th",15),e.EFF(16),e.nI1(17,"translate"),e.k0s(),e.j41(18,"th",16),e.EFF(19),e.nI1(20,"translate"),e.k0s()()(),e.j41(21,"tbody"),e.Z7z(22,ts,15,15,"tr",17,e.fX1),e.k0s()()()()),2&s){const t=e.XpG().ngVar,n=e.XpG();e.Y8G("paginationOptions",e.bMT(1,9,n.paginationOptions$))("collectionSize",null==t||null==t.payload?null:t.payload.totalElements)("retainScrollPosition",!0)("hideGear",!0),e.R7$(7),e.JRh(e.bMT(8,11,"process.overview.table.id")),e.R7$(3),e.JRh(e.bMT(11,13,"process.overview.table.name")),e.R7$(3),e.JRh(e.bMT(14,15,"process.overview.table.user")),e.R7$(3),e.JRh(e.bMT(17,17,"process.overview.table."+n.processStatus.toLowerCase()+".info")),e.R7$(3),e.JRh(e.bMT(20,19,"process.overview.table.actions")),e.R7$(3),e.Dyx(null==t||null==t.payload?null:t.payload.page)}}function ns(s,a){1&s&&(e.j41(0,"div")(1,"p"),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"process.overview.table.empty")))}function is(s,a){if(1&s&&(e.qex(0),e.DNE(1,es,1,0,"ds-loading")(2,ss,24,21,"ds-pagination",9)(3,ns,4,3,"div"),e.bVm()),2&s){const t=a.ngVar;e.R7$(),e.vxM(!t||t.isLoading?1:-1),e.R7$(),e.vxM((null==t||null==t.payload?null:t.payload.totalElements)>0?2:-1),e.R7$(),e.vxM(0===(null==t||null==t.payload?null:t.payload.totalElements)?3:-1)}}let as=(()=>{class s{constructor(t,n,i,r,p,u,G,X,U,L){this.processOverviewService=t,this.processBulkDeleteService=n,this.ePersonDataService=i,this.dsoNameService=r,this.paginationService=p,this.routeService=u,this.router=G,this.auth=X,this.translateService=U,this.platformId=L,this.sortField=N.creationTime,this.useAutoRefreshingSearchBy=!1,this.autoRefreshInterval=5e3,this.isCollapsed=!1,this.subs=[]}ngOnInit(){(0,m.UE)(this.platformId)||(this.useAutoRefreshingSearchBy=!1),this.routeService.getQueryParameterValue("new_process_id").pipe((0,x.s)(1)).subscribe(n=>{this.newProcessId=n}),this.paginationId=this.processStatus.toLowerCase().substring(0,2);const t=Object.assign(new Wt.W,{id:this.paginationId,pageSize:5});this.paginationOptions$=this.paginationService.getCurrentPagination(this.paginationId,t),this.processesRD$=new g.t(void 0),this.subs.push(this.paginationOptions$.pipe((0,_.T)(n=>this.processOverviewService.getFindListOptions(n,this.sortField)),(0,b.n)(n=>this.processOverviewService.getProcessesByProcessStatus(this.processStatus,n,this.useAutoRefreshingSearchBy?this.autoRefreshInterval:null)),(0,H.QD)(this.router,this.auth),(0,h.bD)(),(0,b.n)(n=>(0,ee.H)(n.payload.page).pipe((0,Jt.Z)(i=>this.getEPersonName(i.userId).pipe((0,_.T)(r=>({process:i,user:r,info:this.getInfoValueMethod(i)})))),(0,At.$)(),(0,_.T)(i=>{const r=Object.assign(new Ht.O,n.payload,{page:i});return Object.assign({},n,{payload:r})})))).subscribe(n=>{this.processesRD$.next(n)})),this.subs.push(this.processesRD$.pipe((0,f.p)(n=>(0,d.a4)(n)),(0,x.s)(1)).subscribe(n=>{n.payload.totalElements>0||(this.isCollapsed=!0)}))}getEPersonName(t){return(0,d.hj)(t)?this.ePersonDataService.findById(t).pipe((0,h.qD)(),(0,b.n)(n=>n.hasSucceeded?[this.dsoNameService.getName(n.payload)]:this.translateService.get("process.overview.unknown.user"))):this.translateService.get("process.overview.unknown.user")}getRowClass(t){return this.processBulkDeleteService.isToBeDeleted(t.processId)?"table-danger":this.newProcessId===t.processId?"table-info":""}ngOnDestroy(){this.subs.filter(t=>(0,d.a4)(t)).forEach(t=>t.unsubscribe()),this.processOverviewService.stopAutoRefreshing(this.processStatus)}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(ie),e.rXU(te),e.rXU(Kt.EPersonDataService),e.rXU(z.f),e.rXU(zt.m),e.rXU(Zt.v$),e.rXU(v.Ix),e.rXU(A.uR),e.rXU(c.c$),e.rXU(e.Agw))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-process-overview-table"]],inputs:{processStatus:"processStatus",sortField:"sortField",useAutoRefreshingSearchBy:"useAutoRefreshingSearchBy",autoRefreshInterval:"autoRefreshInterval",getInfoValueMethod:"getInfoValueMethod"},standalone:!0,features:[e.aNF],decls:13,vars:12,consts:[["collapse","ngbCollapse"],[1,"mb-4"],["role","button",1,"d-flex",3,"click"],[1,"flex-grow-1"],[1,"badge","rounded-pill","bg-primary","badge-nb-processes","ps-2","pe-2"],[1,"ms-2","toggle-icon"],[1,"fas",3,"ngClass"],["ngbCollapse","",3,"ngbCollapse"],[4,"ngVar"],[3,"paginationOptions","collectionSize","retainScrollPosition","hideGear"],[1,"table-responsive","mt-1"],[1,"table","table-striped","table-hover"],["scope","col",1,"id-header"],["scope","col",1,"name-header"],["scope","col",1,"user-header"],["scope","col",1,"info-header"],["scope","col",1,"actions-header"],[3,"class"],[3,"routerLink"],[1,"btn","btn-outline-danger",3,"click"],[1,"fas","fa-trash"]],template:function(n,i){if(1&n){const r=e.RV6();e.j41(0,"div",1)(1,"div",2),e.bIt("click",function(){e.eBV(r);const u=e.sdS(10);return e.Njj(u.toggle())}),e.j41(2,"h2",3),e.EFF(3),e.nI1(4,"translate"),e.DNE(5,qt,2,1,"span",4),e.nI1(6,"async"),e.j41(7,"span",5),e.nrm(8,"i",6),e.k0s()()(),e.j41(9,"div",7,0),e.DNE(11,is,4,3,"ng-container",8),e.nI1(12,"async"),e.k0s()()}if(2&n){let r;const p=e.sdS(10);e.R7$(),e.BMQ("aria-expanded",!p.collapsed),e.R7$(2),e.SpI(" ",e.bMT(4,6,"process.overview.table."+i.processStatus.toLowerCase()+".title")," "),e.R7$(2),e.vxM((r=e.bMT(6,8,i.processesRD$))?5:-1,r),e.R7$(3),e.Y8G("ngClass",p.collapsed?"fa-angle-right":"fa-angle-down"),e.R7$(),e.Y8G("ngbCollapse",i.isCollapsed),e.R7$(2),e.Y8G("ngVar",e.bMT(12,10,i.processesRD$))}},dependencies:[m.Jj,F.HC,F.$G,m.YU,Qt.e,v.Wk,j.v,c.h,c.D9,w.r],styles:[".toggle-icon[_ngcontent-%COMP%]{font-size:calc(var(--bs-small-font-size) * .6)}.badge-nb-processes[_ngcontent-%COMP%]{font-size:var(--ds-process-overview-table-nb-processes-badge-size);vertical-align:middle}.id-header[_ngcontent-%COMP%]{width:var(--ds-process-overview-table-id-column-width)}.name-header[_ngcontent-%COMP%]{width:var(--ds-process-overview-table-name-column-width)}.user-header[_ngcontent-%COMP%]{width:var(--ds-process-overview-table-user-column-width)}.info-header[_ngcontent-%COMP%]{width:var(--ds-process-overview-table-info-column-width)}.actions-header[_ngcontent-%COMP%]{width:var(--ds-process-overview-table-actions-column-width)}"]})}}return s})();const $=s=>({count:s});function os(s,a){1&s&&e.eu8(0)}function ls(s,a){1&s&&e.eu8(0)}function cs(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2);return e.Njj(i.processBulkDeleteService.clearAllProcesses())}),e.nrm(1,"i",15),e.EFF(2),e.nI1(3,"translate"),e.k0s()}2&s&&(e.R7$(2),e.SpI("",e.bMT(3,1,"process.overview.delete.clear")," "))}function ps(s,a){if(1&s){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const i=e.XpG(2),r=e.sdS(15);return e.Njj(i.openDeleteModal(r))}),e.nrm(1,"i",17),e.EFF(2),e.nI1(3,"translate"),e.k0s()}if(2&s){const t=e.XpG(2);e.R7$(2),e.SpI("",e.i5U(3,1,"process.overview.delete",e.eq3(4,$,t.processBulkDeleteService.getAmountOfSelectedProcesses()))," ")}}function us(s,a){if(1&s&&(e.j41(0,"div",9),e.DNE(1,cs,4,3,"button",10)(2,ps,4,6,"button",11),e.j41(3,"button",12),e.nrm(4,"i",13),e.EFF(5),e.nI1(6,"translate"),e.k0s()()),2&s){const t=e.XpG();e.R7$(),e.vxM(t.processBulkDeleteService.hasSelected()?1:-1),e.R7$(),e.vxM(t.processBulkDeleteService.hasSelected()?2:-1),e.R7$(3),e.JRh(e.bMT(6,3,"process.overview.new"))}}function ds(s,a){if(1&s&&(e.j41(0,"div",22),e.nrm(1,"span",26),e.j41(2,"span"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()),2&s){const t=e.XpG(2);e.R7$(3),e.SpI(" ",e.i5U(4,1,"process.overview.delete.processing",e.eq3(4,$,t.processBulkDeleteService.getAmountOfSelectedProcesses())),"")}}function ms(s,a){if(1&s&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s){const t=e.XpG(2);e.R7$(),e.JRh(e.i5U(2,1,"process.overview.delete.body",e.eq3(4,$,t.processBulkDeleteService.getAmountOfSelectedProcesses())))}}function hs(s,a){if(1&s){const t=e.RV6();e.j41(0,"div")(1,"div",18)(2,"div")(3,"h4"),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"button",19),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeModal())}),e.j41(7,"span",20),e.EFF(8,"\xd7"),e.k0s()()(),e.j41(9,"div",21),e.SS7(10),e.nI1(11,"async"),e.DNE(12,ds,5,6,"div",22)(13,ms,3,6,"div"),e.j41(14,"div",23)(15,"button",24),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closeModal())}),e.EFF(16),e.nI1(17,"translate"),e.k0s(),e.j41(18,"button",25),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.deleteSelected())}),e.EFF(19),e.nI1(20,"translate"),e.k0s()()()()}if(2&s){const t=e.XpG();e.R7$(4),e.JRh(e.bMT(5,6,"process.overview.delete.header"));const n=e.bMT(11,8,t.isProcessing$);e.R7$(8),e.vxM(n?12:13),e.R7$(3),e.Y8G("dsBtnDisabled",n),e.R7$(),e.JRh(e.bMT(17,10,"process.detail.delete.cancel")),e.R7$(2),e.Y8G("dsBtnDisabled",n),e.R7$(),e.SpI("",e.i5U(20,12,"process.overview.delete",e.eq3(15,$,t.processBulkDeleteService.getAmountOfSelectedProcesses()))," ")}}let vs=(()=>{class s{constructor(t,n,i){this.processOverviewService=t,this.modalService=n,this.processBulkDeleteService=i,this.ProcessStatus=y.K,this.ProcessSortField=N}ngOnInit(){this.processBulkDeleteService.clearAllProcesses(),this.isProcessing$=this.processBulkDeleteService.isProcessing$()}ngOnDestroy(){(0,d.a4)(this.isProcessingSub)&&this.isProcessingSub.unsubscribe()}openDeleteModal(t){this.modalRef=this.modalService.open(t)}closeModal(){this.modalRef.close()}deleteSelected(){this.processBulkDeleteService.deleteSelectedProcesses(),(0,d.a4)(this.isProcessingSub)&&this.isProcessingSub.unsubscribe(),this.isProcessingSub=this.processBulkDeleteService.isProcessing$().subscribe(t=>{t||this.closeModal()})}static{this.\u0275fac=function(n){return new(n||s)(e.rXU(ie),e.rXU(F.Bq),e.rXU(te))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-process-overview"]],standalone:!0,features:[e.aNF],decls:16,vars:19,consts:[["buttons",""],["deleteModal",""],[1,"container"],[1,"d-flex"],[1,"flex-grow-1"],[4,"ngTemplateOutlet"],[1,"sections"],[3,"processStatus","useAutoRefreshingSearchBy","getInfoValueMethod"],[3,"processStatus","sortField","useAutoRefreshingSearchBy","getInfoValueMethod"],[1,"d-flex","justify-content-end","mb-2"],[1,"btn","btn-primary","me-2"],[1,"btn","btn-danger","me-2"],["routerLink","/processes/new",1,"btn","btn-success"],[1,"fas","fa-plus","pe-2"],[1,"btn","btn-primary","me-2",3,"click"],[1,"fas","fa-undo","pe-2"],[1,"btn","btn-danger","me-2",3,"click"],[1,"fas","fa-trash","pe-2"],[1,"modal-header"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"alert","alert-info"],[1,"mt-4"],[1,"btn","btn-primary","me-2",3,"click","dsBtnDisabled"],["id","delete-confirm",1,"btn","btn-danger",3,"click","dsBtnDisabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","spinner-button"]],template:function(n,i){if(1&n&&(e.j41(0,"div",2)(1,"div",3)(2,"h1",4),e.EFF(3),e.nI1(4,"translate"),e.k0s()(),e.DNE(5,os,1,0,"ng-container",5),e.j41(6,"div",6),e.nrm(7,"ds-process-overview-table",7)(8,"ds-process-overview-table",7)(9,"ds-process-overview-table",8)(10,"ds-process-overview-table",8),e.k0s(),e.DNE(11,ls,1,0,"ng-container",5),e.k0s(),e.DNE(12,us,7,5,"ng-template",null,0,e.C5r)(14,hs,21,17,"ng-template",null,1,e.C5r)),2&n){const r=e.sdS(13);e.R7$(3),e.JRh(e.bMT(4,17,"process.overview.title")),e.R7$(2),e.Y8G("ngTemplateOutlet",r),e.R7$(2),e.Y8G("processStatus",i.ProcessStatus.RUNNING)("useAutoRefreshingSearchBy",!0)("getInfoValueMethod",i.processOverviewService.timeStarted),e.R7$(),e.Y8G("processStatus",i.ProcessStatus.SCHEDULED)("useAutoRefreshingSearchBy",!0)("getInfoValueMethod",i.processOverviewService.timeCreated),e.R7$(),e.Y8G("processStatus",i.ProcessStatus.COMPLETED)("sortField",i.ProcessSortField.endTime)("useAutoRefreshingSearchBy",!0)("getInfoValueMethod",i.processOverviewService.timeCompleted),e.R7$(),e.Y8G("processStatus",i.ProcessStatus.FAILED)("sortField",i.ProcessSortField.endTime)("useAutoRefreshingSearchBy",!0)("getInfoValueMethod",i.processOverviewService.timeCompleted),e.R7$(),e.Y8G("ngTemplateOutlet",r)}},dependencies:[m.Jj,Gt.A,m.T3,as,v.Wk,c.h,c.D9],encapsulation:2})}}return s})();var ae=o(7673),fs=o(80495);let _s=(()=>{class s{getBreadcrumbs(t,n){return(0,d.a4)(t)?(0,ae.of)([new fs.Q(t.processId+" - "+t.scriptName,n)]):(0,ae.of)([])}static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275prov=e.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();const bs=[{path:"",resolve:{breadcrumb:T.S},data:{breadcrumbKey:"process.overview"},canActivate:[C.t],children:[{path:"",component:vs,data:{title:"process.overview.title"}},{path:"new",component:Nt,resolve:{breadcrumb:T.S},data:{title:"process.new.title",breadcrumbKey:"process.new"}},{path:":id",component:Be,resolve:{process:(s,a,t=(0,e.WQX)(I.ProcessDataService))=>t.findById(s.params.id,!1,!0,...K).pipe((0,h.qD)()),breadcrumb:(s,a,t=(0,e.WQX)(_s),n=(0,e.WQX)(I.ProcessDataService))=>{const i=s.params.id;return n.findById(s.params.id,!0,!1,(0,k.s)("script")).pipe((0,h.qD)(),(0,_.T)(r=>{const p=a.url,u=p.substring(0,p.indexOf(i)).concat(i);return{provider:t,key:r.payload,url:u}}))}}}]}]},95038:(D,S,o)=>{o.d(S,{n:()=>m});var C=o(89777),T=o(54438);let m=(()=>{class e{transform(c){return(0,C.Tn)(c)}static{this.\u0275fac=function(g){return new(g||e)}}static{this.\u0275pipe=T.EJ8({name:"dsHasNoValue",type:e,pure:!0,standalone:!0})}}return e})()},27432:(D,S,o)=>{o.d(S,{a:()=>m});var C=o(89777),T=o(54438);let m=(()=>{class e{transform(c){return(0,C.a4)(c)}static{this.\u0275fac=function(g){return new(g||e)}}static{this.\u0275pipe=T.EJ8({name:"dsHasValue",type:e,pure:!0,standalone:!0})}}return e})()}}]);