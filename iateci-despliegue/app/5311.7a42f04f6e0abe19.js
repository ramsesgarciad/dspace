"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[5311],{75311:(Q,I,n)=>{n.r(I),n.d(I,{ROUTES:()=>H});var T=n(59072),m=n(68018),b=n(32336),h=n(4093),g=n(9847),v=n(25287),t=n(54438),c=n(1473),M=n(78544),$=n(36480),p=n(2454),S=n(89777),j=n(86332),u=n(7901);function D(i,d){if(1&i){const e=t.RV6();t.j41(0,"ds-form",1),t.bIt("submitForm",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.onSubmit())})("cancel",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.onCancel())}),t.k0s()}if(2&i){const e=t.XpG();t.Y8G("formId","comcol-form-id")("formModel",e.formModel)}}let B=(()=>{class i{constructor(e){this.router=e,this.bitstreamFormat=new $.v,this.updatedFormat=new t.bkB,this.supportLevelOptions=[{label:p.c.Known,value:p.c.Known},{label:p.c.Unknown,value:p.c.Unknown},{label:p.c.Supported,value:p.c.Supported}],this.arrayElementLayout={grid:{group:"row"}},this.arrayInputElementLayout={grid:{host:"col"}},this.formModel=[new c.rA_({id:"shortDescription",name:"shortDescription",label:"admin.registries.bitstream-formats.edit.shortDescription.label",hint:"admin.registries.bitstream-formats.edit.shortDescription.hint",required:!0,validators:{required:null},errorMessages:{required:"Please enter a name for this bitstream format"}}),new c.rA_({id:"mimetype",name:"mimetype",label:"admin.registries.bitstream-formats.edit.mimetype.label",hint:"admin.registries.bitstream-formats.edit.mimetype.hint"}),new c.Zex({id:"description",name:"description",label:"admin.registries.bitstream-formats.edit.description.label",hint:"admin.registries.bitstream-formats.edit.description.hint",spellCheck:M.c.form.spellCheck}),new c.z4z({id:"supportLevel",name:"supportLevel",options:this.supportLevelOptions,label:"admin.registries.bitstream-formats.edit.supportLevel.label",hint:"admin.registries.bitstream-formats.edit.supportLevel.hint",value:this.supportLevelOptions[0].value}),new c.M7d({id:"internal",name:"internal",label:"Internal",hint:"admin.registries.bitstream-formats.edit.internal.hint"}),new c.UqU({id:"extensions",name:"extensions",label:"admin.registries.bitstream-formats.edit.extensions.label",groupFactory:()=>[new c.rA_({id:"extension",placeholder:"admin.registries.bitstream-formats.edit.extensions.placeholder"},this.arrayInputElementLayout)]},this.arrayElementLayout)]}ngOnInit(){this.initValues()}initValues(){this.formModel.forEach(e=>{if("extensions"===e.name){if((0,S.a4)(this.bitstreamFormat.extensions)){const a=this.bitstreamFormat.extensions,r=e;for(let s=0;s<a.length;s++)r.insertGroup(s).group[0]=new c.rA_({id:`extension-${s}`,value:a[s]},this.arrayInputElementLayout)}}else(0,S.a4)(this.bitstreamFormat[e.name])&&(e.value=this.bitstreamFormat[e.name])})}onSubmit(){const e=Object.assign(new $.v,{id:this.bitstreamFormat.id});this.formModel.forEach(a=>{if("extensions"===a.name){const r=a,s=[];for(let o=0;o<r.groups.length;o++){const l=r.get(o).get(0).value;(0,S.Im)(l)||s.push(r.get(o).get(0).value)}e.extensions=s}else e[a.name]=a.value}),this.updatedFormat.emit(e)}onCancel(){this.router.navigate([(0,v.J)()])}static{this.\u0275fac=function(a){return new(a||i)(t.rXU(u.Ix))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["ds-bitstream-format-form"]],inputs:{bitstreamFormat:"bitstreamFormat"},outputs:{updatedFormat:"updatedFormat"},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[3,"formId","formModel"],[3,"submitForm","cancel","formId","formModel"]],template:function(a,r){1&a&&t.DNE(0,D,1,2,"ds-form",0),2&a&&t.vxM(r.formModel?0:-1)},dependencies:[j.s],encapsulation:2})}}return i})(),x=(()=>{class i{constructor(e,a,r,s){this.router=e,this.notificationService=a,this.translateService=r,this.bitstreamFormatDataService=s}createBitstreamFormat(e){this.bitstreamFormatDataService.createBitstreamFormat(e).pipe((0,h.qD)()).subscribe(a=>{a.hasSucceeded?(this.notificationService.success(this.translateService.get("admin.registries.bitstream-formats.create.success.head"),this.translateService.get("admin.registries.bitstream-formats.create.success.content")),this.router.navigate([(0,v.J)()]),this.bitstreamFormatDataService.clearBitStreamFormatRequests().subscribe()):this.notificationService.error(this.translateService.get("admin.registries.bitstream-formats.create.failure.head"),this.translateService.get("admin.registries.bitstream-formats.create.failure.content"))})}static{this.\u0275fac=function(a){return new(a||i)(t.rXU(u.Ix),t.rXU(g.I),t.rXU(m.c$),t.rXU(b.BitstreamFormatDataService))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["ds-add-bitstream-format"]],standalone:!0,features:[t.aNF],decls:7,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-12","mb-4"],["id","sub-header",1,"border-bottom","pb-2"],[3,"updatedFormat"]],template:function(a,r){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"ds-bitstream-format-form",4),t.bIt("updatedFormat",function(o){return r.createBitstreamFormat(o)}),t.k0s()()()()),2&a&&(t.R7$(4),t.JRh(t.bMT(5,1,"admin.registries.bitstream-formats.create.new")))},dependencies:[B,m.h,m.D9],encapsulation:2})}}return i})();var C=n(60177),_=n(96697),E=n(73028),y=n(96354),k=n(56594),U=n(25558),X=n(31),L=n(2175),A=n(8417);const f=i=>["/admin/registries/bitstream-formats",i,"edit"];function G(i,d){1&i&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI("(",t.bMT(2,1,"admin.registries.bitstream-formats.table.internal"),")"))}function J(i,d){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"td")(2,"label",15)(3,"input",16),t.nI1(4,"async"),t.nI1(5,"translate"),t.bIt("change",function(r){const s=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.selectBitStreamFormat(s,r))}),t.k0s(),t.j41(6,"span",14),t.EFF(7),t.nI1(8,"translate"),t.k0s()()(),t.j41(9,"td")(10,"a",17),t.EFF(11),t.k0s()(),t.j41(12,"td")(13,"a",17),t.EFF(14),t.k0s()(),t.j41(15,"td")(16,"a",17),t.EFF(17),t.DNE(18,G,3,3,"span"),t.k0s()(),t.j41(19,"td")(20,"a",17),t.EFF(21),t.nI1(22,"translate"),t.k0s()()()}if(2&i){let e;const a=d.$implicit,r=t.XpG(2);t.R7$(3),t.Y8G("checked",null==(e=t.bMT(4,12,r.selectedBitstreamFormatIDs$))?null:e.includes(a.id)),t.BMQ("aria-label",t.bMT(5,14,"admin.registries.bitstream-formats.select")),t.R7$(4),t.SpI("",t.bMT(8,16,"admin.registries.bitstream-formats.select"),"}"),t.R7$(3),t.Y8G("routerLink",t.eq3(20,f,a.id)),t.R7$(),t.JRh(a.id),t.R7$(2),t.Y8G("routerLink",t.eq3(22,f,a.id)),t.R7$(),t.JRh(a.shortDescription),t.R7$(2),t.Y8G("routerLink",t.eq3(24,f,a.id)),t.R7$(),t.SpI("",a.mimetype," "),t.R7$(),t.vxM(a.internal?18:-1),t.R7$(2),t.Y8G("routerLink",t.eq3(26,f,a.id)),t.R7$(),t.JRh(t.bMT(22,18,"admin.registries.bitstream-formats.table.supportLevel."+a.supportLevel))}}function N(i,d){if(1&i&&(t.j41(0,"ds-pagination",7),t.nI1(1,"async"),t.j41(2,"div",11)(3,"table",12)(4,"thead")(5,"tr")(6,"th",13)(7,"span",14),t.EFF(8),t.nI1(9,"translate"),t.k0s()(),t.j41(10,"th",13),t.EFF(11),t.nI1(12,"translate"),t.k0s(),t.j41(13,"th",13),t.EFF(14),t.nI1(15,"translate"),t.k0s(),t.j41(16,"th",13),t.EFF(17),t.nI1(18,"translate"),t.k0s(),t.j41(19,"th",13),t.EFF(20),t.nI1(21,"translate"),t.k0s()()(),t.j41(22,"tbody"),t.Z7z(23,J,23,28,"tr",null,t.fX1),t.nI1(25,"async"),t.k0s()()()()),2&i){let e,a;const r=t.XpG();t.Y8G("paginationOptions",r.pageConfig)("collectionSize",null==(e=t.bMT(1,9,r.bitstreamFormats$))||null==e.payload?null:e.payload.totalElements)("hideGear",!1)("hidePagerWhenSinglePage",!0),t.R7$(8),t.JRh(t.bMT(9,11,"admin.registries.bitstream-formats.table.selected")),t.R7$(3),t.JRh(t.bMT(12,13,"admin.registries.bitstream-formats.table.id")),t.R7$(3),t.JRh(t.bMT(15,15,"admin.registries.bitstream-formats.table.name")),t.R7$(3),t.JRh(t.bMT(18,17,"admin.registries.bitstream-formats.table.mimetype")),t.R7$(3),t.JRh(t.bMT(21,19,"admin.registries.bitstream-formats.table.supportLevel.head")),t.R7$(3),t.Dyx(null==(a=t.bMT(25,21,r.bitstreamFormats$))||null==a.payload?null:a.payload.page)}}function O(i,d){1&i&&(t.j41(0,"div",8),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"admin.registries.bitstream-formats.no-items")," "))}function V(i,d){if(1&i){const e=t.RV6();t.j41(0,"button",18),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.deselectAll())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&i&&(t.R7$(),t.JRh(t.bMT(2,1,"admin.registries.bitstream-formats.table.deselect-all")))}function w(i,d){if(1&i){const e=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.deleteFormats())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&i&&(t.R7$(),t.JRh(t.bMT(2,1,"admin.registries.bitstream-formats.table.delete")))}const z=i=>({format:i}),R=[],H=[{path:"",providers:R,component:(()=>{class i{constructor(e,a,r,s){this.notificationsService=e,this.translateService=a,this.bitstreamFormatService=r,this.paginationService=s,this.pageConfig=Object.assign(new A.W,{id:"rbp",pageSize:20,pageSizeOptions:[20,40,60,80,100]})}deleteFormats(){this.bitstreamFormatService.clearBitStreamFormatRequests(),this.bitstreamFormatService.getSelectedBitstreamFormats().pipe((0,_.s)(1),(0,E.Z)(e=>e),(0,E.Z)(e=>this.bitstreamFormatService.delete(e.id).pipe((0,h.qD)(),(0,y.T)(a=>a.hasSucceeded))),(0,k.$)()).subscribe(e=>{const a=e.filter(s=>s),r=e.filter(s=>!s);a.length>0&&this.showNotification(!0,a.length),r.length>0&&this.showNotification(!1,r.length),this.deselectAll(),this.paginationService.resetPage(this.pageConfig.id)})}deselectAll(){this.bitstreamFormatService.deselectAllBitstreamFormats()}selectedBitstreamFormatIDs(){return this.bitstreamFormatService.getSelectedBitstreamFormats().pipe((0,y.T)(e=>e.map(a=>a.id)))}selectBitStreamFormat(e,a){a.target.checked?this.bitstreamFormatService.selectBitstreamFormat(e):this.bitstreamFormatService.deselectBitstreamFormat(e)}showNotification(e,a){const r="admin.registries.bitstream-formats.delete",s=e?"success":"failure",o=this.translateService.instant(`${r}.${s}.head`),l=this.translateService.instant(`${r}.${s}.amount`,{amount:a});e?this.notificationsService.success(o,l):this.notificationsService.error(o,l)}ngOnInit(){this.bitstreamFormats$=this.paginationService.getFindListOptions(this.pageConfig.id,this.pageConfig).pipe((0,U.n)(e=>this.bitstreamFormatService.findAll(e))),this.selectedBitstreamFormatIDs$=this.selectedBitstreamFormatIDs()}ngOnDestroy(){this.paginationService.clearPagination(this.pageConfig.id)}static{this.\u0275fac=function(a){return new(a||i)(t.rXU(g.I),t.rXU(m.c$),t.rXU(b.BitstreamFormatDataService),t.rXU(X.m))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["ds-bitstream-formats"]],standalone:!0,features:[t.aNF],decls:22,vars:22,consts:[[1,"container"],[1,"bitstream-formats","row"],[1,"col-12"],["id","header",1,"border-bottom","pb-2"],["id","description"],["id","create-new",1,"mb-2"],[1,"btn","btn-success",3,"routerLink"],[3,"paginationOptions","collectionSize","hideGear","hidePagerWhenSinglePage"],["role","alert",1,"alert","alert-info"],[1,"btn","btn-primary","deselect"],["type","submit",1,"btn","btn-danger","float-end"],[1,"table-responsive"],["id","formats",1,"table","table-striped","table-hover"],["scope","col"],[1,"sr-only"],[1,"form-label","mb-0"],["type","checkbox",3,"change","checked"],[3,"routerLink"],[1,"btn","btn-primary","deselect",3,"click"],["type","submit",1,"btn","btn-danger","float-end",3,"click"]],template:function(a,r){if(1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"p",4),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.j41(9,"p",5)(10,"a",6),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.DNE(13,N,26,23,"ds-pagination",7),t.nI1(14,"async"),t.DNE(15,O,3,3,"div",8),t.nI1(16,"async"),t.j41(17,"div"),t.DNE(18,V,3,3,"button",9),t.nI1(19,"async"),t.DNE(20,w,3,3,"button",10),t.nI1(21,"async"),t.k0s()()()()),2&a){let s,o,l,F;t.R7$(4),t.JRh(t.bMT(5,8,"admin.registries.bitstream-formats.head")),t.R7$(3),t.JRh(t.bMT(8,10,"admin.registries.bitstream-formats.description")),t.R7$(3),t.Y8G("routerLink","add"),t.R7$(),t.JRh(t.bMT(12,12,"admin.registries.bitstream-formats.create.new")),t.R7$(2),t.vxM((null==(s=t.bMT(14,14,r.bitstreamFormats$))||null==s.payload?null:s.payload.totalElements)>0?13:-1),t.R7$(2),t.vxM(0===(null==(o=t.bMT(16,16,r.bitstreamFormats$))||null==o.payload?null:o.payload.totalElements)?15:-1),t.R7$(3),t.vxM((null==(l=t.bMT(19,18,r.bitstreamFormats$))||null==l.payload||null==l.payload.page?null:l.payload.page.length)>0?18:-1),t.R7$(2),t.vxM((null==(F=t.bMT(21,20,r.bitstreamFormats$))||null==F.payload||null==F.payload.page?null:F.payload.page.length)>0?20:-1)}},dependencies:[C.Jj,L.e,u.Wk,m.h,m.D9],encapsulation:2})}}return i})()},{path:"add",resolve:{breadcrumb:T.S},providers:R,component:x,data:{breadcrumbKey:"admin.registries.bitstream-formats.create"}},{path:":id/edit",providers:R,component:(()=>{class i{constructor(e,a,r,s,o){this.route=e,this.router=a,this.notificationService=r,this.translateService=s,this.bitstreamFormatDataService=o}ngOnInit(){this.bitstreamFormatRD$=this.route.data.pipe((0,y.T)(e=>e.bitstreamFormat))}updateFormat(e){this.bitstreamFormatDataService.updateBitstreamFormat(e).pipe((0,h.qD)()).subscribe(a=>{a.hasSucceeded?(this.notificationService.success(this.translateService.get("admin.registries.bitstream-formats.edit.success.head"),this.translateService.get("admin.registries.bitstream-formats.edit.success.content")),this.router.navigate([(0,v.J)()])):this.notificationService.error("admin.registries.bitstream-formats.edit.failure.head","admin.registries.bitstream-formats.create.edit.content")})}static{this.\u0275fac=function(a){return new(a||i)(t.rXU(u.nX),t.rXU(u.Ix),t.rXU(g.I),t.rXU(m.c$),t.rXU(b.BitstreamFormatDataService))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["ds-edit-bitstream-format"]],standalone:!0,features:[t.aNF],decls:9,vars:11,consts:[[1,"container"],[1,"row"],[1,"col-12","mb-4"],["id","sub-header",1,"border-bottom","pb-2"],[3,"updatedFormat","bitstreamFormat"]],template:function(a,r){if(1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),t.EFF(4),t.nI1(5,"async"),t.nI1(6,"translate"),t.k0s(),t.j41(7,"ds-bitstream-format-form",4),t.nI1(8,"async"),t.bIt("updatedFormat",function(o){return r.updateFormat(o)}),t.k0s()()()()),2&a){let s,o;t.R7$(4),t.JRh(t.i5U(6,4,"admin.registries.bitstream-formats.edit.head",t.eq3(9,z,null==(s=t.bMT(5,2,r.bitstreamFormatRD$))?null:s.payload.shortDescription))),t.R7$(3),t.Y8G("bitstreamFormat",null==(o=t.bMT(8,7,r.bitstreamFormatRD$))?null:o.payload)}},dependencies:[C.Jj,B,m.h,m.D9],encapsulation:2})}}return i})(),resolve:{bitstreamFormat:(i,d,e=(0,t.WQX)(b.BitstreamFormatDataService))=>e.findById(i.params.id).pipe((0,h.qD)()),breadcrumb:T.S},data:{breadcrumbKey:"admin.registries.bitstream-formats.edit"}}]}}]);