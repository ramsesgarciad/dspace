"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[6958,8675],{47861:(G,j,a)=>{a.d(j,{o:()=>b});var c=a(54438),s=a(7673),_=a(80495),$=a(68018);let E=(()=>{class R{constructor(g){this.translationService=g,this.BREADCRUMB_SUFFIX=".breadcrumbs"}getBreadcrumbs(g,I){const T=g.split(":"),u=T[0]+this.BREADCRUMB_SUFFIX,M=T[1],A=T.length>3?T[T.length-1]:T[2];return(0,s.of)(A?[new _.Q(this.translationService.instant(u),I),new _.Q(M,`${I}${M}`),new _.Q(A,void 0)]:[new _.Q(this.translationService.instant(u),I),new _.Q(M,`${I}${M}`)])}static{this.\u0275fac=function(I){return new(I||R)(c.KVO($.c$))}}static{this.\u0275prov=c.jDH({token:R,factory:R.\u0275fac,providedIn:"root"})}}return R})();const b=(R,x,g=(0,c.WQX)(E))=>{const I=R.data.breadcrumbKey,T=R.paramMap.get("sourceId"),u=R.paramMap.get("topicId");let M=`${I}:${T}`;u&&(M+=`:${u}`);const A=x.url;return{provider:g,key:M,url:A.substring(0,A.indexOf(T))}}},8675:(G,j,a)=>{a.r(j),a.d(j,{SuggestionSourceDataService:()=>u});var c=a(9847),s=a(57775),_=a(81948),$=a(88667),E=a(20881),b=a(96443),R=a(3601),x=a(7094),g=a(54438),I=a(59640),T=a(21626);let u=(()=>{class M extends E.W{constructor(l,f,C,p,e,y,D,O){super("suggestionsources",l,f,p,e),this.requestService=l,this.rdbService=f,this.store=C,this.objectCache=p,this.halService=e,this.notificationsService=y,this.http=D,this.comparator=O,this.linkPath="suggestionsources",this.findAllData=new $.H(this.linkPath,l,f,p,e,this.responseMsToLive)}getSources(l={},f=!0,C=!0,...p){return this.findAll(l,f,C,...p)}getSource(l,f=!0,C=!0,...p){return this.findById(l,f,C,...p)}findAll(l={},f=!0,C=!0,...p){return this.findAllData.findAll(l,f,C,...p)}static{this.\u0275fac=function(f){return new(f||M)(g.KVO(R.B),g.KVO(s.o),g.KVO(I.il),g.KVO(_.$),g.KVO(x.Y),g.KVO(c.I),g.KVO(T.Qq),g.KVO(b.Y))}}static{this.\u0275prov=g.jDH({token:M,factory:M.\u0275fac,providedIn:"root"})}}return M})()},40149:(G,j,a)=>{a.d(j,{p:()=>W});var c=a(59640),s=a(96354),_=a(44030),$=a(39848),E=a(89777);function R(v,U){return(0,c.Mz)(v,P=>{if((0,E.a4)(P)&&(0,E.a4)(P[U]))return P[U]})}var x=a(25913);const g=(0,c.UX)("suggestionNotifications");const u=(0,c.Mz)(g,v=>v.qaTopic.loaded),M=(0,c.Mz)(g,v=>v.qaTopic.processing),A=(0,c.Mz)(g,v=>v.qaTopic.totalPages),l=(0,c.Mz)(g,v=>v.qaTopic.currentPage),f=(0,c.Mz)(g,v=>v.qaTopic.totalElements);const e=(0,c.Mz)(g,v=>v.qaSource.loaded),y=(0,c.Mz)(g,v=>v.qaSource.processing),D=(0,c.Mz)(g,v=>v.qaSource.totalPages),O=(0,c.Mz)(g,v=>v.qaSource.currentPage),X=(0,c.Mz)(g,v=>v.qaSource.totalElements);var L=a(54438);let W=(()=>{class v{constructor(P){this.store=P}getQualityAssuranceTopics(){return this.store.pipe((0,c.Lt)(function T(){return R(function I(){return R(x.I,"qaTopic")}(),"topics")}()))}isQualityAssuranceTopicsLoading(){return this.store.pipe((0,c.Lt)(u),(0,s.T)(P=>!P))}isQualityAssuranceTopicsLoaded(){return this.store.pipe((0,c.Lt)(u))}isQualityAssuranceTopicsProcessing(){return this.store.pipe((0,c.Lt)(M))}getQualityAssuranceTopicsTotalPages(){return this.store.pipe((0,c.Lt)(A))}getQualityAssuranceTopicsCurrentPage(){return this.store.pipe((0,c.Lt)(l))}getQualityAssuranceTopicsTotals(){return this.store.pipe((0,c.Lt)(f))}dispatchRetrieveQualityAssuranceTopics(P,B,N,z){this.store.dispatch(new $._v(P,B,N,z))}getQualityAssuranceSource(){return this.store.pipe((0,c.Lt)(function p(){return R(function C(){return R(x.I,"qaSource")}(),"source")}()))}isQualityAssuranceSourceLoading(){return this.store.pipe((0,c.Lt)(e),(0,s.T)(P=>!P))}isQualityAssuranceSourceLoaded(){return this.store.pipe((0,c.Lt)(e))}isQualityAssuranceSourceProcessing(){return this.store.pipe((0,c.Lt)(y))}getQualityAssuranceSourceTotalPages(){return this.store.pipe((0,c.Lt)(D))}getQualityAssuranceSourceCurrentPage(){return this.store.pipe((0,c.Lt)(O))}getQualityAssuranceSourceTotals(){return this.store.pipe((0,c.Lt)(X))}dispatchRetrieveQualityAssuranceSource(P,B){this.store.dispatch(new _.lZ(P,B))}static{this.\u0275fac=function(B){return new(B||v)(L.KVO(c.il))}}static{this.\u0275prov=L.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})()},22534:(G,j,a)=>{a.d(j,{j:()=>A});var c=a(60177),s=a(54438),_=a(68018),$=a(15202),E=a(2175);const b=l=>({param:l});function R(l,f){1&l&&(s.nrm(0,"ds-loading",2),s.nI1(1,"translate")),2&l&&s.FS9("message",s.bMT(1,1,"quality-assurance.loading"))}function x(l,f){1&l&&(s.j41(0,"div",5),s.EFF(1),s.nI1(2,"translate"),s.k0s()),2&l&&(s.R7$(),s.SpI(" ",s.bMT(2,1,"quality-assurance.noSource")," "))}function g(l,f){1&l&&(s.j41(0,"th",8),s.EFF(1),s.nI1(2,"translate"),s.k0s()),2&l&&(s.R7$(),s.JRh(s.bMT(2,1,"quality-assurance.table.last-event")))}function I(l,f){if(1&l&&(s.j41(0,"td"),s.EFF(1),s.nI1(2,"date"),s.k0s()),2&l){const C=s.XpG().$implicit;s.R7$(),s.JRh(s.i5U(2,1,C.lastEvent,"dd/MM/yyyy hh:mm"))}}function T(l,f){if(1&l){const C=s.RV6();s.j41(0,"tr")(1,"td"),s.EFF(2),s.k0s(),s.DNE(3,I,3,4,"td"),s.j41(4,"td")(5,"div",9)(6,"button",10),s.nI1(7,"translate"),s.bIt("click",function(){const e=s.eBV(C).$implicit,y=s.XpG(3);return s.Njj(y.sourceSelected.emit(e.id))}),s.j41(8,"span",11),s.EFF(9),s.k0s(),s.nrm(10,"i",12),s.k0s()()()()}if(2&l){const C=f.$implicit,p=s.XpG(3);s.R7$(2),s.JRh(C.id),s.R7$(),s.vxM(p.showLastEvent()?3:-1),s.R7$(3),s.FS9("title",s.i5U(7,4,"quality-assurance.source-list.button.detail",s.eq3(7,b,C.id))),s.R7$(3),s.JRh(C.total)}}function u(l,f){if(1&l&&(s.j41(0,"div",6)(1,"table",7)(2,"thead")(3,"tr")(4,"th",8),s.EFF(5),s.nI1(6,"translate"),s.k0s(),s.DNE(7,g,3,3,"th",8),s.j41(8,"th",8),s.EFF(9),s.nI1(10,"translate"),s.k0s()()(),s.j41(11,"tbody"),s.Z7z(12,T,11,9,"tr",null,s.fX1),s.k0s()()()),2&l){const C=s.XpG(2);s.R7$(5),s.JRh(s.bMT(6,3,"quality-assurance.table.source")),s.R7$(2),s.vxM(C.showLastEvent()?7:-1),s.R7$(2),s.JRh(s.bMT(10,5,"quality-assurance.table.actions")),s.R7$(3),s.Dyx(C.sources())}}function M(l,f){if(1&l){const C=s.RV6();s.j41(0,"ds-pagination",4),s.bIt("paginationChange",function(e){s.eBV(C);const y=s.XpG();return s.Njj(y.paginationChange.emit(e))}),s.DNE(1,x,3,3,"div",5)(2,u,14,7,"div",6),s.k0s()}if(2&l){let C,p;const e=s.XpG();s.Y8G("paginationOptions",e.paginationConfig())("collectionSize",e.totalElements())("hideGear",!1)("hideSortOptions",!0),s.R7$(),s.vxM(0===(null==(C=e.sources())?null:C.length)?1:-1),s.R7$(),s.vxM(0!==(null==(p=e.sources())?null:p.length)?2:-1)}}let A=(()=>{class l{constructor(){this.loading=(0,s.hFB)(!1),this.paginationConfig=(0,s.hFB)(),this.showLastEvent=(0,s.hFB)(),this.sources=(0,s.hFB)(),this.totalElements=(0,s.hFB)(),this.sourceSelected=(0,s.CGW)(),this.paginationChange=(0,s.CGW)()}static{this.\u0275fac=function(p){return new(p||l)}}static{this.\u0275cmp=s.VBU({type:l,selectors:[["ds-source-list"]],inputs:{loading:[1,"loading"],paginationConfig:[1,"paginationConfig"],showLastEvent:[1,"showLastEvent"],sources:[1,"sources"],totalElements:[1,"totalElements"]},outputs:{sourceSelected:"sourceSelected",paginationChange:"paginationChange"},standalone:!0,features:[s.aNF],decls:6,vars:4,consts:[[1,"col-12"],[1,"h4","border-bottom","pb-2"],[1,"container",3,"message"],[3,"paginationOptions","collectionSize","hideGear","hideSortOptions"],[3,"paginationChange","paginationOptions","collectionSize","hideGear","hideSortOptions"],["role","alert",1,"alert","alert-info","w-100","mb-2","mt-2"],[1,"table-responsive","mt-2"],["id","epeople",1,"table","table-striped","table-hover","table-bordered"],["scope","col"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm",3,"click","title"],[1,"badge","bg-info"],[1,"fas","fa-info","fa-fw"]],template:function(p,e){1&p&&(s.j41(0,"div",0)(1,"h2",1),s.EFF(2),s.nI1(3,"translate"),s.k0s(),s.DNE(4,R,2,3,"ds-loading",2)(5,M,3,6,"ds-pagination",3),s.k0s()),2&p&&(s.R7$(2),s.JRh(s.bMT(3,2,"quality-assurance.source")),s.R7$(2),s.vxM(e.loading()?4:5))},dependencies:[c.vh,E.e,$.v,_.h,_.D9]})}}return l})()},75170:(G,j,a)=>{a.d(j,{_:()=>C});var c=a(60177),s=a(89079),_=a(68018),$=a(84412),E=a(23294),b=a(25558),R=a(88141),x=a(96354),g=a(8675),I=a(31),T=a(4093),u=a(64972),M=a(8417),A=a(22534),l=a(54438),f=a(7901);let C=(()=>{class p{constructor(y,D,O,X){this.paginationService=y,this.router=D,this.route=O,this.suggestionSourceDataService=X,this.paginationConfig=Object.assign(new M.W,{id:"sl",pageSize:10,pageSizeOptions:[5,10,20,40,60]}),this.loading$=new $.t(!0),this.sources$=new $.t([]),this.totalElements$=new $.t(0),this.paginationService.getCurrentPagination(this.paginationConfig.id,this.paginationConfig).pipe((0,E.F)(),(0,b.n)(L=>this.retrieveSuggestionsSources(L.currentPage,L.pageSize)),(0,s.pQ)()).subscribe(L=>{console.log(L),this.sources$.next(L.page),this.totalElements$.next(L.pageInfo?.totalElements??0),this.loading$.next(!1)})}onSelect(y){this.router.navigate([y],{relativeTo:this.route})}retrieveSuggestionsSources(y,D){return this.loading$.next(!0),this.suggestionSourceDataService.getSources({elementsPerPage:D,currentPage:y}).pipe((0,T.qD)(),(0,R.M)(console.log),(0,x.T)(X=>X.hasSucceeded?X.payload:{page:[],pageInfo:null}))}static{this.\u0275fac=function(D){return new(D||p)(l.rXU(I.m),l.rXU(f.Ix),l.rXU(f.nX),l.rXU(g.SuggestionSourceDataService))}}static{this.\u0275cmp=l.VBU({type:p,selectors:[["ds-suggestion-sources"]],standalone:!0,features:[l.aNF],decls:11,vars:16,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom","pb-2"],[3,"type","content"],[3,"sourceSelected","loading","paginationConfig","showLastEvent","sources","totalElements"]],template:function(D,O){1&D&&(l.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),l.EFF(4),l.nI1(5,"translate"),l.k0s(),l.nrm(6,"ds-alert",4),l.k0s()(),l.j41(7,"ds-source-list",5),l.nI1(8,"async"),l.nI1(9,"async"),l.nI1(10,"async"),l.bIt("sourceSelected",function(L){return O.onSelect(L)}),l.k0s()()),2&D&&(l.R7$(4),l.JRh(l.bMT(5,8,"publication-claim.title")),l.R7$(2),l.Y8G("type","alert-info")("content","publication-claim.source.description"),l.R7$(),l.Y8G("loading",l.bMT(8,10,O.loading$))("paginationConfig",O.paginationConfig)("showLastEvent",!1)("sources",l.bMT(9,12,O.sources$))("totalElements",l.bMT(10,14,O.totalElements$)))},dependencies:[u.C,c.Jj,A.j,_.D9]})}}return p})()},79479:(G,j,a)=>{a.d(j,{B:()=>s});var c=a(54438);let s=(()=>{class _{resolve(E,b){return{pageId:E.queryParams.pageId,pageSize:parseInt(E.queryParams.pageSize,10),currentPage:parseInt(E.queryParams.page,10)}}static{this.\u0275fac=function(b){return new(b||_)}}static{this.\u0275prov=c.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})()},66902:(G,j,a)=>{a.d(j,{k:()=>rn});var c=a(60177),s=a(7901),_=a(58003),$=a(68018),E=a(84412),b=a(7673),R=a(22806),x=a(84572),g=a(88141),I=a(96354),T=a(96697),u=a(25558),M=a(23294),A=a(73028),l=a(31943),f=a(67018),C=a(78544),p=a(70998),e=a(11873),y=a(6170),D=a(36343),O=a(61206),X=a(78130),L=a(31),W=a(61880),v=a(4093),U=a(92767),P=a(64972),B=a(79104),N=a(89777),z=a(15202),Y=a(9847),q=a(2175),m=a(8417),k=a(4600),t=a(54438),F=a(89417),Q=a(40940),H=a(94314),w=a(79669),et=a(76089),Z=a(30726),it=a(18155);const at=i=>({repeatable:!1,listId:i});function st(i,d){if(1&i&&(t.j41(0,"div")(1,"small"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",4)(5,"div",5)(6,"a",6),t.EFF(7),t.k0s()()()()),2&i){const n=t.XpG();t.R7$(2),t.JRh(t.bMT(3,3,n.labelPrefix+n.label+".bountToLocal")),t.R7$(4),t.Y8G("routerLink","/items/{{externalSourceEntry.projectId}}"),t.R7$(),t.SpI(" ",n.externalSourceEntry.projectTitle," ")}}function ot(i,d){1&i&&(t.nrm(0,"ds-loading",13),t.nI1(1,"translate")),2&i&&t.FS9("message",t.bMT(1,1,"loading.search-results"))}function rt(i,d){if(1&i){const n=t.RV6();t.j41(0,"ds-search-results",17),t.nI1(1,"async"),t.bIt("deselectObject",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.deselectEntity())})("selectObject",function(o){t.eBV(n);const h=t.XpG();return t.Njj(h.selectEntity(o))}),t.k0s()}if(2&i){const n=t.XpG();t.Y8G("searchResults",t.bMT(1,10,n.localEntitiesRD$))("sortConfig",null==n.searchOptions?null:n.searchOptions.sort)("searchConfig",n.searchOptions)("selectable",!0)("disableHeader",!0)("hidePaginationDetail",!1)("selectionConfig",t.eq3(12,at,n.entityListId))("showCsvExport",!1)("linkType",n.linkTypes.ExternalLink)("context",n.context)}}function lt(i,d){if(1&i&&(t.j41(0,"div")(1,"ds-alert",18)(2,"p",19),t.EFF(3),t.nI1(4,"translate"),t.k0s()()()),2&i){const n=t.XpG();t.R7$(),t.Y8G("type","alert-info"),t.R7$(2),t.JRh(t.bMT(4,2,n.labelPrefix+n.label+".notFound"))}}var J=function(i){return i.None="None",i.LocalEntity="LocalEntity",i.LocalAuthority="LocalAuthority",i.NewEntity="NewEntity",i.NewAuthority="NewAuthority",i}(J||{});let ct=(()=>{class i{constructor(n,r,o){this.modal=n,this.searchService=r,this.selectService=o,this.pageSize=3,this.labelPrefix="quality-assurance.event.modal.",this.configuration="funding",this.isLoading$=(0,b.of)(!0),this.context=Q.o.EntitySearchModalWithNameVariants,this.entityListId="notifications-project-bound",this.authorityListId="notifications-project-bound-authority",this.importType=J,this.linkTypes=w.n,this.selectedImportType=J.None,this.importedObject=new t.bkB,this.subs=[]}ngOnInit(){this.pagination=Object.assign(new m.W,{id:"notifications-project-bound",pageSize:this.pageSize}),this.projectTitle=null!==this.externalSourceEntry.projectTitle?this.externalSourceEntry.projectTitle:this.externalSourceEntry.event.message.title,this.searchOptions=Object.assign(new Z.C({configuration:this.configuration,query:this.projectTitle,pagination:this.pagination})),this.localEntitiesRD$=this.searchService.search(this.searchOptions),this.subs.push(this.localEntitiesRD$.subscribe(()=>this.isLoading$=(0,b.of)(!1)))}close(){this.deselectAllLists(),this.modal.close()}search(n){if((0,N.hj)(n)){const r=/[:]/g;this.isLoading$=(0,b.of)(!0),this.searchOptions=Object.assign(new Z.C({configuration:this.configuration,query:n&&n.replace(r,""),pagination:this.pagination})),this.localEntitiesRD$=this.searchService.search(this.searchOptions),this.subs.push(this.localEntitiesRD$.subscribe(()=>this.isLoading$=(0,b.of)(!1)))}}bound(){void 0!==this.selectedEntity&&this.importedObject.emit(this.selectedEntity),this.selectedImportType=J.None,this.deselectAllLists(),this.close()}deselectEntity(){this.selectedEntity=void 0,this.selectedImportType===J.LocalEntity&&(this.selectedImportType=J.None)}selectEntity(n){this.selectedEntity=n,this.selectedImportType=J.LocalEntity}deselectAllLists(){this.selectService.deselectAll(this.entityListId),this.selectService.deselectAll(this.authorityListId)}ngOnDestroy(){this.deselectAllLists(),this.subs.filter(n=>(0,N.a4)(n)).forEach(n=>n.unsubscribe())}static{this.\u0275fac=function(r){return new(r||i)(t.rXU(_.Lw),t.rXU(H.S),t.rXU(et.K))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["ds-project-entry-import-modal"]],inputs:{externalSourceEntry:"externalSourceEntry"},standalone:!0,features:[t.aNF],decls:45,vars:44,consts:[[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mb-3"],[1,"text-truncate"],["target","_blank",3,"routerLink"],["id","project-entities",1,"mb-3"],["id","project-search",1,"input-group","mb-3"],["type","text","aria-label","","aria-describedby","",1,"form-control",3,"keyup.enter","ngModelChange","ngModel","placeholder"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary",3,"click","dsBtnDisabled"],["type","button",1,"btn","btn-primary",3,"click","dsBtnDisabled"],[3,"message"],[3,"searchResults","sortConfig","searchConfig","selectable","disableHeader","hidePaginationDetail","selectionConfig","showCsvExport","linkType","context"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[3,"deselectObject","selectObject","searchResults","sortConfig","searchConfig","selectable","disableHeader","hidePaginationDetail","selectionConfig","showCsvExport","linkType","context"],[3,"type"],[1,"lead","mb-0"]],template:function(r,o){if(1&r&&(t.j41(0,"div",0)(1,"h4",1),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return o.close()}),t.k0s()(),t.j41(5,"div",3)(6,"small"),t.EFF(7),t.nI1(8,"translate"),t.k0s(),t.j41(9,"div",4)(10,"div",5)(11,"a",6),t.EFF(12),t.k0s()()(),t.DNE(13,st,8,5,"div"),t.j41(14,"h4"),t.EFF(15),t.nI1(16,"translate"),t.k0s(),t.j41(17,"div",7)(18,"div",8)(19,"input",9),t.nI1(20,"translate"),t.bIt("keyup.enter",function(){return o.search(o.projectTitle)}),t.mxI("ngModelChange",function(S){return t.DH7(o.projectTitle,S)||(o.projectTitle=S),S}),t.k0s(),t.j41(21,"div",10)(22,"button",11),t.bIt("click",function(){return o.projectTitle=""}),t.EFF(23),t.nI1(24,"translate"),t.k0s(),t.j41(25,"button",12),t.bIt("click",function(){return o.search(o.projectTitle)}),t.EFF(26),t.nI1(27,"translate"),t.k0s()()(),t.DNE(28,ot,2,3,"ds-loading",13),t.nI1(29,"async"),t.DNE(30,rt,2,14,"ds-search-results",14),t.nI1(31,"async"),t.nI1(32,"async"),t.DNE(33,lt,5,4,"div"),t.nI1(34,"async"),t.nI1(35,"async"),t.k0s()(),t.j41(36,"div",15)(37,"div")(38,"button",16),t.bIt("click",function(){return o.close()}),t.EFF(39),t.nI1(40,"translate"),t.k0s()(),t.j41(41,"div")(42,"button",12),t.bIt("click",function(){return o.bound()}),t.EFF(43),t.nI1(44,"translate"),t.k0s()()()),2&r){let h,S;t.R7$(2),t.JRh(t.bMT(3,18,o.labelPrefix+o.label+".title")),t.R7$(5),t.JRh(t.bMT(8,20,o.labelPrefix+o.label+".publication")),t.R7$(4),t.Y8G("routerLink","/items/{{(externalSourceEntry.event.target|async)?.payload?.id}}"),t.R7$(),t.SpI(" ",o.externalSourceEntry.title," "),t.R7$(),t.vxM(o.externalSourceEntry.projectTitle?13:-1),t.R7$(2),t.JRh(t.bMT(16,22,o.labelPrefix+o.label+".select")),t.R7$(4),t.FS9("placeholder",t.bMT(20,24,o.labelPrefix+o.label+".placeholder")),t.R50("ngModel",o.projectTitle),t.R7$(3),t.Y8G("dsBtnDisabled",""===o.projectTitle),t.R7$(),t.JRh(t.bMT(24,26,o.labelPrefix+o.label+".clear")),t.R7$(2),t.Y8G("dsBtnDisabled",""===o.projectTitle),t.R7$(),t.JRh(t.bMT(27,28,o.labelPrefix+o.label+".search")),t.R7$(2),t.vxM(t.bMT(29,30,o.isLoading$)?28:-1),t.R7$(2),t.vxM((null==(h=t.bMT(31,32,o.localEntitiesRD$))||null==h.payload||null==h.payload.page?null:h.payload.page.length)>0&&!0!==t.bMT(32,34,o.isLoading$)?30:-1),t.R7$(3),t.vxM((null==(S=t.bMT(34,36,o.localEntitiesRD$))||null==S.payload||null==S.payload.page?null:S.payload.page.length)<1&&!0!==t.bMT(35,38,o.isLoading$)?33:-1),t.R7$(6),t.JRh(t.bMT(40,40,o.labelPrefix+o.label+".cancel")),t.R7$(3),t.Y8G("dsBtnDisabled",o.selectedImportType===o.importType.None),t.R7$(),t.JRh(t.bMT(44,42,o.labelPrefix+o.label+".bound"))}},dependencies:[P.C,c.Jj,B.A,F.YN,F.me,F.BC,F.vS,s.Wk,z.v,it.N,$.h,$.D9],styles:[".modal-footer[_ngcontent-%COMP%]{justify-content:space-between}"]})}}return i})();var ut=a(13817);function pt(i,d){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const n=t.XpG().$implicit,r=t.XpG();t.R7$(),t.SpI(" ",r[n]," ")}}function dt(i,d){if(1&i&&(t.DNE(0,pt,2,1,"span"),t.nrm(1,"br")),2&i){const n=d.$implicit,r=t.XpG();t.vxM(r[n]?0:-1)}}function _t(i,d){if(1&i&&t.Z7z(0,dt,2,1,"br",null,t.fX1),2&i){const n=t.XpG(2);t.Dyx(n.properties)}}function mt(i,d){if(1&i&&(t.DNE(0,_t,2,0),t.nI1(1,"async")),2&i){let n;const r=t.XpG();t.vxM((n=t.bMT(1,1,r.getEPersonData$()))?0:-1,n)}}let ht=(()=>{class i{constructor(n){this.ePersonDataService=n}getEPersonData$(){if(this.ePersonId)return this.ePersonDataService.findById(this.ePersonId,!0).pipe((0,v.qD)(),(0,v.Bo)())}static{this.\u0275fac=function(r){return new(r||i)(t.rXU(ut.EPersonDataService))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["ds-eperson-data"]],inputs:{ePersonId:"ePersonId",properties:"properties"},standalone:!0,features:[t.aNF],decls:1,vars:1,template:function(r,o){1&r&&t.DNE(0,mt,2,3),2&r&&t.vxM(o.ePersonId?0:-1)},dependencies:[c.Jj]})}}return i})();const tt=(i,d)=>({topic:i,source:d}),nt=i=>["/items",i],gt=()=>["email"];function vt(i,d){if(1&i&&(t.j41(0,"ds-alert",9),t.nrm(1,"span",12),t.nI1(2,"translate"),t.k0s()),2&i){const n=t.XpG();t.Y8G("type","alert-info"),t.R7$(),t.Y8G("innerHTML",t.i5U(2,2,"quality-assurance.events.description",t.l_i(5,tt,n.selectedTopicName,n.sourceId)),t.npT)}}function ft(i,d){if(1&i&&(t.j41(0,"ds-alert",9),t.nrm(1,"span",12),t.nI1(2,"translate"),t.j41(3,"a",13),t.EFF(4),t.nI1(5,"async"),t.k0s()()),2&i){const n=t.XpG();t.Y8G("type","alert-info"),t.R7$(),t.Y8G("innerHTML",t.i5U(2,4,"quality-assurance.events.description-with-topic-and-target",t.l_i(9,tt,n.selectedTopicName,n.sourceId)),t.npT),t.R7$(2),t.Y8G("routerLink",n.itemPageUrl),t.R7$(),t.JRh(t.bMT(5,7,n.getTargetItemTitle()))}}function Et(i,d){1&i&&(t.nrm(0,"ds-loading",10),t.nI1(1,"translate")),2&i&&t.FS9("message",t.bMT(1,1,"quality-assurance.loading"))}function Ct(i,d){1&i&&(t.j41(0,"div",15),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"quality-assurance.noEvents")," "))}function yt(i,d){1&i&&(t.j41(0,"th",20),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"quality-assurance.event.table.project-details")," "))}function bt(i,d){1&i&&(t.j41(0,"th",20),t.EFF(1),t.nI1(2,"translate"),t.k0s(),t.j41(3,"th",20),t.EFF(4),t.nI1(5,"translate"),t.k0s()),2&i&&(t.R7$(),t.SpI(" ",t.bMT(2,2,"quality-assurance.event.table.reasons")," "),t.R7$(3),t.SpI(" ",t.bMT(5,4,"quality-assurance.event.table.person-who-requested")," "))}function Tt(i,d){if(1&i&&(t.j41(0,"a",22),t.EFF(1),t.k0s()),2&i){const n=t.XpG().$implicit;t.Y8G("routerLink",t.eq3(2,nt,null==n||null==n.target?null:n.target.id)),t.R7$(),t.JRh(n.title)}}function Rt(i,d){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const n=t.XpG().$implicit;t.R7$(),t.JRh(n.title)}}function It(i,d){if(1&i&&(t.j41(0,"div")(1,"span",25),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"span",26)(5,"a",27),t.EFF(6),t.k0s()()()),2&i){const n=t.XpG().$implicit;t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.table.event.message.serviceUrl")),t.R7$(2),t.Y8G("title",n.event.message.serviceId),t.R7$(),t.Y8G("href",n.event.message.serviceId,t.B4B),t.R7$(),t.JRh(n.event.message.serviceId)}}function Mt(i,d){if(1&i&&(t.j41(0,"div",23)(1,"span",25),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"span",28)(5,"a",27),t.EFF(6),t.k0s()()()),2&i){const n=t.XpG().$implicit;t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.table.event.message.link")),t.R7$(2),t.Y8G("title",n.event.message.href),t.R7$(),t.Y8G("href",n.event.message.href,t.B4B),t.R7$(),t.JRh(n.event.message.href)}}function St(i,d){if(1&i&&(t.j41(0,"a",31),t.EFF(1),t.k0s()),2&i){const n=t.XpG(2).$implicit,r=t.XpG(3);t.FS9("href",r.getPIDHref(n.event.message),t.B4B),t.R7$(),t.SpI(" ",n.event.message.value," ")}}function jt(i,d){if(1&i&&(t.j41(0,"span",30),t.EFF(1),t.k0s()),2&i){const n=t.XpG(2).$implicit;t.R7$(),t.JRh(n.event.message.value)}}function Ft(i,d){if(1&i&&(t.j41(0,"td")(1,"p")(2,"span",29),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.EFF(5,"\xa0"),t.j41(6,"span",30),t.EFF(7),t.k0s()(),t.j41(8,"p")(9,"span",29),t.EFF(10),t.nI1(11,"translate"),t.k0s(),t.nrm(12,"br"),t.DNE(13,St,2,2,"a",31)(14,jt,2,1,"span",30),t.k0s()()),2&i){const n=t.XpG().$implicit,r=t.XpG(3);t.R7$(3),t.JRh(t.bMT(4,4,"quality-assurance.event.table.pidtype")),t.R7$(4),t.JRh(n.event.message.type),t.R7$(3),t.JRh(t.bMT(11,6,"quality-assurance.event.table.pidvalue")),t.R7$(3),t.vxM(r.hasPIDHref(n.event.message)?13:14)}}function $t(i,d){if(1&i&&(t.j41(0,"td")(1,"p")(2,"span",29),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.nrm(5,"br"),t.j41(6,"span",30),t.EFF(7),t.k0s()()()),2&i){const n=t.XpG().$implicit;t.R7$(3),t.SpI("",t.bMT(4,2,"quality-assurance.event.table.subjectValue")," "),t.R7$(4),t.JRh(n.event.message.value)}}function At(i,d){1&i&&t.nrm(0,"i",35)}function Pt(i,d){1&i&&t.nrm(0,"i",36)}function xt(i,d){if(1&i){const n=t.RV6();t.j41(0,"td")(1,"p",32)(2,"span",29),t.EFF(3),t.nI1(4,"translate"),t.k0s(),t.nrm(5,"br"),t.j41(6,"span",33),t.EFF(7),t.k0s()(),t.j41(8,"button",34),t.bIt("click",function(){t.eBV(n);const o=t.XpG(4);return t.Njj(o.showMore=!o.showMore)}),t.DNE(9,At,1,0,"i",35)(10,Pt,1,0,"i",36),t.EFF(11),t.nI1(12,"translate"),t.k0s()()}if(2&i){const n=t.XpG().$implicit,r=t.XpG(3);t.R7$(),t.AVh("show",r.showMore),t.R7$(2),t.JRh(t.bMT(4,7,"quality-assurance.event.table.abstract")),t.R7$(4),t.JRh(n.event.message.abstract),t.R7$(2),t.vxM(r.showMore?-1:9),t.R7$(),t.vxM(r.showMore?10:-1),t.R7$(),t.SpI(" ",t.bMT(12,9,r.showMore?"quality-assurance.event.table.less":"quality-assurance.event.table.more")," ")}}function Dt(i,d){if(1&i&&(t.j41(0,"span")(1,"span"),t.EFF(2),t.k0s(),t.nrm(3,"br"),t.k0s()),2&i){const n=t.XpG(2).$implicit;t.R7$(2),t.JRh(n.event.message.reason)}}function Ot(i,d){if(1&i&&(t.j41(0,"span"),t.nrm(1,"ds-eperson-data",37),t.k0s()),2&i){const n=t.XpG(2).$implicit;t.R7$(),t.Y8G("ePersonId",n.event.originalId)("properties",t.lJ4(2,gt))}}function Qt(i,d){if(1&i&&(t.j41(0,"td")(1,"p"),t.DNE(2,Dt,4,1,"span"),t.k0s()(),t.j41(3,"td")(4,"p"),t.DNE(5,Ot,2,3,"span"),t.k0s()()),2&i){const n=t.XpG().$implicit;t.R7$(2),t.vxM(n.event.message?2:-1),t.R7$(3),t.vxM(n.event.originalId?5:-1)}}function Lt(i,d){if(1&i&&(t.j41(0,"span")(1,"span",29),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.EFF(4,"\xa0"),t.j41(5,"span",30),t.EFF(6),t.k0s(),t.nrm(7,"br"),t.k0s()),2&i){const n=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"quality-assurance.event.table.acronym")),t.R7$(4),t.JRh(n.event.message.acronym)}}function Bt(i,d){if(1&i&&(t.j41(0,"span")(1,"span",29),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.EFF(4,"\xa0"),t.j41(5,"span",30),t.EFF(6),t.k0s(),t.nrm(7,"br"),t.k0s()),2&i){const n=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"quality-assurance.event.table.code")),t.R7$(4),t.JRh(n.event.message.code)}}function kt(i,d){if(1&i&&(t.j41(0,"span")(1,"span",29),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.EFF(4,"\xa0"),t.j41(5,"span",30),t.EFF(6),t.k0s(),t.nrm(7,"br"),t.k0s()),2&i){const n=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"quality-assurance.event.table.funder")),t.R7$(4),t.JRh(n.event.message.funder)}}function Gt(i,d){if(1&i&&(t.j41(0,"span")(1,"span",29),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.EFF(4,"\xa0"),t.j41(5,"span",30),t.EFF(6),t.k0s(),t.nrm(7,"br"),t.k0s()),2&i){const n=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"quality-assurance.event.table.fundingProgram")),t.R7$(4),t.JRh(n.event.message.fundingProgram)}}function Xt(i,d){if(1&i&&(t.j41(0,"span")(1,"span",29),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.EFF(4,"\xa0"),t.j41(5,"span",30),t.EFF(6),t.k0s()()),2&i){const n=t.XpG(2).$implicit;t.R7$(2),t.JRh(t.bMT(3,2,"quality-assurance.event.table.jurisdiction")),t.R7$(4),t.JRh(n.event.message.jurisdiction)}}function Ut(i,d){if(1&i&&(t.j41(0,"a",38),t.EFF(1),t.k0s()),2&i){const n=t.XpG(2).$implicit;t.FS9("title",n.projectTitle),t.Y8G("routerLink",t.eq3(3,nt,n.projectId)),t.R7$(),t.SpI("",n.handle," ")}}function Nt(i,d){if(1&i){const n=t.RV6();t.j41(0,"button",42),t.nI1(1,"translate"),t.bIt("click",function(o){t.eBV(n);const h=t.XpG(2).$implicit;return t.XpG(3).openModalLookup(h),t.Njj(o.stopPropagation())}),t.nrm(2,"i",43),t.k0s()}if(2&i){const n=t.XpG(2).$implicit;t.Y8G("dsBtnDisabled",n.isRunning),t.BMQ("aria-label",t.bMT(1,2,"quality-assurance.event.modal.project.select"))}}function Jt(i,d){if(1&i){const n=t.RV6();t.j41(0,"button",44),t.nI1(1,"translate"),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2).$implicit,h=t.XpG(3);return t.Njj(h.removeProject(o))}),t.nrm(2,"i",45),t.k0s()}if(2&i){const n=t.XpG(2).$implicit;t.Y8G("dsBtnDisabled",n.isRunning),t.BMQ("aria-label",t.bMT(1,2,"quality-assurance.event.modal.project.remove"))}}function Vt(i,d){if(1&i&&(t.j41(0,"td")(1,"p"),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"p")(5,"span",29),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.nrm(8,"br"),t.j41(9,"a",31),t.EFF(10),t.k0s()(),t.j41(11,"p"),t.DNE(12,Lt,8,4,"span")(13,Bt,8,4,"span")(14,kt,8,4,"span")(15,Gt,8,4,"span")(16,Xt,7,4,"span"),t.k0s(),t.nrm(17,"hr"),t.j41(18,"div"),t.EFF(19),t.nI1(20,"translate"),t.DNE(21,Ut,2,5,"a",38),t.j41(22,"div",39),t.DNE(23,Nt,3,4,"button",40)(24,Jt,3,4,"button",41),t.k0s()()()),2&i){const n=t.XpG().$implicit,r=t.XpG(3);t.R7$(2),t.SpI(" ",t.bMT(3,15,"quality-assurance.event.table.suggestedProject")," "),t.R7$(4),t.JRh(t.bMT(7,17,"quality-assurance.event.table.project")),t.R7$(3),t.FCK("href","",r.sourceUrlForProjectSearch,"",n.event.message.sourceId,"",t.B4B),t.R7$(),t.JRh(n.event.message.title),t.R7$(2),t.vxM(n.event.message.acronym?12:-1),t.R7$(),t.vxM(n.event.message.code?13:-1),t.R7$(),t.vxM(n.event.message.funder?14:-1),t.R7$(),t.vxM(n.event.message.fundingProgram?15:-1),t.R7$(),t.vxM(n.event.message.jurisdiction?16:-1),t.R7$(3),t.SpI(" ",t.bMT(20,19,n.hasProject?"quality-assurance.event.project.found":"quality-assurance.event.project.notFound")," "),t.R7$(2),t.vxM(n.hasProject?21:-1),t.R7$(2),t.vxM(n.hasProject?-1:23),t.R7$(),t.vxM(n.hasProject?24:-1)}}function zt(i,d){if(1&i){const n=t.RV6();t.j41(0,"button",50),t.nI1(1,"translate"),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2).$implicit,h=t.XpG(3),S=t.sdS(19);return t.Njj(h.modalChoice("ACCEPTED",o,S))}),t.nrm(3,"i",51),t.k0s()}if(2&i){const n=t.XpG(2).$implicit;t.FS9("ngbTooltip",t.bMT(1,3,"quality-assurance.event.action.import")),t.Y8G("dsBtnDisabled",n.isRunning),t.BMQ("aria-label",t.bMT(2,5,"quality-assurance.event.action.import"))}}function Wt(i,d){if(1&i){const n=t.RV6();t.j41(0,"button",50),t.nI1(1,"translate"),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2).$implicit,h=t.XpG(3);return t.Njj(h.executeAction("ACCEPTED",o))}),t.nrm(3,"i",51),t.k0s()}if(2&i){const n=t.XpG(2).$implicit;t.FS9("ngbTooltip",t.bMT(1,3,"quality-assurance.event.action.accept")),t.Y8G("dsBtnDisabled",n.isRunning),t.BMQ("aria-label",t.bMT(2,5,"quality-assurance.event.action.accept"))}}function Kt(i,d){if(1&i){const n=t.RV6();t.j41(0,"button",52),t.nI1(1,"translate"),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2).$implicit,h=t.XpG(3),S=t.sdS(23);return t.Njj(h.openModal("REJECTED",o,S))}),t.nrm(3,"i",45),t.k0s()}if(2&i){const n=t.XpG(2).$implicit;t.FS9("ngbTooltip",t.bMT(1,3,"quality-assurance.event.action.reject")),t.Y8G("dsBtnDisabled",n.isRunning),t.BMQ("aria-label",t.bMT(2,5,"quality-assurance.event.action.reject"))}}function Yt(i,d){if(1&i){const n=t.RV6();t.j41(0,"button",52),t.nI1(1,"translate"),t.nI1(2,"translate"),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2).$implicit,h=t.XpG(3),S=t.sdS(25);return t.Njj(h.openModal("UNDO",o,S))}),t.nrm(3,"i",45),t.k0s()}if(2&i){const n=t.XpG(2).$implicit;t.FS9("ngbTooltip",t.bMT(1,3,"quality-assurance.event.action.undo")),t.Y8G("dsBtnDisabled",n.isRunning),t.BMQ("aria-label",t.bMT(2,5,"quality-assurance.event.action.undo"))}}function qt(i,d){if(1&i){const n=t.RV6();t.j41(0,"div",24),t.DNE(1,zt,4,7,"button",46)(2,Wt,4,7,"button",46),t.j41(3,"button",47),t.nI1(4,"translate"),t.nI1(5,"translate"),t.bIt("click",function(){t.eBV(n);const o=t.XpG().$implicit,h=t.XpG(3),S=t.sdS(21);return t.Njj(h.openModal("DISCARDED",o,S))}),t.nrm(6,"i",48),t.k0s(),t.DNE(7,Kt,4,7,"button",49),t.nI1(8,"async"),t.DNE(9,Yt,4,7,"button",49),t.nI1(10,"async"),t.k0s()}if(2&i){const n=t.XpG().$implicit,r=t.XpG(3);t.R7$(),t.vxM(-1!==r.showTopic.indexOf("/PROJECT")?1:-1),t.R7$(),t.vxM(-1===r.showTopic.indexOf("/PROJECT")?2:-1),t.R7$(),t.FS9("ngbTooltip",t.bMT(4,7,"quality-assurance.event.action.ignore")),t.Y8G("dsBtnDisabled",n.isRunning),t.BMQ("aria-label",t.bMT(5,9,"quality-assurance.event.action.ignore")),t.R7$(4),t.vxM(t.bMT(8,11,r.isAdmin$)?7:-1),t.R7$(2),t.vxM(!1===t.bMT(10,13,r.isAdmin$)?9:-1)}}function Ht(i,d){if(1&i){const n=t.RV6();t.j41(0,"div",24)(1,"button",52),t.nI1(2,"translate"),t.nI1(3,"translate"),t.bIt("click",function(){t.eBV(n);const o=t.XpG().$implicit,h=t.XpG(3),S=t.sdS(25);return t.Njj(h.openModal("UNDO",o,S))}),t.nrm(4,"i",45),t.k0s()()}if(2&i){const n=t.XpG().$implicit;t.R7$(),t.FS9("ngbTooltip",t.bMT(2,3,"quality-assurance.event.action.undo")),t.Y8G("dsBtnDisabled",n.isRunning),t.BMQ("aria-label",t.bMT(3,5,"quality-assurance.event.action.undo"))}}function wt(i,d){if(1&i&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.DNE(4,Tt,2,4,"a",22)(5,Rt,2,1,"span")(6,It,7,6,"div")(7,Mt,7,6,"div",23),t.k0s(),t.DNE(8,Ft,15,8,"td")(9,$t,8,4,"td")(10,xt,13,11,"td")(11,Qt,6,2)(12,Vt,25,21,"td"),t.j41(13,"td"),t.DNE(14,qt,11,15,"div",24),t.nI1(15,"async"),t.DNE(16,Ht,5,7,"div",24),t.nI1(17,"async"),t.k0s()()),2&i){const n=d.$implicit,r=t.XpG(3);t.R7$(2),t.SpI("",null==n||null==n.event?null:n.event.trust," "),t.R7$(2),t.vxM(null!=n&&n.target?4:-1),t.R7$(),t.vxM(null!=n&&n.target?-1:5),t.R7$(),t.vxM(null!=n&&null!=n.event&&null!=n.event.message&&n.event.message.serviceId?6:-1),t.R7$(),t.vxM(null!=n&&null!=n.event&&null!=n.event.message&&n.event.message.href?7:-1),t.R7$(),t.vxM(-1!==r.showTopic.indexOf("/PID")?8:-1),t.R7$(),t.vxM(-1!==r.showTopic.indexOf("/SUBJECT")?9:-1),t.R7$(),t.vxM(-1!==r.showTopic.indexOf("/ABSTRACT")?10:-1),t.R7$(),t.vxM(-1!==r.showTopic.indexOf("/REINSTATE")||-1!==r.showTopic.indexOf("/WITHDRAWN")?11:-1),t.R7$(),t.vxM(-1!==r.showTopic.indexOf("/PROJECT")?12:-1),t.R7$(2),t.vxM(t.bMT(15,12,r.isAdmin$)||!r.isReinstateWithdrawnRequest?14:-1),t.R7$(2),t.vxM(!0!==t.bMT(17,14,r.isAdmin$)&&r.isReinstateWithdrawnRequest?16:-1)}}function Zt(i,d){if(1&i&&(t.j41(0,"div",16)(1,"table",17)(2,"thead")(3,"tr")(4,"th",18),t.EFF(5),t.nI1(6,"translate"),t.k0s(),t.j41(7,"th",19),t.EFF(8),t.nI1(9,"translate"),t.k0s(),t.DNE(10,yt,3,3,"th",20)(11,bt,6,6),t.j41(12,"th",21),t.EFF(13),t.nI1(14,"translate"),t.k0s()()(),t.j41(15,"tbody"),t.Z7z(16,wt,18,16,"tr",null,t.fX1),t.nI1(18,"async"),t.k0s()()()),2&i){const n=t.XpG(2);t.R7$(5),t.JRh(t.bMT(6,5,"quality-assurance.event.table.trust")),t.R7$(3),t.JRh(t.bMT(9,7,"quality-assurance.event.table.publication")),t.R7$(2),t.vxM(n.hasDetailColumn()&&-1!==n.showTopic.indexOf("/PROJECT")?10:-1),t.R7$(),t.vxM(!n.hasDetailColumn()||-1===n.showTopic.indexOf("/REINSTATE")&&-1===n.showTopic.indexOf("/WITHDRAWN")?-1:11),t.R7$(2),t.JRh(t.bMT(14,9,"quality-assurance.event.table.actions")),t.R7$(3),t.Dyx(t.bMT(18,11,n.eventsUpdated$))}}function tn(i,d){if(1&i){const n=t.RV6();t.j41(0,"ds-pagination",14),t.nI1(1,"async"),t.bIt("paginationChange",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.getQualityAssuranceEvents())}),t.qex(2),t.DNE(3,Ct,3,3,"div",15),t.nI1(4,"async"),t.DNE(5,Zt,19,13,"div",16),t.nI1(6,"async"),t.bVm(),t.k0s()}if(2&i){let n,r;const o=t.XpG();t.Y8G("paginationOptions",o.paginationConfig)("collectionSize",t.bMT(1,5,o.totalElements$))("sortOptions",o.paginationSortConfig),t.R7$(3),t.vxM(0===(null==(n=t.bMT(4,7,o.eventsUpdated$))?null:n.length)?3:-1),t.R7$(2),t.vxM(0!==(null==(r=t.bMT(6,9,o.eventsUpdated$))?null:r.length)?5:-1)}}function nn(i,d){if(1&i){const n=t.RV6();t.j41(0,"div",53)(1,"h4",54),t.EFF(2),t.nI1(3,"translate"),t.k0s()(),t.j41(4,"div",55)(5,"p"),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"button",56),t.bIt("click",function(){const o=t.eBV(n).$implicit;return t.Njj(o.close("do"))}),t.nrm(9,"i",51),t.j41(10,"span",57),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"button",58),t.bIt("click",function(){const o=t.eBV(n).$implicit;return t.Njj(o.close("cancel"))}),t.nrm(14,"i",59),t.j41(15,"span",57),t.EFF(16),t.nI1(17,"translate"),t.k0s()()()}2&i&&(t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.sure")),t.R7$(4),t.JRh(t.bMT(7,6,"quality-assurance.event.accept.description")),t.R7$(5),t.SpI(" ",t.bMT(12,8,"quality-assurance.event.action.import"),""),t.R7$(5),t.SpI(" ",t.bMT(17,10,"quality-assurance.event.action.cancel"),""))}function en(i,d){if(1&i){const n=t.RV6();t.j41(0,"div",53)(1,"h1",60),t.EFF(2),t.nI1(3,"translate"),t.k0s()(),t.j41(4,"div",55)(5,"p"),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"button",61),t.bIt("click",function(){const o=t.eBV(n).$implicit;return t.Njj(o.close("do"))}),t.nrm(9,"i",45),t.j41(10,"span",57),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"button",58),t.bIt("click",function(){const o=t.eBV(n).$implicit;return t.Njj(o.close("cancel"))}),t.nrm(14,"i",59),t.j41(15,"span",57),t.EFF(16),t.nI1(17,"translate"),t.k0s()()()}2&i&&(t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.sure")),t.R7$(4),t.JRh(t.bMT(7,6,"quality-assurance.event.ignore.description")),t.R7$(5),t.SpI(" ",t.bMT(12,8,"quality-assurance.event.action.ignore"),""),t.R7$(5),t.SpI(" ",t.bMT(17,10,"quality-assurance.event.action.cancel"),""))}function an(i,d){if(1&i){const n=t.RV6();t.j41(0,"div",53)(1,"h1",62),t.EFF(2),t.nI1(3,"translate"),t.k0s()(),t.j41(4,"div",55)(5,"p"),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"button",61),t.bIt("click",function(){const o=t.eBV(n).$implicit;return t.Njj(o.close("do"))}),t.nrm(9,"i",45),t.j41(10,"span",57),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"button",58),t.bIt("click",function(){const o=t.eBV(n).$implicit;return t.Njj(o.close("cancel"))}),t.nrm(14,"i",59),t.j41(15,"span",57),t.EFF(16),t.nI1(17,"translate"),t.k0s()()()}2&i&&(t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.sure")),t.R7$(4),t.JRh(t.bMT(7,6,"quality-assurance.event.reject.description")),t.R7$(5),t.SpI(" ",t.bMT(12,8,"quality-assurance.event.action.reject"),""),t.R7$(5),t.SpI(" ",t.bMT(17,10,"quality-assurance.event.action.cancel"),""))}function sn(i,d){if(1&i){const n=t.RV6();t.j41(0,"div",53)(1,"h1",63),t.EFF(2),t.nI1(3,"translate"),t.k0s()(),t.j41(4,"div",55)(5,"p"),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"button",61),t.bIt("click",function(){const o=t.eBV(n).$implicit;return t.Njj(o.close("do"))}),t.nrm(9,"i",45),t.j41(10,"span",57),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"button",58),t.bIt("click",function(){const o=t.eBV(n).$implicit;return t.Njj(o.close("cancel"))}),t.nrm(14,"i",59),t.j41(15,"span",57),t.EFF(16),t.nI1(17,"translate"),t.k0s()()()}2&i&&(t.R7$(2),t.JRh(t.bMT(3,4,"quality-assurance.event.sure")),t.R7$(4),t.JRh(t.bMT(7,6,"quality-assurance.event.undo.description")),t.R7$(5),t.SpI(" ",t.bMT(12,8,"quality-assurance.event.action.undo"),""),t.R7$(5),t.SpI(" ",t.bMT(17,10,"quality-assurance.event.action.cancel"),""))}let on=(()=>{class i{constructor(n,r,o,h,S,K,V,ln){this.activatedRoute=n,this.modalService=r,this.notificationsService=o,this.qualityAssuranceEventRestService=h,this.paginationService=S,this.translateService=K,this.authorizationService=V,this.itemService=ln,this.paginationConfig=Object.assign(new m.W,{id:"bep",currentPage:1,pageSize:10,pageSizeOptions:[5,10,20,40,60]}),this.paginationSortConfig=new p.z("trust",p.U.DESC),this.eventsUpdated$=new E.t([]),this.totalElements$=new E.t(null),this.isEventPageLoading=new E.t(!1),this.showMore=!1,this.defaultConfig=Object.assign(new D._,{sort:this.paginationSortConfig}),this.subs=[]}ngOnInit(){this.isEventPageLoading.next(!0),this.isAdmin$=this.authorizationService.isAuthorized(y._.AdministratorOf),this.activatedRoute.paramMap.pipe((0,g.M)(n=>{this.sourceUrlForProjectSearch=C.c.qualityAssuranceConfig.sourceUrlMapForProjectSearch[n.get("sourceId")],this.sourceId=n.get("sourceId")}),(0,I.T)(n=>n.get("topicId")),(0,T.s)(1),(0,u.n)(n=>{this.showTopic=n.replace(/!/g,"/"),this.topic=n;const o=this.showTopic?.split(":");return this.targetId=o.length>2?o.pop():null,this.selectedTopicName=o[1],this.sourceId=o[0],this.getQualityAssuranceEvents()})).subscribe({next:n=>{this.eventsUpdated$.next(n),this.isEventPageLoading.next(!1)},error:n=>{this.isEventPageLoading.next(!1)}})}hasDetailColumn(){return-1!==this.showTopic.indexOf("/PROJECT")||-1!==this.showTopic.indexOf("/PID")||-1!==this.showTopic.indexOf("/SUBJECT")||-1!==this.showTopic.indexOf("/WITHDRAWN")||-1!==this.showTopic.indexOf("/REINSTATE")||-1!==this.showTopic.indexOf("/ABSTRACT")}get isReinstateWithdrawnRequest(){return-1!==this.showTopic.indexOf("/WITHDRAWN")||-1!==this.showTopic.indexOf("/REINSTATE")}modalChoice(n,r,o){r.hasProject?this.executeAction(n,r):this.openModal(n,r,o)}openModal(n,r,o){this.modalService.open(o,{ariaLabelledBy:"modal-basic-title"}).result.then(h=>{"do"===h&&(r.reason=this.selectedReason,this.executeAction(n,r)),this.selectedReason=null},h=>{this.selectedReason=null})}openModalLookup(n){this.modalRef=this.modalService.open(ct,{size:"lg"});const r=this.modalRef.componentInstance;r.externalSourceEntry=n,r.label="project",this.subs.push(r.importedObject.pipe((0,T.s)(1)).subscribe(o=>{const h=W.O.first(o.indexableObject.metadata,"dc.title");this.boundProject(n,o.indexableObject.id,h.value,o.indexableObject.handle)}))}executeAction(n,r){let o;r.isRunning=!0,o="UNDO"===n?this.delete(r):this.qualityAssuranceEventRestService.patchEvent(n,r.event,r.reason),this.subs.push(o.pipe((0,v.qD)(),(0,u.n)(h=>h.hasSucceeded?(this.notificationsService.success(this.translateService.instant("quality-assurance.event.action.saved")),this.getQualityAssuranceEvents()):(this.notificationsService.error(this.translateService.instant("quality-assurance.event.action.error")),(0,b.of)(this.eventsUpdated$.value)))).subscribe(h=>{this.eventsUpdated$.next(h),r.isRunning=!1}))}boundProject(n,r,o,h){n.isRunning=!0,this.subs.push(this.qualityAssuranceEventRestService.boundProject(n.id,r).pipe((0,v.qD)()).subscribe(S=>{S.hasSucceeded?(this.notificationsService.success(this.translateService.instant("quality-assurance.event.project.bounded")),n.hasProject=!0,n.projectTitle=o,n.handle=h,n.projectId=r):this.notificationsService.error(this.translateService.instant("quality-assurance.event.project.error")),n.isRunning=!1}))}removeProject(n){n.isRunning=!0,this.subs.push(this.qualityAssuranceEventRestService.removeProject(n.id).pipe((0,v.qD)()).subscribe(r=>{r.hasSucceeded?(this.notificationsService.success(this.translateService.instant("quality-assurance.event.project.removed")),n.hasProject=!1,n.projectTitle=null,n.handle=null,n.projectId=null):this.notificationsService.error(this.translateService.instant("quality-assurance.event.project.error")),n.isRunning=!1}))}hasPIDHref(n){return null!==this.getPIDHref(n)}getPIDHref(n){return n.pidHref}getQualityAssuranceEvents(){return this.paginationService.getFindListOptions(this.paginationConfig.id,this.defaultConfig).pipe((0,M.F)(),(0,u.n)(n=>this.qualityAssuranceEventRestService.getEventsByTopic(this.topic,n,(0,k.s)("target"),(0,k.s)("related"))),(0,v.qD)(),(0,u.n)(n=>{if(n.hasSucceeded)return this.totalElements$.next(n.payload.totalElements),n.payload?.page?.length>0?this.fetchEvents(n.payload.page):(0,b.of)([]);throw new Error("Can't retrieve Quality Assurance events from the Broker events REST service")}),(0,T.s)(1),(0,g.M)(()=>{this.qualityAssuranceEventRestService.clearFindByTopicRequests()}))}ngOnDestroy(){this.subs.filter(n=>(0,N.a4)(n)).forEach(n=>n.unsubscribe())}fetchEvents(n){return(0,R.H)(n).pipe((0,A.Z)(r=>{const o=r.related.pipe((0,v.qD)()),h=r.target.pipe((0,v.qD)());return(0,x.z)([o,h]).pipe((0,I.T)(([S,K])=>{const V={event:r,id:r.id,title:r.title,hasProject:!1,projectTitle:null,projectId:null,handle:null,reason:null,isRunning:!1,target:K?.hasSucceeded?K.payload:null};return S?.hasSucceeded&&S?.payload?.id&&(V.hasProject=!0,V.projectTitle=r.message.title,V.projectId=S?.payload?.id,V.handle=S?.payload?.handle),V}))}),(0,l.S)((r,o)=>[...r,o],[]),(0,f.H)())}delete(n){return this.qualityAssuranceEventRestService.deleteQAEvent(n)}getTargetItemTitle(){return this.itemService.findById(this.targetId).pipe((0,T.s)(1),(0,v.qD)(),(0,v.Bo)(),(0,g.M)(n=>this.itemPageUrl=(0,U._o)(n)),(0,I.T)(n=>n.firstMetadataValue("dc.title")))}static{this.\u0275fac=function(r){return new(r||i)(t.rXU(s.nX),t.rXU(_.Bq),t.rXU(Y.I),t.rXU(X.QualityAssuranceEventDataService),t.rXU(L.m),t.rXU($.c$),t.rXU(e.AuthorizationDataService),t.rXU(O.ItemDataService))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["ds-quality-assurance-events"]],standalone:!0,features:[t.aNF],decls:26,vars:15,consts:[["acceptModal",""],["ignoreModal",""],["rejectModal",""],["undoModal",""],[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom","pb-2"],[1,"d-flex","justify-content-between"],[3,"type"],[1,"container",3,"message"],[3,"paginationOptions","collectionSize","sortOptions"],[3,"innerHTML"],["target","_blank",3,"routerLink"],[3,"paginationChange","paginationOptions","collectionSize","sortOptions"],["role","alert",1,"alert","alert-info","w-100","mb-2","mt-2"],[1,"table-responsive","mt-2"],["id","events",1,"table","table-striped","table-hover","table-bordered"],["scope","col",1,"trust-col"],["scope","col",1,"title-col"],["scope","col",1,"content-col"],["scope","col",1,"button-col"],["target","_blank","rel","noopener noreferrer",3,"routerLink"],[1,"d-flex","align-items-center"],[1,"btn-group","button-width"],[1,"small","pe-1"],[3,"title"],["target","_blank",3,"href"],[1,"text-truncate","d-inline-block","w-75",3,"title"],[1,"small"],[1,"badge","bg-info"],["rel","noopener noreferrer","target","_blank",3,"href"],[1,"abstract-container"],[1,"text-ellipsis"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"fas","fa-angle-down"],[1,"fas","fa-angle-up"],[3,"ePersonId","properties"],["target","_blank","rel","noopener noreferrer",3,"title","routerLink"],[1,"btn-group"],[1,"btn","btn-outline-primary","btn-sm",3,"dsBtnDisabled"],[1,"btn","btn-outline-danger","btn-sm",3,"dsBtnDisabled"],[1,"btn","btn-outline-primary","btn-sm",3,"click","dsBtnDisabled"],[1,"fas","fa-search"],[1,"btn","btn-outline-danger","btn-sm",3,"click","dsBtnDisabled"],[1,"fas","fa-trash-alt"],["container","body",1,"btn","btn-outline-success","btn-sm","button-width",3,"ngbTooltip","dsBtnDisabled"],["container","body",1,"btn","btn-outline-dark","btn-sm","button-width",3,"click","ngbTooltip","dsBtnDisabled"],[1,"fas","fa-ban"],["container","body",1,"btn","btn-outline-danger","btn-sm","button-width",3,"ngbTooltip","dsBtnDisabled"],["container","body",1,"btn","btn-outline-success","btn-sm","button-width",3,"click","ngbTooltip","dsBtnDisabled"],[1,"fas","fa-check"],["container","body",1,"btn","btn-outline-danger","btn-sm","button-width",3,"click","ngbTooltip","dsBtnDisabled"],[1,"modal-header"],["id","acceptModal",1,"modal-title"],[1,"modal-body"],[1,"btn","btn-outline-success","float-end",3,"click"],[1,"d-none","d-sm-inline"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-close"],["id","ignoreModal",1,"modal-title","h4"],[1,"btn","btn-outline-danger","float-end",3,"click"],["id","rejectModal",1,"modal-title","h4"],["id","undoModal",1,"modal-title","h4"]],template:function(r,o){1&r&&(t.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"h1",7)(4,"div",8),t.EFF(5),t.nI1(6,"translate"),t.k0s()(),t.DNE(7,vt,3,8,"ds-alert",9)(8,ft,6,12,"ds-alert",9),t.k0s()(),t.j41(9,"div",5)(10,"div",6)(11,"h2",7),t.EFF(12),t.nI1(13,"translate"),t.k0s(),t.DNE(14,Et,2,3,"ds-loading",10),t.nI1(15,"async"),t.DNE(16,tn,7,11,"ds-pagination",11),t.nI1(17,"async"),t.k0s()()(),t.DNE(18,nn,18,12,"ng-template",null,0,t.C5r)(20,en,18,12,"ng-template",null,1,t.C5r)(22,an,18,12,"ng-template",null,2,t.C5r)(24,sn,18,12,"ng-template",null,3,t.C5r)),2&r&&(t.R7$(5),t.SpI(" ",t.bMT(6,7,"notifications.events.title")," "),t.R7$(2),t.vxM(o.targetId?-1:7),t.R7$(),t.vxM(o.targetId?8:-1),t.R7$(4),t.Lme(" ",t.bMT(13,9,"quality-assurance.events.topic")," ",o.showTopic," "),t.R7$(2),t.vxM(t.bMT(15,11,o.isEventPageLoading)?14:-1),t.R7$(2),t.vxM(!0!==t.bMT(17,13,o.isEventPageLoading)?16:-1))},dependencies:[P.C,c.Jj,B.A,ht,_.n8,_.md,q.e,s.Wk,z.v,$.h,$.D9],styles:[".button-col[_ngcontent-%COMP%], .trust-col[_ngcontent-%COMP%]{width:15%}.title-col[_ngcontent-%COMP%]{width:30%}.content-col[_ngcontent-%COMP%]{width:40%}.button-width[_ngcontent-%COMP%]{width:100%}.abstract-container[_ngcontent-%COMP%]{height:76px;overflow:hidden}.text-ellipsis[_ngcontent-%COMP%]{text-overflow:ellipsis}.show[_ngcontent-%COMP%]{overflow:visible;height:auto}"]})}}return i})(),rn=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["ds-quality-assurance-events-page"]],standalone:!0,features:[t.aNF],decls:1,vars:0,template:function(r,o){1&r&&t.nrm(0,"ds-quality-assurance-events")},dependencies:[on],encapsulation:2})}}return i})()},30607:(G,j,a)=>{a.d(j,{h:()=>c});const c=(s,_)=>({pageId:s.queryParams.pageId,pageSize:parseInt(s.queryParams.pageSize,10),currentPage:parseInt(s.queryParams.page,10)})},22052:(G,j,a)=>{a.d(j,{c:()=>b});var c=a(54438),s=a(7901),_=a(96354),$=a(79096),E=a(26646);const b=(x,g,I=(0,c.WQX)(s.Ix),T=(0,c.WQX)(E.p),u=(0,c.WQX)($.vQ))=>T.getSources(u.qualityAssuranceConfig.pageSize,1).pipe((0,_.T)(A=>(1===A.page.length&&I.navigate([R(x)+"/"+A.page[0].id]),A.page)));function R(x){return x.pathFromRoot.map(g=>g.url.map(I=>I.toString()).join("/")).join("/")}},96745:(G,j,a)=>{a.d(j,{t:()=>s});var c=a(54438);let s=(()=>{class _{resolve(E,b){return{pageId:E.queryParams.pageId,pageSize:parseInt(E.queryParams.pageSize,10),currentPage:parseInt(E.queryParams.page,10)}}static{this.\u0275fac=function(b){return new(b||_)}}static{this.\u0275prov=c.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})()},41907:(G,j,a)=>{a.d(j,{E:()=>l});var c=a(60177),s=a(68018),_=a(96354),$=a(96697),E=a(23294),b=a(31),R=a(64972),x=a(89777),g=a(8417),I=a(40149),T=a(22534),u=a(54438),M=a(7901);let A=(()=>{class f{constructor(p,e,y,D){this.paginationService=p,this.notificationsStateService=e,this.router=y,this.route=D,this.paginationConfig=Object.assign(new g.W,{id:"btp",pageSize:10,pageSizeOptions:[5,10,20,40,60]}),this.subs=[]}ngOnInit(){this.sources$=this.notificationsStateService.getQualityAssuranceSource().pipe((0,_.T)(p=>p.map(e=>({id:e.id,lastEvent:e.lastEvent,total:e.totalEvents})))),this.totalElements$=this.notificationsStateService.getQualityAssuranceSourceTotals()}ngAfterViewInit(){this.subs.push(this.notificationsStateService.isQualityAssuranceSourceLoaded().pipe((0,$.s)(1)).subscribe(()=>{this.getQualityAssuranceSource()}))}onSelect(p){this.router.navigate([p],{relativeTo:this.route})}isSourceLoading(){return this.notificationsStateService.isQualityAssuranceSourceLoading()}isSourceProcessing(){return this.notificationsStateService.isQualityAssuranceSourceProcessing()}getQualityAssuranceSource(){this.paginationService.getCurrentPagination(this.paginationConfig.id,this.paginationConfig).pipe((0,E.F)()).subscribe(p=>{this.notificationsStateService.dispatchRetrieveQualityAssuranceSource(p.pageSize,p.currentPage)})}updatePaginationFromRouteParams(p){p.currentPage&&(this.paginationConfig.currentPage=p.currentPage),p.pageSize&&(this.paginationConfig.pageSize=this.paginationConfig.pageSizeOptions.includes(p.pageSize)?p.pageSize:this.paginationConfig.pageSizeOptions[0])}ngOnDestroy(){this.subs.filter(p=>(0,x.a4)(p)).forEach(p=>p.unsubscribe())}static{this.\u0275fac=function(e){return new(e||f)(u.rXU(b.m),u.rXU(I.p),u.rXU(M.Ix),u.rXU(M.nX))}}static{this.\u0275cmp=u.VBU({type:f,selectors:[["ds-quality-assurance-source"]],standalone:!0,features:[u.aNF],decls:12,vars:18,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom","pb-2"],[3,"type","content"],[3,"paginationChange","sourceSelected","loading","paginationConfig","showLastEvent","sources","totalElements"]],template:function(e,y){1&e&&(u.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),u.EFF(4),u.nI1(5,"translate"),u.k0s(),u.nrm(6,"ds-alert",4),u.k0s()(),u.j41(7,"ds-source-list",5),u.nI1(8,"async"),u.nI1(9,"async"),u.nI1(10,"async"),u.nI1(11,"async"),u.bIt("paginationChange",function(){return y.getQualityAssuranceSource()})("sourceSelected",function(O){return y.onSelect(O)}),u.k0s()()),2&e&&(u.R7$(4),u.JRh(u.bMT(5,8,"quality-assurance.title")),u.R7$(2),u.Y8G("type","alert-info")("content","quality-assurance.source.description"),u.R7$(),u.Y8G("loading",!0===u.bMT(8,10,y.isSourceLoading())||!0===u.bMT(9,12,y.isSourceProcessing()))("paginationConfig",y.paginationConfig)("showLastEvent",!0)("sources",u.bMT(10,14,y.sources$))("totalElements",u.bMT(11,16,y.totalElements$)))},dependencies:[R.C,c.Jj,T.j,s.h,s.D9]})}}return f})(),l=(()=>{class f{static{this.\u0275fac=function(e){return new(e||f)}}static{this.\u0275cmp=u.VBU({type:f,selectors:[["ds-quality-assurance-source-page-component"]],standalone:!0,features:[u.aNF],decls:1,vars:0,template:function(e,y){1&e&&u.nrm(0,"ds-quality-assurance-source")},dependencies:[A],encapsulation:2})}}return f})()},12627:(G,j,a)=>{a.d(j,{G:()=>s});var c=a(54438);let s=(()=>{class _{resolve(E,b){return{pageId:E.queryParams.pageId,pageSize:parseInt(E.queryParams.pageSize,10),currentPage:parseInt(E.queryParams.page,10)}}static{this.\u0275fac=function(b){return new(b||_)}}static{this.\u0275prov=c.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})()},40883:(G,j,a)=>{a.d(j,{V:()=>q});var c=a(60177),s=a(7901),_=a(68018),$=a(88141),E=a(96697),b=a(23294),R=a(96354),x=a(83),g=a(61206),I=a(31),T=a(4093),u=a(92767),M=a(64972),A=a(89777),l=a(15202),f=a(2175),C=a(8417),p=a(40149),e=a(54438);const y=m=>({source:m}),D=m=>({param:m}),O=(m,k,t)=>[m,k,t];function X(m,k){if(1&m&&(e.j41(0,"ds-alert",4),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&m){const t=e.XpG();e.Y8G("type","alert-info"),e.R7$(),e.JRh(e.i5U(2,2,"quality-assurance.topics.description",e.eq3(5,y,t.sourceId)))}}function L(m,k){if(1&m&&(e.j41(0,"ds-alert",4),e.EFF(1),e.nI1(2,"translate"),e.j41(3,"a",7),e.EFF(4),e.nI1(5,"async"),e.k0s()()),2&m){const t=e.XpG();e.Y8G("type","alert-info"),e.R7$(),e.SpI(" ",e.i5U(2,4,"quality-assurance.topics.description-with-target",e.eq3(9,y,t.sourceId))," "),e.R7$(2),e.Y8G("routerLink",t.itemPageUrl),e.R7$(),e.JRh(e.bMT(5,7,t.getTargetItemTitle()))}}function W(m,k){1&m&&(e.nrm(0,"ds-loading",5),e.nI1(1,"translate")),2&m&&e.FS9("message",e.bMT(1,1,"quality-assurance.loading"))}function v(m,k){1&m&&e.nrm(0,"ds-loading",9)}function U(m,k){1&m&&(e.j41(0,"div",10),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&m&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"quality-assurance.noTopics")," "))}function P(m,k){if(1&m&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.j41(6,"td")(7,"div",14)(8,"button",15),e.nI1(9,"translate"),e.j41(10,"span",16),e.EFF(11),e.k0s(),e.nrm(12,"i",17),e.k0s()()()()),2&m){const t=k.$implicit,F=e.XpG(4);e.R7$(2),e.JRh(t.name),e.R7$(2),e.JRh(e.i5U(5,5,t.lastEvent,"dd/MM/yyyy hh:mm")),e.R7$(4),e.FS9("title",e.i5U(9,8,"quality-assurance.topics-list.button.detail",e.eq3(11,D,t.name))),e.Y8G("routerLink",e.sMw(13,O,F.getQualityAssuranceRoute(),F.sourceId,t.id)),e.R7$(3),e.JRh(t.totalEvents)}}function B(m,k){if(1&m&&(e.j41(0,"div",11)(1,"table",12)(2,"thead")(3,"tr")(4,"th",13),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.j41(7,"th",13),e.EFF(8),e.nI1(9,"translate"),e.k0s(),e.j41(10,"th",13),e.EFF(11),e.nI1(12,"translate"),e.k0s()()(),e.j41(13,"tbody"),e.Z7z(14,P,13,17,"tr",null,e.fX1),e.nI1(16,"async"),e.k0s()()()),2&m){const t=e.XpG(3);e.R7$(5),e.JRh(e.bMT(6,3,"quality-assurance.table.topic")),e.R7$(3),e.JRh(e.bMT(9,5,"quality-assurance.table.last-event")),e.R7$(3),e.JRh(e.bMT(12,7,"quality-assurance.table.actions")),e.R7$(3),e.Dyx(e.bMT(16,9,t.topics$))}}function N(m,k){if(1&m&&(e.DNE(0,U,3,3,"div",10),e.nI1(1,"async"),e.DNE(2,B,17,11,"div",11),e.nI1(3,"async")),2&m){let t,F;const Q=e.XpG(2);e.vxM(0===(null==(t=e.bMT(1,2,Q.topics$))?null:t.length)?0:-1),e.R7$(2),e.vxM(0!==(null==(F=e.bMT(3,4,Q.topics$))?null:F.length)?2:-1)}}function z(m,k){if(1&m){const t=e.RV6();e.j41(0,"ds-pagination",8),e.nI1(1,"async"),e.bIt("paginationChange",function(){e.eBV(t);const Q=e.XpG();return e.Njj(Q.getQualityAssuranceTopics(Q.sourceId,Q.targetId))}),e.DNE(2,v,1,0,"ds-loading",9),e.nI1(3,"async"),e.DNE(4,N,4,6),e.nI1(5,"async"),e.k0s()}if(2&m){const t=e.XpG();e.Y8G("paginationOptions",t.paginationConfig)("collectionSize",e.bMT(1,6,t.totalElements$))("hideGear",!1)("hideSortOptions",!0),e.R7$(2),e.vxM(e.bMT(3,8,t.isTopicsProcessing())?2:-1),e.R7$(2),e.vxM(!0!==e.bMT(5,10,t.isTopicsProcessing())?4:-1)}}let Y=(()=>{class m{constructor(t,F,Q,H,w){this.paginationService=t,this.activatedRoute=F,this.itemService=Q,this.notificationsStateService=H,this.router=w,this.paginationConfig=Object.assign(new C.W,{id:"btp",pageSize:10,pageSizeOptions:[5,10,20,40,60]}),this.subs=[],this.sourceId=this.activatedRoute.snapshot.params.sourceId,this.targetId=this.activatedRoute.snapshot.params.targetId}ngOnInit(){this.topics$=this.notificationsStateService.getQualityAssuranceTopics().pipe((0,$.M)(t=>{1===t.length&&"true"===this.activatedRoute.snapshot.queryParams?.forward&&this.router.navigate([this.getQualityAssuranceRoute(),this.sourceId,t[0].id])})),this.totalElements$=this.notificationsStateService.getQualityAssuranceTopicsTotals()}ngAfterViewInit(){this.subs.push(this.notificationsStateService.isQualityAssuranceTopicsLoaded().pipe((0,E.s)(1)).subscribe(()=>{this.getQualityAssuranceTopics(this.sourceId,this.targetId)}))}isTopicsLoading(){return this.notificationsStateService.isQualityAssuranceTopicsLoading()}isTopicsProcessing(){return this.notificationsStateService.isQualityAssuranceTopicsProcessing()}getQualityAssuranceTopics(t,F){this.subs.push(this.paginationService.getCurrentPagination(this.paginationConfig.id,this.paginationConfig).pipe((0,b.F)()).subscribe(Q=>{this.notificationsStateService.dispatchRetrieveQualityAssuranceTopics(Q.pageSize,Q.currentPage,t,F)}))}updatePaginationFromRouteParams(t){t.currentPage&&(this.paginationConfig.currentPage=t.currentPage),t.pageSize&&(this.paginationConfig.pageSize=this.paginationConfig.pageSizeOptions.includes(t.pageSize)?t.pageSize:this.paginationConfig.pageSizeOptions[0])}getTargetItemTitle(){return this.itemService.findById(this.targetId).pipe((0,E.s)(1),(0,T.qD)(),(0,T.Bo)(),(0,$.M)(t=>this.itemPageUrl=(0,u._o)(t)),(0,R.T)(t=>t.firstMetadataValue("dc.title")))}getItemPageRoute(t){return(0,u._o)(t)}getQualityAssuranceRoute(){return(0,x.b7)()}ngOnDestroy(){this.subs.filter(t=>(0,A.a4)(t)).forEach(t=>t.unsubscribe())}static{this.\u0275fac=function(F){return new(F||m)(e.rXU(I.m),e.rXU(s.nX),e.rXU(g.ItemDataService),e.rXU(p.p),e.rXU(s.Ix))}}static{this.\u0275cmp=e.VBU({type:m,selectors:[["ds-quality-assurance-topic"]],standalone:!0,features:[e.aNF],decls:17,vars:14,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"border-bottom","pb-2"],[3,"type"],[1,"container",3,"message"],[3,"paginationOptions","collectionSize","hideGear","hideSortOptions"],[3,"routerLink"],[3,"paginationChange","paginationOptions","collectionSize","hideGear","hideSortOptions"],["message","'quality-assurance.loading' | translate",1,"container"],["role","alert",1,"alert","alert-info","w-100","mb-2","mt-2"],[1,"table-responsive","mt-2"],["id","epeople",1,"table","table-striped","table-hover","table-bordered"],["scope","col"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm",3,"title","routerLink"],[1,"badge","bg-info"],[1,"fas","fa-info","fa-fw"]],template:function(F,Q){1&F&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),e.EFF(4),e.nI1(5,"translate"),e.k0s(),e.DNE(6,X,3,7,"ds-alert",4)(7,L,6,11,"ds-alert",4),e.k0s()(),e.j41(8,"div",1)(9,"div",2)(10,"h2",3),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.DNE(13,W,2,3,"ds-loading",5),e.nI1(14,"async"),e.DNE(15,z,6,12,"ds-pagination",6),e.nI1(16,"async"),e.k0s()()()),2&F&&(e.R7$(4),e.JRh(e.bMT(5,6,"quality-assurance.title")),e.R7$(2),e.vxM(Q.targetId?-1:6),e.R7$(),e.vxM(Q.targetId?7:-1),e.R7$(4),e.JRh(e.bMT(12,8,"quality-assurance.topics")),e.R7$(2),e.vxM(e.bMT(14,10,Q.isTopicsLoading())?13:-1),e.R7$(2),e.vxM(!0!==e.bMT(16,12,Q.isTopicsLoading())?15:-1))},dependencies:[M.C,c.Jj,c.vh,f.e,s.Wk,l.v,_.h,_.D9]})}}return m})(),q=(()=>{class m{static{this.\u0275fac=function(F){return new(F||m)}}static{this.\u0275cmp=e.VBU({type:m,selectors:[["ds-notification-qa-page"]],standalone:!0,features:[e.aNF],decls:1,vars:0,template:function(F,Q){1&F&&e.nrm(0,"ds-quality-assurance-topic")},dependencies:[Y],encapsulation:2})}}return m})()}}]);