(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[6140],{73706:(v,f,t)=>{"use strict";t.r(f),t.d(f,{CreateProfileComponent:()=>A});var n=t(60177),a=t(89417),i=t(68018),p=t(96354),c=t(78544),u=t(45124),C=t(40220),g=t(13817),P=t(89253),R=t(4093),D=t(22082),N=t(79104),T=t(89777),M=t(9847),e=t(54438),F=t(59640),o=t(7901);function O(s,E){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"register-page.create-profile.identification.first-name.error")," "))}function m(s,E){if(1&s&&(e.j41(0,"div",13),e.DNE(1,O,3,3,"span"),e.k0s()),2&s){const r=e.XpG(2);e.R7$(),e.vxM(r.firstName.errors&&r.firstName.errors.required?1:-1)}}function _(s,E){1&s&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&s&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"register-page.create-profile.identification.last-name.error")," "))}function h(s,E){if(1&s&&(e.j41(0,"div",13),e.DNE(1,_,3,3,"span"),e.k0s()),2&s){const r=e.XpG(2);e.R7$(),e.vxM(r.lastName.errors&&r.lastName.errors.required?1:-1)}}function U(s,E){if(1&s&&(e.j41(0,"option",20),e.EFF(1),e.k0s()),2&s){const r=E.$implicit;e.Y8G("value",r.code),e.R7$(),e.JRh(r.label)}}function y(s,E){if(1&s){const r=e.RV6();e.j41(0,"div",0)(1,"h3",1),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",2)(5,"div",3),e.EFF(6),e.nI1(7,"translate"),e.k0s(),e.j41(8,"div",4)(9,"div",5)(10,"div",6)(11,"label",7),e.EFF(12),e.nI1(13,"translate"),e.k0s(),e.j41(14,"span",8),e.EFF(15),e.nI1(16,"async"),e.k0s()()(),e.j41(17,"form",9),e.bIt("ngSubmit",function(){e.eBV(r);const l=e.XpG();return e.Njj(l.submitEperson())}),e.j41(18,"div",10)(19,"div",5)(20,"div",6)(21,"label",11),e.EFF(22),e.nI1(23,"translate"),e.k0s(),e.nrm(24,"input",12),e.DNE(25,m,2,1,"div",13),e.k0s()(),e.j41(26,"div",5)(27,"div",6)(28,"label",14),e.EFF(29),e.nI1(30,"translate"),e.k0s(),e.nrm(31,"input",15),e.DNE(32,h,2,1,"div",13),e.k0s()(),e.j41(33,"div",5)(34,"div",6)(35,"label",16),e.EFF(36),e.nI1(37,"translate"),e.k0s(),e.nrm(38,"input",17),e.k0s()(),e.j41(39,"div",5)(40,"div",6)(41,"label",18),e.EFF(42),e.nI1(43,"translate"),e.k0s(),e.j41(44,"select",19),e.nrm(45,"option",20),e.Z7z(46,U,2,2,"option",20,e.fX1),e.k0s()()()()()()(),e.j41(48,"div",2)(49,"div",3),e.EFF(50),e.nI1(51,"translate"),e.k0s(),e.j41(52,"div",4)(53,"ds-profile-page-security-form",21),e.bIt("isInvalid",function(l){e.eBV(r);const I=e.XpG();return e.Njj(I.setInValid(l))})("passwordValue",function(l){e.eBV(r);const I=e.XpG();return e.Njj(I.setPasswordValue(l))}),e.k0s()()(),e.j41(54,"div",5)(55,"div",6)(56,"button",22),e.bIt("click",function(){e.eBV(r);const l=e.XpG();return e.Njj(l.submitEperson())}),e.EFF(57),e.nI1(58,"translate"),e.k0s()()()()}if(2&s){const r=e.XpG();e.R7$(2),e.JRh(e.bMT(3,21,"register-page.create-profile.header")),e.R7$(4),e.JRh(e.bMT(7,23,"register-page.create-profile.identification.header")),e.R7$(6),e.JRh(e.bMT(13,25,"register-page.create-profile.identification.email")),e.R7$(3),e.JRh(e.bMT(16,27,r.registration$).email),e.R7$(2),e.HbH("ng-invalid"),e.Y8G("formGroup",r.userInfoForm),e.R7$(5),e.JRh(e.bMT(23,29,"register-page.create-profile.identification.first-name")),e.R7$(2),e.Y8G("className",r.firstName.invalid&&(r.firstName.dirty||r.firstName.touched)?"form-control is-invalid":"form-control"),e.R7$(),e.vxM(r.firstName.invalid&&(r.firstName.dirty||r.firstName.touched)?25:-1),e.R7$(4),e.JRh(e.bMT(30,31,"register-page.create-profile.identification.last-name")),e.R7$(2),e.Y8G("className",r.lastName.invalid&&(r.lastName.dirty||r.lastName.touched)?"form-control is-invalid":"form-control"),e.R7$(),e.vxM(r.lastName.invalid&&(r.lastName.dirty||r.lastName.touched)?32:-1),e.R7$(4),e.JRh(e.bMT(37,33,"register-page.create-profile.identification.contact")),e.R7$(6),e.JRh(e.bMT(43,35,"register-page.create-profile.identification.language")),e.R7$(3),e.Y8G("value",""),e.R7$(),e.Dyx(r.activeLangs),e.R7$(4),e.JRh(e.bMT(51,37,"register-page.create-profile.security.header")),e.R7$(3),e.Y8G("passwordCanBeEmpty",!1)("FORM_PREFIX","register-page.create-profile.security."),e.R7$(3),e.Y8G("dsBtnDisabled",r.isInValidPassword||r.userInfoForm.invalid),e.R7$(),e.JRh(e.bMT(58,39,"register-page.create-profile.submit"))}}let A=(()=>{class s{constructor(r,d,l,I,S,B,x,j){this.translateService=r,this.ePersonDataService=d,this.store=l,this.router=I,this.route=S,this.formBuilder=B,this.notificationsService=x,this.endUserAgreementService=j,this.isInValidPassword=!0,this.NOTIFICATIONS_PREFIX="register-page.create-profile.submit."}ngOnInit(){this.registration$=this.route.data.pipe((0,p.T)(r=>r.registration),(0,R.ak)()),this.registration$.subscribe(r=>{this.email=r.email,this.token=r.token}),this.activeLangs=c.c.languages.filter(r=>!0===r.active),this.userInfoForm=this.formBuilder.group({firstName:new a.hs("",{validators:[a.k0.required]}),lastName:new a.hs("",{validators:[a.k0.required]}),contactPhone:new a.hs(""),language:new a.hs("")})}setInValid(r){this.isInValidPassword=r||(0,T.Im)(this.password)}setPasswordValue(r){this.password=r,this.isInValidPassword=this.isInValidPassword||(0,T.Im)(this.password)}get firstName(){return this.userInfoForm.get("firstName")}get lastName(){return this.userInfoForm.get("lastName")}get contactPhone(){return this.userInfoForm.get("contactPhone")}get language(){return this.userInfoForm.get("language")}submitEperson(){if(!this.userInfoForm.invalid&&!this.isInValidPassword){const r={metadata:{"eperson.firstname":[{value:this.firstName.value}],"eperson.lastname":[{value:this.lastName.value}],"eperson.phone":[{value:this.contactPhone.value}],"eperson.language":[{value:this.language.value}]},email:this.email,password:this.password,canLogIn:!0,requireCertificate:!1};this.endUserAgreementService.isCookieAccepted()&&(r.metadata[C.Mk]=[{value:String(!0)}],this.endUserAgreementService.removeCookieAccepted());const d=Object.assign(new P.f,r);this.ePersonDataService.createEPersonForToken(d,this.token).pipe((0,R.qD)()).subscribe(l=>{l.hasSucceeded?(this.notificationsService.success(this.translateService.get(this.NOTIFICATIONS_PREFIX+"success.head"),this.translateService.get(this.NOTIFICATIONS_PREFIX+"success.content")),this.store.dispatch(new u.Sn(this.email,this.password)),this.router.navigate(["/home"])):this.notificationsService.error(this.translateService.get(this.NOTIFICATIONS_PREFIX+"error.head"),l.errorMessage)})}}static{this.\u0275fac=function(d){return new(d||s)(e.rXU(i.c$),e.rXU(g.EPersonDataService),e.rXU(F.il),e.rXU(o.Ix),e.rXU(o.nX),e.rXU(a.ze),e.rXU(M.I),e.rXU(C.GH))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["ds-base-create-profile"]],standalone:!0,features:[e.aNF],decls:2,vars:3,consts:[[1,"container"],[1,"mb-4"],[1,"card","mb-4"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-12"],["for","email",1,"fw-bold","form-label","me-4"],["id","email"],[3,"ngSubmit","formGroup"],[1,"mb-3"],["for","firstName",1,"form-label"],["type","text","id","firstName","formControlName","firstName",3,"className"],[1,"invalid-feedback","show-feedback"],["for","lastName",1,"form-label"],["id","lastName","formControlName","lastName",3,"className"],["for","contactPhone",1,"form-label"],["id","contactPhone","formControlName","contactPhone",1,"form-control"],["for","language",1,"form-label"],["id","language","formControlName","language",1,"form-select"],[3,"value"],[3,"isInvalid","passwordValue","passwordCanBeEmpty","FORM_PREFIX"],[1,"btn","btn-default","btn-primary",3,"click","dsBtnDisabled"]],template:function(d,l){1&d&&(e.DNE(0,y,59,41,"div",0),e.nI1(1,"async")),2&d&&e.vxM(e.bMT(1,1,l.registration$)?0:-1)},dependencies:[n.Jj,N.A,D.q,a.X1,a.qT,a.xH,a.y7,a.me,a.wz,a.BC,a.cb,a.j4,a.JD,i.h,i.D9]})}}return s})()},10854:(v,f,t)=>{"use strict";t.r(f),t.d(f,{RegisterEmailComponent:()=>p});var n=t(35118),a=t(19532),i=t(54438);let p=(()=>{class c{constructor(){this.typeRequest=a.TYPE_REQUEST_REGISTER}static{this.\u0275fac=function(g){return new(g||c)}}static{this.\u0275cmp=i.VBU({type:c,selectors:[["ds-base-register-email"]],standalone:!0,features:[i.aNF],decls:1,vars:2,consts:[[3,"MESSAGE_PREFIX","typeRequest"]],template:function(g,P){1&g&&i.nrm(0,"ds-register-email-form",0),2&g&&i.Y8G("MESSAGE_PREFIX","register-page.registration")("typeRequest",P.typeRequest)},dependencies:[n.I]})}}return c})()},26140:(v,f,t)=>{"use strict";t.r(f),t.d(f,{ROUTES:()=>F});var n=t(54438),a=t(7673),i=t(17102),p=t(40220);const c=(0,i.e)(()=>{const o=(0,n.WQX)(p.GH);return(0,a.of)(o.isCookieAccepted())});var u=t(29710);t(73706);const g=["*"];function P(o,O){}let R=(()=>{class o extends u.J{getComponentName(){return"CreateProfileComponent"}importThemedComponent(m){return t(85748)(`./${m}/app/register-page/create-profile/create-profile.component`)}importUnthemedComponent(){return Promise.resolve().then(t.bind(t,73706))}static{this.\u0275fac=(()=>{let m;return function(h){return(m||(m=n.xGo(o)))(h||o)}})()}static{this.\u0275cmp=n.VBU({type:o,selectors:[["ds-create-profile"]],standalone:!0,features:[n.Vt3,n.aNF],ngContentSelectors:g,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(_,h){1&_&&(n.NAR(),n.DNE(0,P,0,0,"ng-template",null,0,n.C5r),n.j41(2,"div",null,1),n.SdG(4),n.k0s())},encapsulation:2})}}return o})();t(10854);const N=["*"];function T(o,O){}const F=[{path:"",component:(()=>{class o extends u.J{getComponentName(){return"RegisterEmailComponent"}importThemedComponent(m){return t(72200)(`./${m}/app/register-page/register-email/register-email.component`)}importUnthemedComponent(){return Promise.resolve().then(t.bind(t,10854))}static{this.\u0275fac=(()=>{let m;return function(h){return(m||(m=n.xGo(o)))(h||o)}})()}static{this.\u0275cmp=n.VBU({type:o,selectors:[["ds-register-email"]],standalone:!0,features:[n.Vt3,n.aNF],ngContentSelectors:N,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(_,h){1&_&&(n.NAR(),n.DNE(0,T,0,0,"ng-template",null,0,n.C5r),n.j41(2,"div",null,1),n.SdG(4),n.k0s())},encapsulation:2})}}return o})(),data:{title:"register-email.title"}},{path:":token",component:R,canActivate:[t(32006).r,c]}]},85748:(v,f,t)=>{var n={"./custom/app/register-page/create-profile/create-profile.component":[51321,1321]};function a(i){if(!t.o(n,i))return Promise.resolve().then(()=>{var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u});var p=n[i],c=p[0];return t.e(p[1]).then(()=>t(c))}a.keys=()=>Object.keys(n),a.id=85748,v.exports=a},72200:(v,f,t)=>{var n={"./custom/app/register-page/register-email/register-email.component":[68537,8537]};function a(i){if(!t.o(n,i))return Promise.resolve().then(()=>{var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u});var p=n[i],c=p[0];return t.e(p[1]).then(()=>t(c))}a.keys=()=>Object.keys(n),a.id=72200,v.exports=a}}]);