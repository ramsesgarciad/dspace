"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[3918],{33918:(Te,k,s)=>{s.r(k),s.d(k,{ROUTES:()=>$e});var E=s(59072),e=s(54438),D=s(7673),L=s(80495);let N=(()=>{class o{getBreadcrumbs(t,r){const n=t.split(":"),i=r.split(":"),a=n.map((c,p)=>new L.Q(c+".breadcrumbs",i[p]));return(0,D.of)(a.reverse())}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();const w=(o,l,t=(0,e.WQX)(N))=>{const r=[];R(o,r);const n=o.data.relatedRoutes,i=r.map(u=>u.routeConfig?.path),a=n.filter(u=>i.includes(u.path)),c=o.parent.url[o.parent.url.length-1].path,p=l.url.substring(0,l.url.lastIndexOf(c)+c.length);return{provider:t,key:a.reduce((u,F)=>`${u}:${F.data.breadcrumbKey}`,o.data.breadcrumbKey),url:a.reduce((u,F)=>`${u}:${p}${F.path}`,l.url)}};function R(o,l){o.parent&&(l.push(o.parent),R(o.parent,l))}var b=s(49969),_=s(60177),d=s(89417),v=s(58003),f=s(68018),A=s(20140),P=s(36343),y=s(31),m=s(4093),x=s(9847);let $=(()=>{class o{validate(t){const n=t.value,i=n?.split(".");return/^(\d{1,3}\.){3}\d{1,3}$/.test(n)&&i.every(a=>parseInt(a,10)<=255)?null:{isValidIp:!1}}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275dir=e.FsC({type:o,selectors:[["","ipV4format",""]],standalone:!0,features:[e.Jv_([{provide:d.cz,useExisting:o,multi:!0}])]})}}return o})();var V=s(70518),T=s(43374),B=s(89465),h=s(31635),M=s(74850);class g{}(0,h.Cg)([M.autoserialize,(0,h.Sn)("design:type",String)],g.prototype,"pattern",void 0),(0,h.Cg)([M.autoserialize,(0,h.Sn)("design:type",String)],g.prototype,"constraint",void 0),(0,h.Cg)([M.autoserialize,(0,h.Sn)("design:type",String)],g.prototype,"automatic",void 0);const X=["request-endorsement","request-ingest","request-review","announce-relationship"];var S=s(7901);const U=["confirmModal"],z=["resetFormModal"],J=[[["","before",""]]],Y=["[before]"];function Q(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",7)(1,"label",40),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div"),e.nrm(5,"input",41),e.j41(6,"div",31),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.toggleEnabled())}),e.nrm(7,"div",32),e.k0s()()()}if(2&o){const t=e.XpG();e.R7$(2),e.JRh(e.bMT(3,3,"ldn-service-status")),e.R7$(4),e.AVh("checked",t.formModel.get("enabled").value)}}function K(o,l){1&o&&(e.j41(0,"div",11),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"ldn-new-service.form.error.name")," "))}function W(o,l){1&o&&(e.j41(0,"div",11),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"ldn-new-service.form.error.url")," "))}function Z(o,l){1&o&&(e.j41(0,"div",11),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"ldn-new-service.form.error.score")," "))}function H(o,l){1&o&&(e.j41(0,"div",11),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"ldn-new-service.form.error.ipRange")," "))}function q(o,l){1&o&&(e.j41(0,"div",11),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"ldn-new-service.form.error.ldnurl")," "))}function ee(o,l){1&o&&(e.j41(0,"div",11),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"ldn-new-service.form.error.ldnurl.ldnUrlAlreadyAssociated")," "))}function te(o,l){if(1&o&&(e.j41(0,"div"),e.DNE(1,q,3,3,"div",11)(2,ee,3,3,"div",11),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.vxM(t.formModel.get("ldnUrl").errors.required?1:-1),e.R7$(),e.vxM(t.formModel.get("ldnUrl").errors.ldnUrlAlreadyAssociated?2:-1)}}function ne(o,l){1&o&&(e.j41(0,"div",42)(1,"label",43),e.EFF(2),e.nI1(3,"translate"),e.k0s()(),e.j41(4,"div",45)(5,"label",43),e.EFF(6),e.nI1(7,"translate"),e.k0s()()),2&o&&(e.R7$(2),e.JRh(e.bMT(3,2,"ldn-new-service.form.label.ItemFilter")),e.R7$(4),e.JRh(e.bMT(7,4,"ldn-new-service.form.label.automatic")))}function oe(o,l){if(1&o&&(e.j41(0,"div",33)(1,"div",42)(2,"label",43),e.EFF(3),e.nI1(4,"translate"),e.k0s()(),e.DNE(5,ne,8,6),e.nrm(6,"div",44),e.k0s()),2&o){let t;const r=e.XpG();e.R7$(3),e.SpI("",e.bMT(4,2,"ldn-new-service.form.label.inboundPattern")," "),e.R7$(2),e.vxM(null!=(t=r.formModel.get("notifyServiceInboundPatterns").controls[0])&&null!=t.value&&t.value.pattern?5:-1)}}function re(o,l){if(1&o){const t=e.RV6();e.j41(0,"button",63),e.nI1(1,"translate"),e.bIt("click",function(n){const i=e.eBV(t).$implicit,a=e.XpG().$index;return e.XpG(2).selectInboundPattern(i,a),e.Njj(n.stopPropagation())}),e.j41(2,"div"),e.EFF(3),e.nI1(4,"translate"),e.k0s()()}if(2&o){const t=l.$implicit;e.Y8G("title",e.bMT(1,2,"ldn-service.form.pattern."+t+".description")),e.R7$(3),e.JRh(e.bMT(4,4,"ldn-service.form.pattern."+t+".label"))}}function ie(o,l){if(1&o){const t=e.RV6();e.j41(0,"button",68),e.bIt("click",function(n){const i=e.eBV(t).$implicit,a=e.XpG(2).$index;return e.XpG(2).selectInboundItemFilter(i.id,a),e.Njj(n.stopPropagation())}),e.j41(1,"div"),e.EFF(2),e.nI1(3,"translate"),e.k0s()()}if(2&o){const t=l.$implicit;e.R7$(2),e.JRh(e.bMT(3,1,t.id+".label"))}}function le(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",57,2)(2,"div",64),e.nrm(3,"i",52)(4,"input",65),e.nI1(5,"translate"),e.j41(6,"input",66),e.nI1(7,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.sdS(1);return e.Njj(n.open())}),e.k0s(),e.j41(8,"div",67)(9,"div",55)(10,"button",68),e.bIt("click",function(n){e.eBV(t);const i=e.XpG().$index;return e.XpG(2).selectInboundItemFilter("",i),e.Njj(n.stopPropagation())}),e.j41(11,"span"),e.EFF(12),e.nI1(13,"translate"),e.k0s()(),e.Z7z(14,ie,4,3,"button",69,e.fX1),e.nI1(16,"async"),e.k0s()()()()}if(2&o){let t;const r=e.XpG().$index,n=e.XpG(2);e.Mz_("id","constraint",r,""),e.R7$(4),e.Y8G("readonly",!0),e.BMQ("aria-label",e.bMT(5,7,"ldn-service-input-inbound-item-filter-dropdown")),e.R7$(2),e.Y8G("readonly",!0),e.BMQ("aria-label",e.bMT(7,9,"ldn-service-input-inbound-item-filter-dropdown")),e.R7$(6),e.SpI(" ",e.bMT(13,11,"ldn-service.control-constaint-select-none")," "),e.R7$(2),e.Dyx(null==(t=e.bMT(16,13,n.itemFiltersRD$))||null==t.payload?null:t.payload.page)}}function ae(o,l){if(1&o){const t=e.RV6();e.j41(0,"button",70),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$index,i=e.XpG(2);return e.Njj(i.unmarkForInboundPatternDeletion(n))}),e.nrm(2,"i",71),e.k0s()}2&o&&e.Y8G("title",e.bMT(1,1,"ldn-service-button-unmark-inbound-deletion"))}function se(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",47),e.qex(1,48),e.j41(2,"div",49)(3,"div",42)(4,"div",50,1)(6,"div",51),e.nrm(7,"i",52),e.j41(8,"input",53),e.nI1(9,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.sdS(5);return e.Njj(n.open())}),e.k0s(),e.j41(10,"div",54)(11,"div",55),e.Z7z(12,re,5,6,"button",56,e.fX1),e.k0s()()()()(),e.j41(14,"div",42),e.DNE(15,le,17,15,"div",57),e.k0s(),e.j41(16,"div",45),e.nrm(17,"input",58),e.j41(18,"div",31),e.bIt("click",function(){const n=e.eBV(t).$index,i=e.XpG(2);return e.Njj(i.toggleAutomatic(n))}),e.nrm(19,"div",32),e.k0s()(),e.j41(20,"div",44)(21,"div",59)(22,"button",60),e.nI1(23,"translate"),e.bIt("click",function(){const n=e.eBV(t).$index,i=e.XpG(2);return e.Njj(i.markForInboundPatternDeletion(n))}),e.nrm(24,"i",61),e.k0s(),e.DNE(25,ae,3,3,"button",62),e.k0s()()(),e.bVm(),e.k0s()}if(2&o){const t=l.$index,r=e.XpG(2);e.AVh("marked-for-deletion",r.markedForDeletionInboundPattern.includes(t)),e.R7$(),e.Y8G("formGroupName",t),e.R7$(3),e.Mz_("id","additionalInboundPattern",t,""),e.R7$(4),e.Y8G("readonly",!0)("value",r.selectedInboundPatterns),e.BMQ("aria-label",e.bMT(9,19,"ldn-service-input-inbound-pattern-dropdown")),e.R7$(4),e.Dyx(r.inboundPatterns),e.R7$(3),e.vxM(r.formModel.get("notifyServiceInboundPatterns").controls[t].value.pattern?15:-1),e.R7$(),e.xc7("visibility",r.formModel.get("notifyServiceInboundPatterns").controls[t].value.pattern?"visible":"hidden"),e.R7$(),e.Mz_("id","automatic",t,""),e.Mz_("name","automatic",t,""),e.R7$(),e.AVh("checked",r.formModel.get("notifyServiceInboundPatterns."+t+".automatic").value),e.R7$(4),e.Y8G("title",e.bMT(23,21,"ldn-service-button-mark-inbound-deletion")),e.R7$(3),e.vxM(r.markedForDeletionInboundPattern.includes(t)?25:-1)}}function ce(o,l){if(1&o&&(e.j41(0,"div"),e.Z7z(1,se,26,23,"div",46,e.fX1),e.k0s()),2&o){const t=e.XpG();e.R7$(),e.Dyx(t.formModel.get("notifyServiceInboundPatterns").controls)}}function de(o,l){1&o&&(e.j41(0,"h4"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.JRh(e.bMT(2,1,"service.overview.edit.modal")))}function pe(o,l){1&o&&(e.j41(0,"h4"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.JRh(e.bMT(2,1,"service.overview.create.modal")))}function me(o,l){1&o&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"service.overview.edit.body")," "))}function ue(o,l){1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"translate"),e.k0s()),2&o&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"service.overview.create.body")," "))}function ve(o,l){if(1&o){const t=e.RV6();e.j41(0,"button",78),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.patchService())}),e.EFF(1),e.nI1(2,"translate"),e.k0s()}2&o&&(e.R7$(),e.SpI("",e.bMT(2,1,"service.detail.update")," "))}function be(o,l){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"button",76),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.closeModal())}),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,ve,3,3,"button",77),e.k0s()}if(2&o){const t=e.XpG(2);e.R7$(2),e.SpI("",e.bMT(3,2,"service.detail.return")," "),e.R7$(2),e.vxM(t.isNewService?-1:4)}}function fe(o,l){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"button",79),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.closeModal())}),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"button",78),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.createService())}),e.EFF(5),e.nI1(6,"translate"),e.k0s()()}2&o&&(e.R7$(2),e.SpI("",e.bMT(3,2,"service.refuse.create")," "),e.R7$(3),e.SpI("",e.bMT(6,4,"service.confirm.create")," "))}function he(o,l){if(1&o){const t=e.RV6();e.j41(0,"div",72),e.DNE(1,de,3,3,"h4")(2,pe,3,3,"h4"),e.j41(3,"button",73),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeModal())}),e.k0s()(),e.j41(4,"div",74),e.DNE(5,me,3,3,"div")(6,ue,3,3,"span"),e.k0s(),e.j41(7,"div",75),e.DNE(8,be,5,4,"div")(9,fe,7,6,"div"),e.k0s()}if(2&o){const t=e.XpG();e.R7$(),e.vxM(t.isNewService?-1:1),e.R7$(),e.vxM(t.isNewService?2:-1),e.R7$(3),e.vxM(t.isNewService?-1:5),e.R7$(),e.vxM(t.isNewService?6:-1),e.R7$(2),e.vxM(t.isNewService?-1:8),e.R7$(),e.vxM(t.isNewService?9:-1)}}let j=(()=>{class o{constructor(t,r,n,i,a,c,p,I,C,u){this.ldnServicesService=t,this.ldnItemFiltersService=r,this.formBuilder=n,this.router=i,this.route=a,this.cdRef=c,this.modalService=p,this.notificationService=I,this.translateService=C,this.paginationService=u,this.inboundPatterns=X,this.config=Object.assign(new P._,{elementsPerPage:20}),this.markedForDeletionInboundPattern=[],this.deletedInboundPatterns=[],this.selectPatternDefaultLabelI18Key="ldn-service.form.label.placeholder.default-select",this.formModel=this.formBuilder.group({id:[""],name:["",d.k0.required],description:[""],url:["",d.k0.required],ldnUrl:["",d.k0.required],lowerIp:["",[d.k0.required,new $]],upperIp:["",[d.k0.required,new $]],score:["",[d.k0.required,d.k0.pattern("^0*(.[0-9]+)?$|^1(.0+)?$")]],inboundPattern:[""],constraintPattern:[""],enabled:[""],usesActorEmailId:[""],type:B.zd.value})}ngOnInit(){this.routeSubscription=this.route.params.pipe((0,A.v)(this.route.url)).subscribe(([t,r])=>{this.serviceId=t.serviceId,this.isNewService="new"===r[0].path,this.formModel.addControl("notifyServiceInboundPatterns",this.formBuilder.array([this.createInboundPatternFormGroup()])),this.areControlsInitialized=!0,this.serviceId&&!this.isNewService&&this.fetchServiceData(this.serviceId)}),this.setItemFilters()}ngOnDestroy(){this.routeSubscription.unsubscribe()}setItemFilters(){this.itemFiltersRD$=this.ldnItemFiltersService.findAll().pipe((0,m.qD)())}createService(){if(this.formModel.markAllAsTouched(),this.formModel.invalid)return void this.closeModal();this.formModel.value.notifyServiceInboundPatterns=this.formModel.value.notifyServiceInboundPatterns.map(n=>{const{patternLabel:i,...a}=n;return delete a.constraintFormatted,a});const t={...this.formModel.value,enabled:!0,usesActorEmailId:this.formModel.get("usesActorEmailId").value};this.ldnServicesService.create(t).pipe((0,m.qD)()).subscribe(n=>{n.hasSucceeded?(this.notificationService.success(this.translateService.get("ldn-service-notification.created.success.title"),this.translateService.get("ldn-service-notification.created.success.body")),this.closeModal(),this.sendBack()):(this.formModel.errors||this.setLdnUrlError(),this.notificationService.error(this.translateService.get("ldn-service-notification.created.failure.title"),this.translateService.get("ldn-service-notification.created.failure.body")),this.closeModal())})}checkPatterns(t){for(let r=0;r<t.length;r++)if(t.at(r).get("pattern").value)return!0;return!1}fetchServiceData(t){this.ldnServicesService.findById(t).pipe((0,m.qD)()).subscribe(r=>{r.hasSucceeded&&(this.ldnService=r.payload,this.formModel.patchValue({id:this.ldnService.id,name:this.ldnService.name,description:this.ldnService.description,url:this.ldnService.url,score:this.ldnService.score,ldnUrl:this.ldnService.ldnUrl,type:this.ldnService.type,enabled:this.ldnService.enabled,usesActorEmailId:this.ldnService.usesActorEmailId,lowerIp:this.ldnService.lowerIp,upperIp:this.ldnService.upperIp}),this.filterPatternObjectsAndAssignLabel("notifyServiceInboundPatterns"),this.formModel.get("notifyServiceInboundPatterns").controls.forEach(i=>{const a=i,c=a.get("constraint").value;a.patchValue({constraintFormatted:c?this.translateService.instant(c+".label"):""})}))})}filterPatternObjectsAndAssignLabel(t){const r=this.formModel.get(t);r.clear();const n=[...this.ldnService.notifyServiceInboundPatterns];0===n.length&&n.push({pattern:"",constraint:"",automatic:"false"}),n.forEach(i=>{const a=this.initializeInboundPatternFormGroup(),c=i?.pattern?"ldn-service.form.pattern."+i?.pattern+".label":"ldn-service.form.label.placeholder.default-select",p=Object.assign(new g,{...i,patternLabel:this.translateService.instant(c)});a.patchValue(p),r.push(a),this.cdRef.detectChanges()})}generatePatchOperations(){const t=[];return this.createReplaceOperation(t,"name","/name"),this.createReplaceOperation(t,"description","/description"),this.createReplaceOperation(t,"ldnUrl","/ldnurl"),this.createReplaceOperation(t,"url","/url"),this.createReplaceOperation(t,"score","/score"),this.createReplaceOperation(t,"lowerIp","/lowerIp"),this.createReplaceOperation(t,"upperIp","/upperIp"),this.handlePatterns(t,"notifyServiceInboundPatterns"),this.deletedInboundPatterns.forEach(r=>{t.push({op:"remove",path:`notifyServiceInboundPatterns[${r}]`})}),t}onSubmit(){this.openConfirmModal(this.confirmModal)}addInboundPattern(){this.formModel.get("notifyServiceInboundPatterns").push(this.createInboundPatternFormGroup())}selectInboundPattern(t,r){const n=this.formModel.get("notifyServiceInboundPatterns");n.controls[r].patchValue({pattern:t}),n.controls[r].patchValue({patternLabel:this.translateService.instant("ldn-service.form.pattern."+t+".label")})}selectInboundItemFilter(t,r){const n=this.formModel.get("notifyServiceInboundPatterns");n.controls[r].patchValue({constraint:t,constraintFormatted:this.translateService.instant((""!==t?t:"ldn.no-filter")+".label")}),n.markAllAsTouched()}toggleAutomatic(t){const r=this.formModel.get(`notifyServiceInboundPatterns.${t}.automatic`);r&&(r.markAsTouched(),r.setValue(!r.value))}toggleEnabled(){const t=!this.formModel.get("enabled").value;this.ldnServicesService.patch(this.ldnService,[{op:"replace",path:"/enabled",value:t}]).pipe((0,m.qD)()).subscribe(()=>{this.formModel.get("enabled").setValue(t),this.cdRef.detectChanges()})}toggleUsesActorEmailId(){const t=!this.formModel.get("usesActorEmailId").value;this.isNewService?(this.formModel.get("usesActorEmailId").setValue(t),this.cdRef.detectChanges()):this.ldnServicesService.patch(this.ldnService,[{op:"replace",path:"/usesActorEmailId",value:t}]).pipe((0,m.qD)()).subscribe(()=>{this.formModel.get("usesActorEmailId").setValue(t),this.cdRef.detectChanges()})}closeModal(){this.modalRef.close(),this.cdRef.detectChanges()}openConfirmModal(t){this.modalRef=this.modalService.open(t)}patchService(){this.deleteMarkedInboundPatterns();const t=this.generatePatchOperations();this.formModel.markAllAsTouched(),this.formModel.invalid?this.closeModal():this.ldnServicesService.patch(this.ldnService,t).pipe((0,m.qD)()).subscribe(r=>{r.hasSucceeded?(this.closeModal(),this.sendBack(),this.notificationService.success(this.translateService.get("admin.registries.services-formats.modify.success.head"),this.translateService.get("admin.registries.services-formats.modify.success.content"))):(this.formModel.errors||this.setLdnUrlError(),this.notificationService.error(this.translateService.get("admin.registries.services-formats.modify.failure.head"),this.translateService.get("admin.registries.services-formats.modify.failure.content")),this.closeModal())})}resetFormAndLeave(){this.sendBack()}markForInboundPatternDeletion(t){this.markedForDeletionInboundPattern.includes(t)||this.markedForDeletionInboundPattern.push(t)}unmarkForInboundPatternDeletion(t){const r=this.markedForDeletionInboundPattern.indexOf(t);-1!==r&&this.markedForDeletionInboundPattern.splice(r,1)}deleteMarkedInboundPatterns(){this.markedForDeletionInboundPattern.sort((r,n)=>n-r);const t=this.formModel.get("notifyServiceInboundPatterns");for(const r of this.markedForDeletionInboundPattern)r>=0&&r<t.length&&(t.at(r).value.isNew?t.removeAt(r):this.deletedInboundPatterns.push(r));this.markedForDeletionInboundPattern=[]}createReplaceOperation(t,r,n){this.formModel.get(r).dirty&&t.push({op:"replace",path:n,value:this.formModel.get(r).value.toString()})}handlePatterns(t,r){const n=this.formModel.get(r);for(let i=0;i<n.length;i++){const a=n.at(i),c=a.value;delete c.constraintFormatted,a.touched&&a.valid&&(delete c?.patternLabel,c.isNew?(delete c.isNew,t.push({op:"add",path:`${r}/-`,value:c})):t.push({op:"replace",path:`${r}[${i}]`,value:c}))}}sendBack(){this.router.navigateByUrl("admin/ldn/services")}createInboundPatternFormGroup(){const t={pattern:"",patternLabel:this.translateService.instant(this.selectPatternDefaultLabelI18Key),constraint:"",constraintFormatted:"",automatic:!1,isNew:!0};return this.isNewService&&delete t.isNew,this.formBuilder.group(t)}initializeInboundPatternFormGroup(){return this.formBuilder.group({pattern:"",patternLabel:"",constraint:"",constraintFormatted:"",automatic:""})}setLdnUrlError(){const t=this.formModel.controls.ldnUrl;t.setErrors({...t.errors||{},ldnUrlAlreadyAssociated:!0})}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(T.LdnServicesService),e.rXU(V.LdnItemfiltersService),e.rXU(d.ok),e.rXU(S.Ix),e.rXU(S.nX),e.rXU(e.gRc),e.rXU(v.Bq),e.rXU(x.I),e.rXU(f.c$),e.rXU(y.m))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["ds-ldn-service-form"]],viewQuery:function(r,n){if(1&r&&(e.GBs(U,7),e.GBs(z,7)),2&r){let i;e.mGM(i=e.lsd())&&(n.confirmModal=i.first),e.mGM(i=e.lsd())&&(n.resetFormModal=i.first)}},standalone:!0,features:[e.aNF],ngContentSelectors:Y,decls:88,vars:85,consts:[["confirmModal",""],["inboundPatternDropdown","ngbDropdown"],["inboundItemfilterDropdown","ngbDropdown"],[1,"container"],[3,"ngSubmit","formGroup"],[1,"d-flex"],[1,"flex-grow-1"],[1,"toggle-switch-container"],[1,"mb-5"],["for","name",1,"fw-bold"],["formControlName","name","id","name","name","name","type","text",1,"form-control",3,"placeholder"],[1,"error-text"],[1,"mb-5","mt-5","d-flex","flex-column"],["for","description",1,"fw-bold"],["formControlName","description","id","description","name","description",1,"form-control",3,"placeholder"],[1,"mb-5","mt-5"],[1,"d-flex","align-items-center"],[1,"d-flex","flex-column","w-50","me-2"],["for","url",1,"fw-bold"],["formControlName","url","id","url","name","url","type","text",1,"form-control",3,"placeholder"],[1,"d-flex","flex-column","w-50"],["for","score",1,"fw-bold"],["formControlName","score","id","score","name","score","min","0","max","1","step",".01","type","number",1,"form-control",3,"placeholder"],["for","lowerIp",1,"fw-bold"],["formControlName","lowerIp","id","lowerIp","name","lowerIp","type","text",1,"form-control","me-2",3,"placeholder"],["formControlName","upperIp","id","upperIp","name","upperIp","type","text",1,"form-control",3,"placeholder"],[1,"text-muted"],["for","ldnUrl",1,"fw-bold"],["formControlName","ldnUrl","id","ldnUrl","name","ldnUrl","type","text",1,"form-control",3,"placeholder"],["for","usesActorEmailId",1,"status-label","fw-bold"],["formControlName","usesActorEmailId","hidden","","id","usesActorEmailId","name","usesActorEmailId","type","checkbox"],[1,"toggle-switch",3,"click"],[1,"slider"],[1,"row","mb-1","mt-5"],[1,"add-pattern-link","mb-2",3,"click"],[1,"mb-3","row"],[1,"col","text-end","space-children-mr"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-save"],["for","enabled",1,"status-label","fw-bold"],["formControlName","enabled","hidden","","id","enabled","name","enabled","type","checkbox"],[1,"col"],[1,"fw-bold"],[1,"col-sm-2"],[1,"col-sm-1"],["formGroupName","notifyServiceInboundPatterns",3,"marked-for-deletion"],["formGroupName","notifyServiceInboundPatterns"],[3,"formGroupName"],[1,"row","mb-1","align-items-center"],["display","dynamic","ngbDropdown","","placement","top-start",1,"w-80",3,"id"],["role","combobox","aria-expanded","false","aria-controls","inboundPatternDropdownButton",1,"position-relative","right-addon"],["aria-hidden","true","ngbDropdownToggle","",1,"position-absolute","scrollable-dropdown-toggle"],["formControlName","patternLabel","id","inboundPatternDropdownButton","ngbDropdownAnchor","","type","text",1,"form-control","w-80","scrollable-dropdown-input",3,"click","readonly","value"],["aria-labelledby","inboundPatternDropdownButton","ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-top","w-100"],["role","listbox",1,"scrollable-menu"],["ngbDropdownItem","","type","button",1,"dropdown-item","collection-item","text-truncate","w-100",3,"title"],["ngbDropdown","","placement","top-start",1,"w-100",3,"id"],["formControlName","automatic","hidden","","type","checkbox",3,"id","name"],[1,"btn-group"],["type","button",1,"btn","btn-outline-dark","trash-button",3,"click","title"],[1,"fas","fa-trash"],["type","button",1,"btn","btn-warning",3,"title"],["ngbDropdownItem","","type","button",1,"dropdown-item","collection-item","text-truncate","w-100",3,"click","title"],["aria-expanded","false","aria-controls","inboundItemfilterDropdown","role","combobox",1,"position-relative","right-addon"],["formControlName","constraint","id","inboundItemfilterDropdown","ngbDropdownAnchor","","type","text",1,"form-control","d-none","w-100","scrollable-dropdown-input",3,"readonly"],["formControlName","constraintFormatted","id","inboundItemfilterDropdownPrettified","ngbDropdownAnchor","","type","text",1,"form-control","w-100","scrollable-dropdown-input",3,"click","readonly"],["aria-labelledby","inboundItemfilterDropdownButton","ngbDropdownMenu","",1,"dropdown-menu","scrollable-dropdown-menu","w-100"],["ngbDropdownItem","","type","button",1,"dropdown-item","collection-item","text-truncate","w-100",3,"click"],["ngbDropdownItem","","type","button",1,"dropdown-item","collection-item","text-truncate","w-100"],["type","button",1,"btn","btn-warning",3,"click","title"],[1,"fas","fa-undo"],[1,"modal-header"],["aria-label","Close","type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["id","delete-confirm-edit",1,"btn","btn-outline-secondary","me-2",3,"click"],[1,"btn","btn-primary"],[1,"btn","btn-primary",3,"click"],["id","delete-confirm-new",1,"btn","btn-outline-secondary","me-2",3,"click"]],template:function(r,n){if(1&r){const i=e.RV6();e.NAR(J),e.j41(0,"div",3)(1,"form",4),e.bIt("ngSubmit",function(){return e.eBV(i),e.Njj(n.onSubmit())}),e.j41(2,"div",5)(3,"h1",6),e.EFF(4),e.nI1(5,"translate"),e.nI1(6,"translate"),e.k0s()(),e.DNE(7,Q,8,5,"div",7),e.j41(8,"div",8)(9,"label",9),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.nrm(12,"input",10),e.nI1(13,"translate"),e.DNE(14,K,3,3,"div",11),e.k0s(),e.j41(15,"div",12)(16,"label",13),e.EFF(17),e.nI1(18,"translate"),e.k0s(),e.nrm(19,"textarea",14),e.nI1(20,"translate"),e.k0s(),e.j41(21,"div",15)(22,"div",16)(23,"div",17)(24,"label",18),e.EFF(25),e.nI1(26,"translate"),e.k0s(),e.nrm(27,"input",19),e.nI1(28,"translate"),e.DNE(29,W,3,3,"div",11),e.k0s(),e.j41(30,"div",20)(31,"label",21),e.EFF(32),e.nI1(33,"translate"),e.k0s(),e.nrm(34,"input",22),e.nI1(35,"translate"),e.DNE(36,Z,3,3,"div",11),e.k0s()()(),e.j41(37,"div",15)(38,"label",23),e.EFF(39),e.nI1(40,"translate"),e.k0s(),e.j41(41,"div",5),e.nrm(42,"input",24),e.nI1(43,"translate"),e.nrm(44,"input",25),e.nI1(45,"translate"),e.k0s(),e.DNE(46,H,3,3,"div",11),e.j41(47,"div",26),e.EFF(48),e.nI1(49,"translate"),e.k0s()(),e.j41(50,"div",15)(51,"label",27),e.EFF(52),e.nI1(53,"translate"),e.k0s(),e.nrm(54,"input",28),e.nI1(55,"translate"),e.DNE(56,te,3,2,"div"),e.k0s(),e.j41(57,"div",15)(58,"label",29),e.EFF(59),e.nI1(60,"translate"),e.k0s(),e.j41(61,"div"),e.nrm(62,"input",30),e.j41(63,"div",31),e.bIt("click",function(){return e.eBV(i),e.Njj(n.toggleUsesActorEmailId())}),e.nrm(64,"div",32),e.k0s(),e.j41(65,"div",26),e.EFF(66),e.nI1(67,"translate"),e.k0s()()(),e.DNE(68,oe,7,4,"div",33)(69,ce,3,0,"div"),e.j41(70,"span",34),e.bIt("click",function(){return e.eBV(i),e.Njj(n.addInboundPattern())}),e.EFF(71),e.nI1(72,"translate"),e.k0s(),e.nrm(73,"hr"),e.j41(74,"div",35)(75,"div",36),e.SdG(76),e.j41(77,"button",37),e.bIt("click",function(){return e.eBV(i),e.Njj(n.resetFormAndLeave())}),e.j41(78,"span"),e.EFF(79),e.nI1(80,"translate"),e.k0s()(),e.j41(81,"button",38)(82,"span"),e.nrm(83,"i",39),e.EFF(84),e.nI1(85,"translate"),e.k0s()()()()()(),e.DNE(86,he,10,6,"ng-template",null,0,e.C5r)}2&r&&(e.R7$(),e.Y8G("formGroup",n.formModel),e.R7$(3),e.JRh(n.isNewService?e.bMT(5,43,"ldn-create-service.title"):e.bMT(6,45,"ldn-edit-registered-service.title")),e.R7$(3),e.vxM(n.isNewService?-1:7),e.R7$(3),e.JRh(e.bMT(11,47,"ldn-new-service.form.label.name")),e.R7$(2),e.AVh("invalid-field",n.formModel.get("name").invalid&&n.formModel.get("name").touched),e.Y8G("placeholder",e.bMT(13,49,"ldn-new-service.form.placeholder.name")),e.R7$(2),e.vxM(n.formModel.get("name").invalid&&n.formModel.get("name").touched?14:-1),e.R7$(3),e.JRh(e.bMT(18,51,"ldn-new-service.form.label.description")),e.R7$(2),e.Y8G("placeholder",e.bMT(20,53,"ldn-new-service.form.placeholder.description")),e.R7$(6),e.JRh(e.bMT(26,55,"ldn-new-service.form.label.url")),e.R7$(2),e.AVh("invalid-field",n.formModel.get("url").invalid&&n.formModel.get("url").touched),e.Y8G("placeholder",e.bMT(28,57,"ldn-new-service.form.placeholder.url")),e.R7$(2),e.vxM(n.formModel.get("url").invalid&&n.formModel.get("url").touched?29:-1),e.R7$(3),e.JRh(e.bMT(33,59,"ldn-new-service.form.label.score")),e.R7$(2),e.AVh("invalid-field",n.formModel.get("score").invalid&&n.formModel.get("score").touched),e.Y8G("placeholder",e.bMT(35,61,"ldn-new-service.form.placeholder.score")),e.R7$(2),e.vxM(n.formModel.get("score").invalid&&n.formModel.get("score").touched?36:-1),e.R7$(3),e.JRh(e.bMT(40,63,"ldn-new-service.form.label.ip-range")),e.R7$(3),e.AVh("invalid-field",n.formModel.get("lowerIp").invalid&&n.formModel.get("lowerIp").touched),e.Y8G("placeholder",e.bMT(43,65,"ldn-new-service.form.placeholder.lowerIp")),e.R7$(2),e.AVh("invalid-field",n.formModel.get("upperIp").invalid&&n.formModel.get("upperIp").touched),e.Y8G("placeholder",e.bMT(45,67,"ldn-new-service.form.placeholder.upperIp")),e.R7$(2),e.vxM(n.formModel.get("lowerIp").invalid&&n.formModel.get("lowerIp").touched||n.formModel.get("upperIp").invalid&&n.formModel.get("upperIp").touched?46:-1),e.R7$(2),e.SpI(" ",e.bMT(49,69,"ldn-new-service.form.hint.ipRange")," "),e.R7$(4),e.JRh(e.bMT(53,71,"ldn-new-service.form.label.ldnUrl")),e.R7$(2),e.AVh("invalid-field",n.formModel.get("ldnUrl").invalid&&n.formModel.get("ldnUrl").touched),e.Y8G("placeholder",e.bMT(55,73,"ldn-new-service.form.placeholder.ldnUrl")),e.R7$(2),e.vxM(n.formModel.get("ldnUrl").invalid&&n.formModel.get("ldnUrl").touched?56:-1),e.R7$(3),e.JRh(e.bMT(60,75,"ldn-service-usesActorEmailId")),e.R7$(4),e.AVh("checked",n.formModel.get("usesActorEmailId").value),e.R7$(3),e.SpI(" ",e.bMT(67,77,"ldn-service-usesActorEmailId-description")," "),e.R7$(2),e.vxM(n.areControlsInitialized?68:-1),e.R7$(),e.vxM(n.areControlsInitialized?69:-1),e.R7$(2),e.JRh(e.bMT(72,79,"ldn-new-service.form.label.addPattern")),e.R7$(8),e.SpI("\xa0",e.bMT(80,81,"submission.general.back.submit"),""),e.R7$(5),e.SpI("\xa0",e.bMT(85,83,"ldn-new-service.form.label.submit"),""))},dependencies:[_.Jj,v.zH,v.tg,v.E5,v.do,v.U0,v._H,d.X1,d.qT,d.me,d.Q0,d.Zm,d.BC,d.cb,d.VZ,d.zX,d.j4,d.JD,d.$R,f.h,f.D9],styles:[".scrollable-menu[_ngcontent-%COMP%]{height:auto;max-height:var(--ds-dropdown-menu-max-height);overflow-x:hidden}.collection-item[_ngcontent-%COMP%]{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}.scrollable-dropdown-loading[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:#fff;height:calc(var(--bs-spacer) * 2)!important;line-height:calc(var(--bs-spacer) * 2);position:sticky;bottom:0}.scrollable-dropdown-menu[_ngcontent-%COMP%]{left:0!important;margin-bottom:var(--bs-spacer);z-index:1000}.scrollable-dropdown-toggle[_ngcontent-%COMP%], .toggle-icon[_ngcontent-%COMP%]{padding:.7rem .7rem 0}.ds-form-input-addon[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}.ds-form-input-btn[_ngcontent-%COMP%]{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.ds-form-input-btn[_ngcontent-%COMP%]:focus{box-shadow:none!important}button.ds-form-add-more[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none!important}.ds-form-input-value[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.fa-spin[_ngcontent-%COMP%]{pointer-events:none}.left-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:0}.right-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:0}.left-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:calc(var(--bs-spacer) * 2.25)}.right-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:calc(var(--bs-spacer) * 2.25)}select.form-control[_ngcontent-%COMP%]{appearance:auto}.col-sm-6[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}form[_ngcontent-%COMP%]{font-size:14px;position:relative}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{max-width:100%;width:100%;padding:8px;font-size:14px}option[_ngcontent-%COMP%]:not(:first-child){font-weight:700}.trash-button[_ngcontent-%COMP%]{width:40px;height:40px}textarea[_ngcontent-%COMP%]{height:200px;resize:none}.add-pattern-link[_ngcontent-%COMP%]{color:#0048ff;cursor:pointer}.remove-pattern-link[_ngcontent-%COMP%]{color:#e34949;cursor:pointer;margin-left:10px}.status-checkbox[_ngcontent-%COMP%]{margin-top:5px}.invalid-field[_ngcontent-%COMP%]{border:1px solid red;color:#000}.error-text[_ngcontent-%COMP%]{color:red;font-size:.8em;margin-top:5px}.toggle-switch[_ngcontent-%COMP%]{display:flex;align-items:center;opacity:.8;position:relative;width:60px;height:30px;background-color:#ccc;border-radius:15px;cursor:pointer;transition:background-color .3s}.toggle-switch.checked[_ngcontent-%COMP%]{background-color:#24cc9a}.slider[_ngcontent-%COMP%]{position:absolute;width:30px;height:30px;border-radius:50%;background-color:#fff;transition:transform .3s}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%;margin:0 auto}.toggle-switch.checked[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{transform:translate(30px)}.toggle-switch-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-end;margin-top:10px}.small-text[_ngcontent-%COMP%]{font-size:.7em;color:#888}.toggle-switch[_ngcontent-%COMP%]{cursor:pointer;margin-top:3px;margin-right:3px}.label-box[_ngcontent-%COMP%]{margin-left:11px}.label-box-2[_ngcontent-%COMP%]{margin-left:14px}.label-box-3[_ngcontent-%COMP%]{margin-left:5px}.submission-form-footer[_ngcontent-%COMP%]{border-radius:var(--bs-card-border-radius);bottom:0;background-color:var(--bs-gray-400);padding:calc(var(--bs-spacer) / 2);z-index:calc(var(--ds-submission-footer-z-index) + 1)}.marked-for-deletion[_ngcontent-%COMP%]{background-color:#f3b7bd}.dropdown-menu-top[_ngcontent-%COMP%], .scrollable-dropdown-menu[_ngcontent-%COMP%]{z-index:var(--ds-submission-footer-z-index)}"],data:{animation:[(0,b.hZ)("toggleAnimation",[(0,b.wk)("true",(0,b.iF)({})),(0,b.wk)("false",(0,b.iF)({})),(0,b.kY)("true <=> false",(0,b.i0)("300ms ease-in"))])]}})}}return o})();var ge=s(25558),_e=s(96354),Me=s(89777),Se=s(2175),Ie=s(8417),Ce=s(24100),Fe=s(25713);const ke=["deleteModal"],we=(o,l)=>({"status-enabled":o,"status-disabled":l}),Re=o=>["/admin/ldn/services/edit/",o];function Pe(o,l){if(1&o){const t=e.RV6();e.j41(0,"tr")(1,"td",11),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"ds-truncatable",12)(5,"ds-truncatable-part",13)(6,"div"),e.EFF(7),e.k0s()()()(),e.j41(8,"td")(9,"span",14),e.nI1(10,"translate"),e.nI1(11,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.toggleStatus(n,i.ldnServicesService))}),e.EFF(12),e.nI1(13,"translate"),e.nI1(14,"translate"),e.k0s()(),e.j41(15,"td")(16,"div",15)(17,"button",16),e.nI1(18,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,i=e.XpG(2);return e.Njj(i.selectServiceToDelete(n.id))}),e.nrm(19,"i",17),e.k0s(),e.j41(20,"button",18),e.nI1(21,"translate"),e.nrm(22,"i",19),e.k0s()()()()}if(2&o){const t=l.$implicit;e.R7$(2),e.JRh(t.name),e.R7$(2),e.Y8G("id",t.id),e.R7$(),e.Y8G("id",t.id)("minLines",2),e.R7$(2),e.SpI(" ",t.description," "),e.R7$(2),e.Y8G("ngClass",e.l_i(23,we,t.enabled,!t.enabled))("title",t.enabled?e.bMT(10,11,"ldn-service.overview.table.clickToDisable"):e.bMT(11,13,"ldn-service.overview.table.clickToEnable")),e.R7$(3),e.SpI(" ",t.enabled?e.bMT(13,15,"ldn-service.overview.table.enabled"):e.bMT(14,17,"ldn-service.overview.table.disabled")," "),e.R7$(5),e.BMQ("aria-label",e.bMT(18,19,"ldn-service-overview-select-delete")),e.R7$(3),e.Y8G("routerLink",e.eq3(26,Re,t.id)),e.BMQ("aria-label",e.bMT(21,21,"ldn-service-overview-select-edit"))}}function ye(o,l){if(1&o&&(e.j41(0,"ds-pagination",7),e.nI1(1,"async"),e.j41(2,"div",8)(3,"table",9)(4,"thead")(5,"tr")(6,"th",10),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"th",10),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"th",10),e.EFF(13),e.nI1(14,"translate"),e.k0s(),e.j41(15,"th",10),e.EFF(16),e.nI1(17,"translate"),e.k0s()()(),e.j41(18,"tbody"),e.Z7z(19,Pe,23,28,"tr",null,e.fX1),e.nI1(21,"async"),e.k0s()()()()),2&o){let t,r;const n=e.XpG();e.Y8G("collectionSize",null==(t=e.bMT(1,8,n.ldnServicesRD$))||null==t.payload?null:t.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",n.pageConfig),e.R7$(7),e.JRh(e.bMT(8,10,"service.overview.table.name")),e.R7$(3),e.JRh(e.bMT(11,12,"service.overview.table.description")),e.R7$(3),e.JRh(e.bMT(14,14,"service.overview.table.status")),e.R7$(3),e.JRh(e.bMT(17,16,"service.overview.table.actions")),e.R7$(3),e.Dyx(null==(r=e.bMT(21,18,n.ldnServicesRD$))||null==r.payload?null:r.payload.page)}}function xe(o,l){if(1&o){const t=e.RV6();e.j41(0,"div")(1,"div",20)(2,"div")(3,"h4"),e.EFF(4),e.nI1(5,"translate"),e.k0s()(),e.j41(6,"button",21),e.nI1(7,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeModal())}),e.k0s()(),e.j41(8,"div",22)(9,"div"),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"div",23)(13,"button",24),e.nI1(14,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.closeModal())}),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.j41(17,"button",25),e.nI1(18,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.deleteSelected(n.selectedServiceId.toString(),n.ldnServicesService))}),e.EFF(19),e.nI1(20,"translate"),e.k0s()()()()}2&o&&(e.R7$(4),e.JRh(e.bMT(5,7,"service.overview.delete.header")),e.R7$(2),e.BMQ("aria-label",e.bMT(7,9,"ldn-service-overview-close-modal")),e.R7$(4),e.SpI(" ",e.bMT(11,11,"service.overview.delete.body")," "),e.R7$(3),e.BMQ("aria-label",e.bMT(14,13,"ldn-service-overview-close-modal")),e.R7$(2),e.JRh(e.bMT(16,15,"service.detail.delete.cancel")),e.R7$(2),e.BMQ("aria-label",e.bMT(18,17,"ldn-service-overview-select-delete")),e.R7$(2),e.SpI("",e.bMT(20,19,"service.overview.delete")," "))}const O=[{path:"",pathMatch:"full",component:(()=>{class o{constructor(t,r,n,i,a,c){this.ldnServicesService=t,this.paginationService=r,this.modalService=n,this.cdRef=i,this.notificationService=a,this.translateService=c,this.selectedServiceId=null,this.servicesData=[],this.config=Object.assign(new P._,{elementsPerPage:10}),this.pageConfig=Object.assign(new Ie.W,{id:"po",pageSize:10})}ngOnInit(){this.setLdnServices()}setLdnServices(){this.ldnServicesRD$=this.paginationService.getFindListOptions(this.pageConfig.id,this.config).pipe((0,ge.n)(t=>this.ldnServicesService.findAll(t,!1,!1).pipe((0,m.qD)())))}ngOnDestroy(){this.paginationService.clearPagination(this.pageConfig.id),(0,Me.a4)(this.isProcessingSub)&&this.isProcessingSub.unsubscribe()}openDeleteModal(t){this.modalRef=this.modalService.open(t)}closeModal(){this.modalRef.close(),this.cdRef.detectChanges()}selectServiceToDelete(t){this.selectedServiceId=t,this.openDeleteModal(this.deleteModal)}deleteSelected(t,r){null!==this.selectedServiceId&&r.delete(t).pipe((0,m.qD)()).subscribe(n=>{n.hasSucceeded?(this.servicesData=this.servicesData.filter(i=>i.id!==t),this.ldnServicesRD$=this.ldnServicesRD$.pipe((0,_e.T)(i=>(i.hasSucceeded&&(i.payload.page=i.payload.page.filter(a=>a.id.toString()!==t)),i))),this.cdRef.detectChanges(),this.closeModal(),this.notificationService.success(this.translateService.get("ldn-service-delete.notification.success.title"),this.translateService.get("ldn-service-delete.notification.success.content"))):(this.notificationService.error(this.translateService.get("ldn-service-delete.notification.error.title"),this.translateService.get("ldn-service-delete.notification.error.content")),this.cdRef.detectChanges())})}toggleStatus(t,r){const n=!t.enabled,i=t.enabled;r.patch(t,[{op:"replace",path:"/enabled",value:n}]).pipe((0,m.qD)()).subscribe(c=>{c.hasSucceeded?(t.enabled=n,this.notificationService.success(this.translateService.get("ldn-enable-service.notification.success.title"),this.translateService.get("ldn-enable-service.notification.success.content"))):(t.enabled=i,this.notificationService.error(this.translateService.get("ldn-enable-service.notification.error.title"),this.translateService.get("ldn-enable-service.notification.error.content")))})}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(T.LdnServicesService),e.rXU(y.m),e.rXU(v.Bq),e.rXU(e.gRc),e.rXU(x.I),e.rXU(f.c$))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["ds-ldn-services-directory"]],viewQuery:function(r,n){if(1&r&&e.GBs(ke,7),2&r){let i;e.mGM(i=e.lsd())&&(n.deleteModal=i.first)}},standalone:!0,features:[e.aNF],decls:14,vars:9,consts:[["deleteModal",""],[1,"container"],[1,"d-flex"],[1,"flex-grow-1"],[1,"d-flex","justify-content-end"],["routerLink","/admin/ldn/services/new",1,"btn","btn-success"],[1,"fas","fa-plus","pe-2"],[3,"collectionSize","hideGear","hidePagerWhenSinglePage","paginationOptions"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],["scope","col"],[1,"col-3"],[3,"id"],[3,"id","minLines"],[1,"status-indicator",3,"click","ngClass","title"],[1,"btn-group"],[1,"btn","btn-outline-danger",3,"click"],[1,"fas","fa-trash"],[1,"btn","btn-outline-dark",3,"routerLink"],[1,"fas","fa-edit"],[1,"modal-header"],["aria-label","Close","type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-4","text-end"],[1,"btn","btn-outline-secondary","me-2",3,"click"],["id","delete-confirm",1,"btn","btn-danger",3,"click"]],template:function(r,n){if(1&r&&(e.j41(0,"div",1)(1,"div",2)(2,"h1",3),e.EFF(3),e.nI1(4,"translate"),e.k0s()(),e.j41(5,"div",4)(6,"button",5),e.nrm(7,"i",6),e.EFF(8),e.nI1(9,"translate"),e.k0s()(),e.DNE(10,ye,22,20,"ds-pagination",7),e.nI1(11,"async"),e.k0s(),e.DNE(12,xe,21,21,"ng-template",null,0,e.C5r)),2&r){let i;e.R7$(3),e.JRh(e.bMT(4,3,"ldn-registered-services.title")),e.R7$(5),e.JRh(e.bMT(9,5,"process.overview.new")),e.R7$(2),e.vxM((null==(i=e.bMT(11,7,n.ldnServicesRD$))||null==i.payload?null:i.payload.totalElements)>0?10:-1)}},dependencies:[_.Jj,_.YU,Se.e,S.Wk,f.h,f.D9,Ce.d,Fe.W],styles:[".status-indicator[_ngcontent-%COMP%]{padding:2.5px 25px;border-radius:4px;cursor:pointer;transition:background-color .5s}.status-enabled[_ngcontent-%COMP%]{background-color:#daf7a6;color:#4f5359;font-size:85%;font-weight:700}.status-enabled[_ngcontent-%COMP%]:hover{background-color:#faa0a0}.status-disabled[_ngcontent-%COMP%]{background-color:#faa0a0;color:#4f5359;font-size:85%;font-weight:700}.status-disabled[_ngcontent-%COMP%]:hover{background-color:#daf7a6}"]})}}return o})(),resolve:{breadcrumb:E.S},data:{title:"ldn-registered-services.title",breadcrumbKey:"ldn-registered-services.new"}},{path:"new",resolve:{breadcrumb:w},component:j,data:{title:"ldn-register-new-service.title",breadcrumbKey:"ldn-register-new-service"}},{path:"edit/:serviceId",resolve:{breadcrumb:w},component:j,data:{title:"ldn-edit-service.title",breadcrumbKey:"ldn-edit-service"}}],$e=O.map(o=>({...o,data:{...o.data,relatedRoutes:O.filter(l=>l.path!==o.path).map(l=>({path:l.path,data:l.data}))}}))}}]);