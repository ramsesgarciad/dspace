"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[473],{80495:(b,D,t)=>{t.d(D,{Q:()=>m});class m{constructor(o,p){this.text=o,this.url=p}}},45585:(b,D,t)=>{t.d(D,{h:()=>i});var m=t(54438),e=t(7901),o=t(68018),p=t(7673),r=t(96354),O=t(25558),v=t(15343),n=t(54009),c=t(4093),u=t(89777);const i=(s,_,h=(0,m.WQX)(n.BrowseDefinitionDataService),B=(0,m.WQX)(e.Ix),P=(0,m.WQX)(o.c$))=>{const T=s.data.title,f=s.params.id||s.queryParams.id||s.data.id;let y;y=(0,u.Tn)(s.data.browseDefinition)&&(0,u.a4)(f)?h.findById(f).pipe((0,c.qD)(),(0,r.T)(C=>C.payload)):(0,p.of)(s.data.browseDefinition);const g=s.queryParams.scope??s.parent?.params.id,I=s.queryParams.value,U=P.instant(`browse.metadata.${f}`);return y.pipe((0,O.n)(C=>(0,u.a4)(C)?(s.data=function E(s,_,h,B,P,T,f){return Object.assign({},T.data,{title:s,id:_,browseDefinition:h,field:B,value:(0,u.a4)(P)?`"${P}"`:"",scope:f})}(T,f,C,U,I,s,g),(0,p.of)(!0)):(B.navigate([v.RD]),(0,p.of)(!1))))}},42108:(b,D,t)=>{t.d(D,{p:()=>e});var m=t(59072);const e=(o,p)=>(o.data=Object.assign({},o.data,{breadcrumbKey:o.data.breadcrumbKey+"."+o.params.id}),(0,m.S)(o,p))},60473:(b,D,t)=>{t.r(D),t.d(D,{ROUTES:()=>A});var m=t(59072),e=t(54438),o=t(96354),p=t(15343),r=t(46541),O=t(98733),v=t(4093),n=t(89777),u=t(60177),i=t(68018),E=t(7673),s=t(84572),_=t(5964),h=t(96697),B=t(25558),P=t(78544),T=t(94314),f=t(82584),y=t(7901);const g=()=>[u.Jj,t.e(958).then(t.bind(t,60958)).then(d=>d.GeospatialMapComponent)];function I(d,S){if(1&d&&(e.nrm(0,"ds-geospatial-map",1),e.nI1(1,"async")),2&d){const a=e.XpG();e.Y8G("facetValues",a.facetValues$)("currentScope",e.bMT(1,3,a.scope$))("layout","browse")}}let U=(()=>{class d{constructor(a,l,M){this.searchConfigurationService=a,this.searchService=l,this.route=M,this.isPlatformBrowser=u.UE,this.facetValues$=(0,E.of)(null)}ngOnInit(){this.scope$=this.route.queryParams.pipe((0,o.T)(a=>a.scope)),this.facetValues$=this.getFacetValues()}getFacetValues(){return(0,s.z)([this.scope$,this.searchConfigurationService.getConfig("",P.c.geospatialMapViewer.spatialFacetDiscoveryConfiguration).pipe((0,v.qD)(),(0,v.ak)(),(0,_.p)(a=>(0,n.a4)(a)),(0,h.s)(1),(0,o.T)(a=>a[0]),(0,_.p)(a=>(0,n.a4)(a)))]).pipe((0,B.n)(([a,l])=>{l.pageSize=99999;const M=Object.assign({configuration:P.c.geospatialMapViewer.spatialFacetDiscoveryConfiguration,scope:a,facetLimit:99999});return this.searchService.getFacetValuesFor(l,1,M,null,!0)}),(0,v.qD)(),(0,v.ak)())}static{this.\u0275fac=function(l){return new(l||d)(e.rXU(f.g),e.rXU(T.S),e.rXU(y.nX))}}static{this.\u0275cmp=e.VBU({type:d,selectors:[["ds-browse-by-geospatial-data"]],standalone:!0,features:[e.aNF],decls:7,vars:3,consts:[[1,"container"],[2,"width","100%",3,"facetValues","currentScope","layout"]],template:function(l,M){1&l&&(e.j41(0,"div",0)(1,"h1"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,I,2,5),e.nv$(5,4,g),e.g25(),e.k0s()),2&l&&(e.R7$(2),e.JRh(e.bMT(3,1,"browse.metadata.map")))},dependencies:[i.h,i.D9],changeDetection:0})}}return d})();var C=t(45585),R=t(42108),L=t(37345);const A=[{path:"",resolve:{breadcrumb:(d,S,a=(0,e.WQX)(r.U),l=(0,e.WQX)(O.DSpaceObjectDataService))=>{const M=d.queryParams.scope;if((0,n.a4)(M))return l.findById(M).pipe((0,v.yd)(),(0,v.Bo)(),(0,o.T)(K=>({provider:a,key:K,url:(0,p.wN)(K)})))}},children:[{path:"map",component:U,resolve:{breadcrumb:m.S},data:{title:"browse.map.page",breadcrumbKey:"browse.metadata.map"}},{path:":id",component:(()=>{class d{constructor(a){this.route=a}ngOnInit(){this.browseByType$=this.route.data.pipe((0,o.T)(a=>({type:a.browseDefinition.getRenderType()})))}static{this.\u0275fac=function(l){return new(l||d)(e.rXU(y.nX))}}static{this.\u0275cmp=e.VBU({type:d,selectors:[["ds-browse-by-page"]],standalone:!0,features:[e.aNF],decls:3,vars:3,consts:[[1,"container"],[3,"browseByType"]],template:function(l,M){1&l&&(e.j41(0,"div",0),e.nrm(1,"ds-browse-by-switcher",1),e.nI1(2,"async"),e.k0s()),2&l&&(e.R7$(),e.Y8G("browseByType",e.bMT(2,1,M.browseByType$)))},dependencies:[u.Jj,L.e]})}}return d})(),canActivate:[C.h],resolve:{breadcrumb:R.p},data:{title:"browse.title.page",breadcrumbKey:"browse.metadata"}}]}]},37345:(b,D,t)=>{t.d(D,{e:()=>v}),t(40940);var e=t(43764),o=t(60163),p=t(29297),r=t(54438);function O(n,c){}let v=(()=>{class n extends e.e{constructor(){super(...arguments),this.inputNamesDependentForComponent=["context","browseByType"],this.inputNames=["context","browseByType","displayTitle","scope"]}getComponent(){return(0,p.cv)(this.browseByType.type,this.context,this.themeService.getThemeName())}static{this.\u0275fac=(()=>{let u;return function(E){return(u||(u=r.xGo(n)))(E||n)}})()}static{this.\u0275cmp=r.VBU({type:n,selectors:[["ds-browse-by-switcher"]],inputs:{context:"context",browseByType:"browseByType",displayTitle:"displayTitle",scope:"scope"},standalone:!0,features:[r.Vt3,r.aNF],decls:2,vars:0,consts:[["DynamicComponentLoader",""],["dsDynamicComponentLoader",""]],template:function(i,E){1&i&&r.DNE(0,O,0,0,"ng-template",1,0,r.C5r)},dependencies:[o.z],encapsulation:2})}}return n})()},46541:(b,D,t)=>{t.d(D,{U:()=>E});var m=t(7673),e=t(47677),o=t(25558),p=t(96354),r=t(15343),O=t(80495),v=t(89777),n=t(4600),c=t(8177),u=t(43446),i=t(54438);let E=(()=>{class s{constructor(h,B){this.linkService=h,this.dsoNameService=B}getBreadcrumbs(h,B){const P=this.dsoNameService.getName(h),T=new O.Q(P,B),f=h.getParentLinkKey();return this.linkService.resolveLink(h,(0,n.s)(f))[f].pipe((0,e.I)(y=>y.hasSucceeded||204===y.statusCode),(0,o.n)(y=>{if((0,v.a4)(y)&&(0,v.a4)(y.payload)){const g=y.payload;return this.getBreadcrumbs(g,(0,r.wN)(g))}return(0,m.of)([])}),(0,p.T)(y=>[...y,T]))}static{this.\u0275fac=function(B){return new(B||s)(i.KVO(c._),i.KVO(u.f))}}static{this.\u0275prov=i.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},59072:(b,D,t)=>{t.d(D,{S:()=>n});var m=t(54438),e=t(89777),o=t(54034),p=t(7673),r=t(80495);let v=(()=>{class c{getBreadcrumbs(i,E){return(0,p.of)([new r.Q(i+".breadcrumbs",E)])}static{this.\u0275fac=function(E){return new(E||c)}}static{this.\u0275prov=m.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();const n=(c,u,i=(0,m.WQX)(v))=>{const E=c.data.breadcrumbKey;if((0,e.Tn)(E))throw new Error('You provided an i18nBreadcrumbResolver for url "'+c.url+"\" but no breadcrumbKey in the route's data");return{provider:i,key:E,url:(0,o.F)(c)}}}}]);