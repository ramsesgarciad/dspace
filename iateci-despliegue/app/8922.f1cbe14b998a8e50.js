(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[8922],{89535:(D,v,t)=>{"use strict";t.r(v),t.d(v,{WorkspaceItemsDeletePageComponent:()=>T});var m=t(74523),l=t(60177),d=t(68018),p=t(96354),a=t(96697),u=t(25558),f=t(87507),h=t(4093),b=t(25645),E=t(94549),P=t(9847),e=t(54438),g=t(7901),I=t(58003);function k(r,C){if(1&r&&(e.nrm(0,"ds-modify-item-overview",2),e.nI1(1,"async")),2&r){const o=e.XpG();e.Y8G("item",e.bMT(1,1,o.dso$))}}function M(r,C){if(1&r){const o=e.RV6();e.j41(0,"div",6)(1,"div",7),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"button",8),e.bIt("click",function(){const n=e.eBV(o).dismiss;return e.Njj(n("cancel"))}),e.k0s()(),e.j41(5,"div",9)(6,"p"),e.EFF(7),e.nI1(8,"translate"),e.k0s()(),e.j41(9,"div",10)(10,"button",11),e.bIt("click",function(){const n=e.eBV(o).close;return e.Njj(n("cancel"))}),e.EFF(11),e.nI1(12,"translate"),e.k0s(),e.j41(13,"button",12),e.bIt("click",function(){const n=e.eBV(o).close;return e.Njj(n("ok"))}),e.EFF(14),e.nI1(15,"translate"),e.k0s()()}2&r&&(e.R7$(2),e.JRh(e.bMT(3,4,"workspace-item.delete.header")),e.R7$(5),e.JRh(e.bMT(8,6,"submission.general.discard.confirm.info")),e.R7$(4),e.JRh(e.bMT(12,8,"submission.general.discard.confirm.cancel")),e.R7$(3),e.JRh(e.bMT(15,10,"submission.general.discard.confirm.submit")))}let T=(()=>{class r{constructor(o,s,n,i,c,_,R,O){this.activatedRoute=o,this.router=s,this.routeService=n,this.workspaceItemService=i,this.notificationsService=c,this.translationService=_,this.location=R,this.modalService=O}ngOnInit(){this.wsi$=this.activatedRoute.data.pipe((0,p.T)(o=>o.wsi),(0,h.Bo)()),this.dso$=this.activatedRoute.data.pipe((0,p.T)(o=>o.dso),(0,h.Bo)()),this.previousQueryParameters=this.location.getState().previousQueryParams}previousPage(){this.routeService.getPreviousUrl().pipe((0,a.s)(1)).subscribe(o=>{let s={};if(o||(o="/mydspace",s=this.previousQueryParameters),o.split("?").length>1)for(const n of o.split("?")[1].split("&"))s[n.split("=")[0]]=decodeURIComponent(n.split("=")[1]);this.router.navigate([o.split("?")[0]],{queryParams:s})})}confirmDelete(o){var s=this;return(0,m.A)(function*(){yield s.modalService.open(o).result.then(n=>{"ok"===n&&s.sendDeleteRequest()})})()}sendDeleteRequest(){this.wsi$.pipe((0,u.n)(o=>this.workspaceItemService.delete(o.id).pipe((0,h.qD)()))).subscribe(o=>{if(o.hasSucceeded){const s=this.translationService.get("workspace-item.delete.notification.success.title"),n=this.translationService.get("workspace-item.delete.title");this.notificationsService.success(s,n),this.previousPage()}else{const s=this.translationService.get("workspace-item.delete.notification.error.title"),n=this.translationService.get("workspace-item.delete.notification.error.content");this.notificationsService.error(s,n)}})}static{this.\u0275fac=function(s){return new(s||r)(e.rXU(g.nX),e.rXU(g.Ix),e.rXU(f.v$),e.rXU(b.WorkspaceitemDataService),e.rXU(P.I),e.rXU(d.c$),e.rXU(l.aZ),e.rXU(I.Bq))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["ds-base-workspaceitems-delete-page"]],standalone:!0,features:[e.aNF],decls:14,vars:12,consts:[["content",""],[1,"container"],[3,"item"],[1,"btn","btn-default",3,"click"],[1,"btn","btn-danger",3,"click"],["id","delete-modal"],[1,"modal-header"],[1,"modal-title","text-danger","h4"],["type","button","id","delete_close","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button","id","delete_cancel",1,"btn","btn-secondary",3,"click"],["type","button","id","delete_confirm",1,"btn","btn-danger",3,"click"]],template:function(s,n){if(1&s){const i=e.RV6();e.j41(0,"div",1)(1,"h1"),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.DNE(4,k,2,3,"ds-modify-item-overview",2),e.nI1(5,"async"),e.j41(6,"button",3),e.bIt("click",function(){return e.eBV(i),e.Njj(n.previousPage())}),e.EFF(7),e.nI1(8,"translate"),e.k0s(),e.j41(9,"button",4),e.bIt("click",function(_){e.eBV(i);const R=e.sdS(13);return _.preventDefault(),e.Njj(n.confirmDelete(R))}),e.EFF(10),e.nI1(11,"translate"),e.k0s()(),e.DNE(12,M,16,12,"ng-template",5,0,e.C5r)}2&s&&(e.R7$(2),e.JRh(e.bMT(3,4,"workspace-item.delete.header")),e.R7$(2),e.vxM(e.bMT(5,6,n.dso$)?4:-1),e.R7$(3),e.JRh(e.bMT(8,8,"workspace-item.delete.button.cancel")),e.R7$(3),e.JRh(e.bMT(11,10,"workspace-item.delete.button.confirm")))},dependencies:[l.Jj,E.W,d.h,d.D9],styles:["[_nghost-%COMP%]     ds-modify-item-overview table{display:inline-table!important}"]})}}return r})()},18922:(D,v,t)=>{"use strict";t.r(v),t.d(v,{ROUTES:()=>o});var m=t(85643),l=t(59072),d=t(54766),p=t(50526),a=t(54438),u=t(1818),f=t(25645);const h=(s,n,i=(0,a.WQX)(f.WorkspaceitemDataService))=>(0,u.S)(s,n,i);var b=t(29901),E=t(26143);let P=(()=>{class s extends b.q{constructor(i,c){super(i,c),this.dataService=i,this.breadcrumbService=c}static{this.\u0275fac=function(c){return new(c||s)(a.KVO(f.WorkspaceitemDataService),a.KVO(E.i))}}static{this.\u0275prov=a.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var e=t(4093),g=t(41570),k=t(29710);t(89535);const T=["*"];function r(s,n){}const o=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:":id",resolve:{breadcrumb:P,wsi:(s,n,i=(0,a.WQX)(f.WorkspaceitemDataService))=>i.findById(s.params.id,!0,!1,...g.X).pipe((0,e.qD)())},children:[{canActivate:[m.t],path:"edit",component:p.r,resolve:{breadcrumb:l.S},data:{title:"submission.edit.title",breadcrumbKey:"submission.edit"}},{canActivate:[m.t],path:"view",component:d.i,resolve:{dso:h,breadcrumb:l.S},data:{title:"workspace-item.view.title",breadcrumbKey:"workspace-item.view"}},{canActivate:[m.t],path:"delete",component:(()=>{class s extends k.J{getComponentName(){return"WorkspaceItemsDeletePageComponent"}importThemedComponent(i){return t(72447)(`./${i}/app/workspaceitems-edit-page/workspaceitems-delete-page/workspaceitems-delete-page.component`)}importUnthemedComponent(){return Promise.resolve().then(t.bind(t,89535))}static{this.\u0275fac=(()=>{let i;return function(_){return(i||(i=a.xGo(s)))(_||s)}})()}static{this.\u0275cmp=a.VBU({type:s,selectors:[["ds-workspace-items-delete"]],standalone:!0,features:[a.Vt3,a.aNF],ngContentSelectors:T,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(c,_){1&c&&(a.NAR(),a.DNE(0,r,0,0,"ng-template",null,0,a.C5r),a.j41(2,"div",null,1),a.SdG(4),a.k0s())},encapsulation:2})}}return s})(),resolve:{dso:h,breadcrumb:l.S},data:{title:"workspace-item.delete",breadcrumbKey:"workspace-item.delete"}}]}]},72447:(D,v,t)=>{var m={"./custom/app/workspaceitems-edit-page/workspaceitems-delete-page/workspaceitems-delete-page.component":[71122,1122]};function l(d){if(!t.o(m,d))return Promise.resolve().then(()=>{var u=new Error("Cannot find module '"+d+"'");throw u.code="MODULE_NOT_FOUND",u});var p=m[d],a=p[0];return t.e(p[1]).then(()=>t(a))}l.keys=()=>Object.keys(m),l.id=72447,D.exports=l}}]);