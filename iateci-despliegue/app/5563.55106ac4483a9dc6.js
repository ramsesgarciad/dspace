"use strict";(self.webpackChunkdspace_angular=self.webpackChunkdspace_angular||[]).push([[5563],{45563:(y,l,n)=>{n.r(l),n.d(l,{ObjectGeospatialMapComponent:()=>b});var h=n(60177),i=n(54438),f=n(92767),u=n(78544),v=(n(25788),n(19192)),M=n(2180),r=n(89777),C=n(60958);class j{constructor(){this.points=[]}}var w=n(68193);let b=(()=>{class o{constructor(t){this.platformId=t,this.viewMode=v.n.GeospatialMap,this.isPlatformBrowser=h.UE}get mapInfo(){const t=u.c.geospatialMapViewer.spatialMetadataFields,e=[];return this.objects.payload.page.forEach(a=>{for(let s=0;s<t.length;s++){const p=a.indexableObject.metadata[t[s]];if(p&&p.length>0)for(let c=0;c<p.length;c++){const d=a.indexableObject,g=p[c].value;if((0,r.a4)(g)&&(0,r.a4)(d)){const m=this.parseMapDetail(g,d);(0,r.a4)(m)&&e.push(m)}}}}),e}parseMapDetail(t,e){try{const a=new j;a.route=(0,f._o)(e),a.title=e.name;const s=function O(o){o=o.replace(/\+/g,"");try{return(0,w.nI)(o.toUpperCase())}catch(t){console.warn(`Could not parse point from WKT string: ${o.points}, error: ${t.message}`)}}(t=t.replace(/\+/g,""));if((0,r.a4)(s)&&"Point"===s.type&&(0,r.a4)(s.coordinates)&&!(s.coordinates.length<2))return a.points.push({longitude:s.coordinates[0],latitude:s.coordinates[1],url:a.route,title:a.title}),a;console.warn("Could not parse point from WKT string: "+t)}catch(a){console.warn(`Could not parse point from WKT string: ${t}, error: ${a.message}`)}return null}static{this.\u0275fac=function(e){return new(e||o)(i.rXU(i.Agw))}}static{this.\u0275cmp=i.VBU({type:o,selectors:[["ds-object-geospatial-map"]],inputs:{objects:"objects"},standalone:!0,features:[i.aNF],decls:1,vars:1,consts:[[3,"mapInfo"]],template:function(e,a){1&e&&i.nrm(0,"ds-geospatial-map",0),2&e&&i.Y8G("mapInfo",a.mapInfo)},dependencies:[C.GeospatialMapComponent],styles:["[_nghost-%COMP%]    {--ds-wrapper-grid-spacing: calc(var(--bs-spacer) / 2)}[_nghost-%COMP%]     div.card{margin-top:var(--ds-wrapper-grid-spacing);margin-bottom:var(--ds-wrapper-grid-spacing)}[_nghost-%COMP%]     div.card div.thumbnail>.thumbnail-content{height:var(--ds-card-thumbnail-height);width:100%;display:block;min-width:100%;min-height:100%;object-fit:cover;object-position:50% 15%}.card-columns[_ngcontent-%COMP%]{margin-left:calc(-1 * var(--ds-wrapper-grid-spacing));margin-right:calc(-1 * var(--ds-wrapper-grid-spacing));column-gap:0}.card-columns[_ngcontent-%COMP%]   .card-column[_ngcontent-%COMP%]{padding-left:var(--ds-wrapper-grid-spacing);padding-right:var(--ds-wrapper-grid-spacing)}"],data:{animation:[M.qG]}})}}return o})()}}]);